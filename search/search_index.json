{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"rotalabs-comply","text":"<p>Comprehensive AI compliance and audit logging infrastructure for regulatory adherence.</p>"},{"location":"#what-is-rotalabs-comply","title":"What is rotalabs-comply?","text":"<p><code>rotalabs-comply</code> provides a complete toolkit for ensuring AI systems meet regulatory compliance requirements. It offers:</p> <ul> <li>Audit Logging -- Comprehensive logging of AI interactions with encryption, multiple storage backends (file, S3, memory), and configurable retention policies</li> <li>Compliance Frameworks -- Built-in support for EU AI Act, SOC2 Type II, and HIPAA with extensible framework architecture</li> <li>Privacy-First Design -- Hash-only mode for privacy-preserving audit trails, or encrypted content storage when full records are needed</li> <li>Report Generation -- Automated compliance reports with executive summaries, risk assessments, and remediation recommendations</li> </ul>"},{"location":"#package-overview","title":"Package Overview","text":"<pre><code>rotalabs_comply/\n\u251c\u2500\u2500 core/              # Core types, configuration, and exceptions\n\u2502   \u251c\u2500\u2500 types          # RiskLevel, Framework, AuditEntry, ComplianceProfile\n\u2502   \u251c\u2500\u2500 config         # AuditConfig, StorageConfig\n\u2502   \u2514\u2500\u2500 exceptions     # ComplianceError hierarchy\n\u251c\u2500\u2500 audit/             # Audit logging infrastructure\n\u2502   \u251c\u2500\u2500 logger         # AuditLogger main interface\n\u2502   \u251c\u2500\u2500 encryption     # EncryptionManager, Fernet encryption\n\u2502   \u2514\u2500\u2500 storage        # FileStorage, MemoryStorage, S3Storage\n\u251c\u2500\u2500 frameworks/        # Compliance framework implementations\n\u2502   \u251c\u2500\u2500 base           # BaseFramework, ComplianceRule, ComplianceFramework\n\u2502   \u251c\u2500\u2500 eu_ai_act      # EU AI Act (2024) compliance checks\n\u2502   \u251c\u2500\u2500 soc2           # SOC2 Type II Trust Service Criteria\n\u2502   \u2514\u2500\u2500 hipaa          # HIPAA Security and Privacy Rules\n\u251c\u2500\u2500 reports/           # Report generation\n\u2502   \u251c\u2500\u2500 generator      # ReportGenerator, ComplianceReport\n\u2502   \u2514\u2500\u2500 templates      # ReportTemplate, ReportSection, section generators\n\u2514\u2500\u2500 utils/             # Utility functions\n    \u2514\u2500\u2500 helpers        # Period formatting, statistics, JSON serialization\n</code></pre>"},{"location":"#supported-compliance-frameworks","title":"Supported Compliance Frameworks","text":"Framework Description Categories EU AI Act European Union AI regulation (2024) Transparency, oversight, risk management, documentation, security SOC2 Type II AICPA Trust Service Criteria Security, availability, processing integrity, confidentiality, privacy HIPAA Health data protection (US) Access control, audit, integrity, authentication, transmission, privacy"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#privacy-modes","title":"Privacy Modes","text":"<p>Choose the right privacy level for your compliance requirements:</p> <ul> <li>Hash-Only Mode (default): Store SHA-256 hashes of inputs/outputs for verification without exposing content</li> <li>Encrypted Mode: Store encrypted content when you need full audit trails with data protection</li> <li>Plaintext Mode: Store content as-is for internal development environments</li> </ul>"},{"location":"#storage-backends","title":"Storage Backends","text":"<p>Flexible storage options for different deployment scenarios:</p> <ul> <li>FileStorage: Local JSONL files with automatic rotation</li> <li>S3Storage: AWS S3 for cloud-native deployments with lifecycle management</li> <li>MemoryStorage: In-memory storage for testing and development</li> </ul>"},{"location":"#report-formats","title":"Report Formats","text":"<p>Generate compliance reports in multiple formats:</p> <ul> <li>Markdown: Human-readable documentation</li> <li>JSON: Machine-readable for integration</li> <li>HTML: Standalone reports for stakeholders</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Getting Started - Installation and first steps</li> <li>Core Concepts - Understanding compliance infrastructure</li> <li>API Reference - Detailed API documentation</li> <li>Tutorials - Step-by-step guides</li> </ul>"},{"location":"#use-cases","title":"Use Cases","text":""},{"location":"#enterprise-ai-governance","title":"Enterprise AI Governance","text":"<p>Track all AI interactions across your organization with centralized audit logging, ensuring consistent compliance with internal policies and external regulations.</p>"},{"location":"#healthcare-ai-applications","title":"Healthcare AI Applications","text":"<p>Meet HIPAA requirements for AI systems processing Protected Health Information (PHI) with encryption, access controls, and comprehensive audit trails.</p>"},{"location":"#eu-ai-act-compliance","title":"EU AI Act Compliance","text":"<p>Prepare for EU AI Act requirements with built-in checks for transparency, human oversight, risk management, and technical documentation.</p>"},{"location":"#soc2-audits","title":"SOC2 Audits","text":"<p>Demonstrate operational effectiveness of security controls for AI systems with audit logs and compliance reports suitable for SOC2 Type II audits.</p>"},{"location":"concepts/","title":"Core Concepts","text":"<p>This page explains the fundamental concepts behind <code>rotalabs-comply</code> and how the different components work together.</p>"},{"location":"concepts/#compliance-pipeline","title":"Compliance Pipeline","text":"<p>Every compliance workflow in <code>rotalabs-comply</code> follows a four-stage pipeline:</p> <pre><code>Audit Logging --&gt; Compliance Checking --&gt; Report Generation --&gt; Remediation\n</code></pre> <ol> <li> <p>Audit Logging -- Capture all AI system interactions with comprehensive metadata including inputs, outputs, safety checks, and performance metrics.</p> </li> <li> <p>Compliance Checking -- Evaluate audit entries against one or more regulatory frameworks to identify violations and risks.</p> </li> <li> <p>Report Generation -- Generate structured compliance reports with executive summaries, risk assessments, and prioritized recommendations.</p> </li> <li> <p>Remediation -- Address identified violations using the provided remediation guidance and update compliance posture.</p> </li> </ol>"},{"location":"concepts/#audit-logging","title":"Audit Logging","text":""},{"location":"concepts/#auditentry","title":"AuditEntry","text":"<p>An <code>AuditEntry</code> captures a single AI system interaction with all relevant compliance metadata:</p> Field Description <code>id</code> Unique identifier (UUID) <code>timestamp</code> When the interaction occurred <code>provider</code> AI provider (e.g., \"openai\", \"anthropic\") <code>model</code> Model identifier (e.g., \"gpt-4\", \"claude-3-opus\") <code>input_hash</code> SHA-256 hash of input content <code>output_hash</code> SHA-256 hash of output content <code>input_content</code> Actual input (if <code>store_content=True</code>, may be encrypted) <code>output_content</code> Actual output (if <code>store_content=True</code>, may be encrypted) <code>safety_passed</code> Whether all safety checks passed <code>detectors_triggered</code> List of safety detectors that flagged content <code>latency_ms</code> Response time in milliseconds <code>metadata</code> Custom key-value metadata"},{"location":"concepts/#privacy-modes","title":"Privacy Modes","text":"<p><code>rotalabs-comply</code> offers three privacy modes to balance audit completeness with data protection:</p> <pre><code>Hash-Only Mode (Default)\n\u251c\u2500\u2500 Stores SHA-256 hashes only\n\u251c\u2500\u2500 Content can be verified but not recovered\n\u2514\u2500\u2500 Maximum privacy protection\n\nEncrypted Mode\n\u251c\u2500\u2500 Stores Fernet-encrypted content\n\u251c\u2500\u2500 Content recoverable with encryption key\n\u2514\u2500\u2500 Balance of auditability and protection\n\nPlaintext Mode\n\u251c\u2500\u2500 Stores content as-is\n\u251c\u2500\u2500 No encryption overhead\n\u2514\u2500\u2500 Development/testing only\n</code></pre>"},{"location":"concepts/#content-hashing","title":"Content Hashing","text":"<p>When <code>store_content=False</code> (default), only SHA-256 hashes are stored:</p> <pre><code>from rotalabs_comply.audit import hash_content\n\n# Compute hash\ncontent = \"What is 2+2?\"\ncontent_hash = hash_content(content)\n# Returns: \"a0c2...\"\n\n# Later, verify content matches\nif hash_content(provided_content) == stored_hash:\n    print(\"Content verified\")\n</code></pre> <p>This allows verification that logged content matches original content without storing the actual data.</p>"},{"location":"concepts/#encryption","title":"Encryption","text":"<p>When encryption is enabled, content is protected using Fernet symmetric encryption:</p> <pre><code>from rotalabs_comply.audit import EncryptionManager, generate_key\n\n# Auto-generate key\nmanager = EncryptionManager()\n\n# Or use existing key\nkey = generate_key()\nmanager = EncryptionManager(key)\n\n# Encrypt/decrypt\nencrypted = manager.encrypt(\"sensitive data\")\ndecrypted = manager.decrypt(encrypted)\n\n# Important: Save the key securely!\nkey = manager.get_key()  # Store in secrets manager\n</code></pre> <p>Key Management</p> <p>The encryption key is the only way to recover encrypted content. Store it securely (e.g., AWS Secrets Manager, HashiCorp Vault) and never commit it to version control.</p>"},{"location":"concepts/#storage-backends","title":"Storage Backends","text":""},{"location":"concepts/#storagebackend-protocol","title":"StorageBackend Protocol","text":"<p>All storage backends implement the <code>StorageBackend</code> protocol:</p> <pre><code>class StorageBackend(Protocol):\n    async def write(self, entry: AuditEntry) -&gt; str: ...\n    async def read(self, entry_id: str) -&gt; AuditEntry | None: ...\n    async def list_entries(self, start: datetime, end: datetime) -&gt; List[AuditEntry]: ...\n    async def delete(self, entry_id: str) -&gt; bool: ...\n    async def count(self) -&gt; int: ...\n</code></pre>"},{"location":"concepts/#filestorage","title":"FileStorage","text":"<p>Local file storage using JSONL format with automatic rotation:</p> <ul> <li>File naming: <code>audit_YYYYMMDD.jsonl</code></li> <li>Rotation: When file exceeds <code>rotation_size_mb</code> (default: 100MB)</li> <li>Indexing: In-memory index for fast lookups</li> </ul> <pre><code>from rotalabs_comply.audit import FileStorage\n\nstorage = FileStorage(\n    path=\"/var/log/ai-audit\",\n    rotation_size_mb=100,\n)\n</code></pre>"},{"location":"concepts/#s3storage","title":"S3Storage","text":"<p>AWS S3 storage for cloud-native deployments:</p> <ul> <li>Key structure: <code>{prefix}{YYYY-MM-DD}/{entry_id}.json</code></li> <li>Lifecycle: Use S3 lifecycle policies for retention</li> <li>Pagination: Handles large result sets automatically</li> </ul> <pre><code>from rotalabs_comply.audit import S3Storage\n\nstorage = S3Storage(\n    bucket=\"my-audit-bucket\",\n    prefix=\"prod/audit/\",\n    region=\"us-west-2\",\n)\n</code></pre>"},{"location":"concepts/#memorystorage","title":"MemoryStorage","text":"<p>In-memory storage for testing and development:</p> <ul> <li>LRU eviction: Optional <code>max_entries</code> limit</li> <li>No persistence: Data lost when process ends</li> <li>Fast operations: No I/O overhead</li> </ul> <pre><code>from rotalabs_comply.audit import MemoryStorage\n\nstorage = MemoryStorage(max_entries=10000)\n</code></pre>"},{"location":"concepts/#compliance-frameworks","title":"Compliance Frameworks","text":""},{"location":"concepts/#framework-architecture","title":"Framework Architecture","text":"<p>Each compliance framework consists of:</p> <ol> <li>Rules -- Individual compliance requirements with severity, category, and check logic</li> <li>Check Function -- Evaluates audit entries against rules</li> <li>Remediation Guidance -- Recommendations for addressing violations</li> </ol> <pre><code>Framework\n\u251c\u2500\u2500 Rules\n\u2502   \u251c\u2500\u2500 Rule 1 (severity, category, check_fn, remediation)\n\u2502   \u251c\u2500\u2500 Rule 2\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 check(entry, profile) -&gt; ComplianceCheckResult\n\u2514\u2500\u2500 get_rule(rule_id) -&gt; ComplianceRule\n</code></pre>"},{"location":"concepts/#complianceprofile","title":"ComplianceProfile","text":"<p>A <code>ComplianceProfile</code> configures how compliance checks are performed:</p> Field Description <code>profile_id</code> Unique identifier <code>name</code> Human-readable name <code>enabled_frameworks</code> List of frameworks to evaluate <code>enabled_categories</code> Rule categories to include (empty = all) <code>min_severity</code> Minimum severity to report <code>excluded_rules</code> Specific rules to skip <code>system_classification</code> Classification of the AI system <pre><code>from rotalabs_comply.frameworks.base import ComplianceProfile, RiskLevel\n\nprofile = ComplianceProfile(\n    profile_id=\"healthcare-ai\",\n    name=\"Healthcare AI System\",\n    enabled_frameworks=[\"HIPAA\", \"SOC2\"],\n    min_severity=RiskLevel.MEDIUM,\n    system_classification=\"high_risk\",\n)\n</code></pre>"},{"location":"concepts/#risklevel","title":"RiskLevel","text":"<p>Violations are classified by severity:</p> Level Weight Response Time <code>CRITICAL</code> 10 Immediate action required <code>HIGH</code> 5 Address within 24-48 hours <code>MEDIUM</code> 2 Address within 1-2 weeks <code>LOW</code> 1 Address during regular reviews <code>INFO</code> 0.5 Informational, no action required"},{"location":"concepts/#built-in-frameworks","title":"Built-in Frameworks","text":""},{"location":"concepts/#eu-ai-act","title":"EU AI Act","text":"<p>The European Union AI Act (2024) framework includes checks for:</p> <ul> <li>Transparency -- Users informed of AI interaction</li> <li>Human Oversight -- Documented oversight for high-risk operations</li> <li>Risk Management -- Risk assessment documentation</li> <li>Technical Documentation -- Documentation references</li> <li>Data Governance -- Training data documentation</li> <li>Robustness -- Error handling</li> <li>Accuracy Monitoring -- Performance monitoring</li> <li>Cybersecurity -- Security validation</li> </ul>"},{"location":"concepts/#soc2-type-ii","title":"SOC2 Type II","text":"<p>AICPA Trust Service Criteria implementation:</p> <ul> <li>Security (CC) -- Access controls, monitoring, incident response</li> <li>Availability (A) -- SLA monitoring, recovery objectives</li> <li>Processing Integrity (PI) -- Input validation</li> <li>Confidentiality (C) -- Data classification</li> <li>Privacy (P) -- Privacy notices for personal data</li> </ul>"},{"location":"concepts/#hipaa","title":"HIPAA","text":"<p>Health Insurance Portability and Accountability Act:</p> <ul> <li>Access Control -- Unique user identification, encryption</li> <li>Audit Controls -- Comprehensive logging</li> <li>Integrity Controls -- Data integrity verification</li> <li>Authentication -- Strong authentication, MFA for high-risk</li> <li>Transmission Security -- Encrypted transmission</li> <li>Privacy -- Minimum necessary, de-identification</li> </ul>"},{"location":"concepts/#compliance-check-results","title":"Compliance Check Results","text":""},{"location":"concepts/#compliancecheckresult","title":"ComplianceCheckResult","text":"<p>The result of evaluating an audit entry against a framework:</p> Field Description <code>entry_id</code> ID of the checked entry <code>framework</code> Framework name <code>framework_version</code> Framework version <code>timestamp</code> When check was performed <code>violations</code> List of <code>ComplianceViolation</code> objects <code>rules_checked</code> Total rules evaluated <code>rules_passed</code> Rules that passed <code>is_compliant</code> True if no violations"},{"location":"concepts/#complianceviolation","title":"ComplianceViolation","text":"<p>Details about a specific rule violation:</p> Field Description <code>rule_id</code> Rule identifier <code>rule_name</code> Human-readable name <code>severity</code> <code>RiskLevel</code> of violation <code>description</code> What the rule requires <code>evidence</code> Specific evidence from the entry <code>remediation</code> How to fix the violation <code>entry_id</code> Entry that triggered violation <code>category</code> Rule category <code>framework</code> Framework name"},{"location":"concepts/#report-generation","title":"Report Generation","text":""},{"location":"concepts/#compliancereport","title":"ComplianceReport","text":"<p>A complete compliance report with all sections:</p> Field Description <code>id</code> Unique report identifier <code>title</code> Report title <code>framework</code> Framework (or \"Multiple\") <code>period_start</code> / <code>period_end</code> Analysis period <code>generated_at</code> Generation timestamp <code>profile</code> <code>ComplianceProfile</code> used <code>sections</code> List of <code>ReportSection</code> objects <code>total_entries</code> Entries analyzed <code>violations_count</code> Violations found <code>compliance_score</code> Score from 0.0 to 1.0 <code>status</code> \"compliant\", \"non_compliant\", or \"needs_review\""},{"location":"concepts/#compliance-scoring","title":"Compliance Scoring","text":"<p>The compliance score is calculated using weighted penalties:</p> <pre><code>Score = 1.0 - (Total Penalty / Max Possible Penalty)\n\nWhere:\n- Critical violation: 10 points penalty\n- High violation: 5 points penalty\n- Medium violation: 2 points penalty\n- Low violation: 1 point penalty\n- Info violation: 0.5 points penalty\n</code></pre>"},{"location":"concepts/#status-determination","title":"Status Determination","text":"Score Critical Violations Status Any &gt; 0 <code>non_compliant</code> &gt;= 95% 0 <code>compliant</code> &gt;= 80% 0 <code>needs_review</code> &lt; 80% 0 <code>non_compliant</code>"},{"location":"concepts/#report-sections","title":"Report Sections","text":"<p>Standard sections generated for each report:</p> <ol> <li>Executive Summary -- Key metrics, overall status, period overview</li> <li>Risk Assessment -- Severity distribution, category breakdown, priority findings</li> <li>Compliance Matrix -- Rule-by-rule pass/fail summary per framework</li> <li>Metrics Summary -- Volume, safety rates, latency percentiles</li> <li>Recommendations -- Prioritized actions (immediate, short-term, long-term)</li> <li>Audit Summary -- Daily volumes, peak activity, failure patterns</li> </ol>"},{"location":"concepts/#export-formats","title":"Export Formats","text":"Format Method Use Case Markdown <code>export_markdown()</code> Documentation, README files JSON <code>export_json()</code> API responses, data integration HTML <code>export_html()</code> Standalone reports, stakeholder sharing"},{"location":"concepts/#custom-frameworks","title":"Custom Frameworks","text":"<p>Extend <code>BaseFramework</code> to create custom compliance frameworks:</p> <pre><code>from rotalabs_comply.frameworks.base import (\n    BaseFramework,\n    ComplianceRule,\n    ComplianceViolation,\n    RiskLevel,\n)\n\nclass MyCustomFramework(BaseFramework):\n    def __init__(self):\n        rules = [\n            ComplianceRule(\n                rule_id=\"CUSTOM-001\",\n                name=\"Custom Requirement\",\n                description=\"Description of the requirement\",\n                severity=RiskLevel.MEDIUM,\n                category=\"custom\",\n                remediation=\"How to fix violations\",\n            ),\n        ]\n        super().__init__(\n            name=\"My Custom Framework\",\n            version=\"1.0\",\n            rules=rules,\n        )\n\n    def _check_rule(self, entry, rule):\n        # Implement rule checking logic\n        if rule.rule_id == \"CUSTOM-001\":\n            if not entry.metadata.get(\"custom_field\"):\n                return self._create_violation(\n                    entry, rule, \"custom_field not set\"\n                )\n        return None\n\n    def _create_violation(self, entry, rule, evidence):\n        return ComplianceViolation(\n            rule_id=rule.rule_id,\n            rule_name=rule.name,\n            severity=rule.severity,\n            description=rule.description,\n            evidence=evidence,\n            remediation=rule.remediation,\n            entry_id=entry.entry_id,\n            category=rule.category,\n            framework=self._name,\n        )\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#installation","title":"Installation","text":""},{"location":"getting-started/#basic-installation","title":"Basic Installation","text":"<pre><code>pip install rotalabs-comply\n</code></pre>"},{"location":"getting-started/#with-optional-dependencies","title":"With Optional Dependencies","text":"<pre><code># AWS S3 storage backend\npip install rotalabs-comply[s3]\n\n# All optional dependencies\npip install rotalabs-comply[all]\n\n# Development dependencies\npip install rotalabs-comply[dev]\n</code></pre>"},{"location":"getting-started/#core-dependencies","title":"Core Dependencies","text":"<p>The base package requires:</p> <ul> <li><code>pydantic&gt;=2.0.0</code> - Data validation and settings management</li> <li><code>cryptography&gt;=41.0.0</code> - Fernet encryption for audit logs</li> <li><code>aiofiles&gt;=23.0.0</code> - Async file operations</li> </ul> <p>Optional dependencies:</p> <ul> <li><code>boto3&gt;=1.26.0</code> - AWS S3 storage backend (with <code>[s3]</code> extra)</li> </ul>"},{"location":"getting-started/#basic-usage","title":"Basic Usage","text":""},{"location":"getting-started/#1-set-up-audit-logging","title":"1. Set Up Audit Logging","text":"<pre><code>import asyncio\nfrom rotalabs_comply import AuditLogger, EncryptionManager\n\nasync def main():\n    # Create an encrypted audit logger\n    encryption = EncryptionManager()\n    logger = AuditLogger(\n        storage=\"/var/log/ai-audit\",\n        encryption=encryption,\n        store_content=True,  # Store encrypted content\n        retention_days=365,\n    )\n\n    # Log an AI interaction\n    entry_id = await logger.log(\n        input=\"What is the capital of France?\",\n        output=\"The capital of France is Paris.\",\n        provider=\"openai\",\n        model=\"gpt-4\",\n        safety_passed=True,\n        latency_ms=245.5,\n        input_tokens=8,\n        output_tokens=7,\n        metadata={\"session_id\": \"abc123\"},\n    )\n\n    print(f\"Logged entry: {entry_id}\")\n\n    # Retrieve the entry\n    entry = await logger.get_entry(entry_id)\n    if entry and entry.input_content:\n        # Decrypt content if needed\n        original_input = logger.decrypt_content(entry.input_content)\n        print(f\"Original input: {original_input}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"getting-started/#2-check-compliance-against-frameworks","title":"2. Check Compliance Against Frameworks","text":"<pre><code>import asyncio\nfrom datetime import datetime\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\n\nasync def main():\n    # Create an audit entry to check\n    entry = AuditEntry(\n        entry_id=\"test-001\",\n        timestamp=datetime.utcnow(),\n        event_type=\"inference\",\n        actor=\"user@example.com\",\n        action=\"AI response generation\",\n        risk_level=RiskLevel.HIGH,\n        user_notified=True,  # Required for EU AI Act transparency\n        human_oversight=True,  # Required for high-risk operations\n        metadata={\n            \"risk_assessment_documented\": True,\n            \"accuracy_monitored\": True,\n            \"security_validated\": True,\n        },\n    )\n\n    # Create a compliance profile\n    profile = ComplianceProfile(\n        profile_id=\"prod-profile\",\n        name=\"Production AI System\",\n        enabled_frameworks=[\"EU AI Act\"],\n        min_severity=RiskLevel.LOW,\n    )\n\n    # Check compliance\n    framework = EUAIActFramework()\n    result = await framework.check(entry, profile)\n\n    print(f\"Compliant: {result.is_compliant}\")\n    print(f\"Rules checked: {result.rules_checked}\")\n    print(f\"Rules passed: {result.rules_passed}\")\n\n    if result.violations:\n        print(\"\\nViolations found:\")\n        for violation in result.violations:\n            print(f\"  - [{violation.severity.value.upper()}] {violation.rule_name}\")\n            print(f\"    Evidence: {violation.evidence}\")\n            print(f\"    Remediation: {violation.remediation}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"getting-started/#3-generate-compliance-reports","title":"3. Generate Compliance Reports","text":"<pre><code>import asyncio\nfrom datetime import datetime, timedelta\nfrom rotalabs_comply import AuditLogger, ReportGenerator\nfrom rotalabs_comply.audit import MemoryStorage\nfrom rotalabs_comply.frameworks.base import ComplianceProfile\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.soc2 import SOC2Framework\n\nasync def main():\n    # Set up storage and logger\n    storage = MemoryStorage()\n    logger = AuditLogger(storage)\n\n    # Log some test entries\n    for i in range(10):\n        await logger.log(\n            input=f\"Test input {i}\",\n            output=f\"Test output {i}\",\n            provider=\"openai\",\n            model=\"gpt-4\",\n            safety_passed=True,\n            latency_ms=100 + i * 10,\n        )\n\n    # Create report generator with frameworks\n    generator = ReportGenerator(\n        audit_logger=storage,\n        frameworks={\n            \"eu_ai_act\": EUAIActFramework(),\n            \"soc2\": SOC2Framework(),\n        },\n    )\n\n    # Create compliance profile\n    profile = ComplianceProfile(\n        profile_id=\"test\",\n        name=\"Test Environment\",\n        enabled_frameworks=[\"eu_ai_act\", \"soc2\"],\n    )\n\n    # Generate report\n    end = datetime.utcnow()\n    start = end - timedelta(days=30)\n\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    # Export as Markdown\n    markdown = generator.export_markdown(report)\n    print(markdown)\n\n    # Or export as HTML\n    html = generator.export_html(report)\n    with open(\"compliance_report.html\", \"w\") as f:\n        f.write(html)\n\n    print(f\"\\nReport generated: {report.title}\")\n    print(f\"Compliance Score: {report.compliance_score:.2%}\")\n    print(f\"Status: {report.status}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"getting-started/#privacy-mode-selection","title":"Privacy Mode Selection","text":"<p>Choose the appropriate privacy mode for your use case:</p> Hash-Only (Default)Encrypted ContentPlaintext Content <pre><code># Only stores SHA-256 hashes of content\nlogger = AuditLogger(\n    storage=\"/var/log/audit\",\n    store_content=False,  # Default\n)\n</code></pre> <p>Best for: Maximum privacy, content verification without storage</p> <pre><code># Stores encrypted content with Fernet encryption\nencryption = EncryptionManager()\nlogger = AuditLogger(\n    storage=\"/var/log/audit\",\n    encryption=encryption,\n    store_content=True,\n)\n\n# Save the key securely!\nkey = encryption.get_key()\n</code></pre> <p>Best for: Full audit trails with data protection</p> <pre><code># Stores content as-is (no encryption)\nlogger = AuditLogger(\n    storage=\"/var/log/audit\",\n    store_content=True,\n    encryption=None,\n)\n</code></pre> <p>Best for: Development/testing environments only</p>"},{"location":"getting-started/#storage-backend-selection","title":"Storage Backend Selection","text":"File StorageS3 StorageMemory Storage <pre><code>from rotalabs_comply import AuditLogger\n\nlogger = AuditLogger(\n    storage=\"/var/log/ai-audit\",  # Directory path\n)\n</code></pre> <ul> <li>JSONL format with automatic date-based files</li> <li>Automatic rotation when files exceed size limit</li> <li>Good for single-server deployments</li> </ul> <pre><code>from rotalabs_comply.audit import S3Storage, AuditLogger\n\nstorage = S3Storage(\n    bucket=\"my-audit-bucket\",\n    prefix=\"prod/audit-logs/\",\n    region=\"us-west-2\",\n)\nlogger = AuditLogger(storage)\n</code></pre> <ul> <li>Requires <code>boto3</code> (<code>pip install rotalabs-comply[s3]</code>)</li> <li>Uses S3 lifecycle policies for retention</li> <li>Best for cloud-native deployments</li> </ul> <pre><code>from rotalabs_comply.audit import MemoryStorage, AuditLogger\n\nstorage = MemoryStorage(max_entries=10000)\nlogger = AuditLogger(storage)\n</code></pre> <ul> <li>Data lost when process ends</li> <li>Good for testing and development</li> <li>Optional entry limit to prevent memory issues</li> </ul>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Read Core Concepts to understand compliance infrastructure</li> <li>Follow Audit Logging Tutorial for detailed walkthrough</li> <li>See API Reference for full documentation</li> </ul>"},{"location":"api/audit/","title":"Audit Module","text":"<p>Audit logging infrastructure including the main logger, encryption utilities, and storage backends.</p>"},{"location":"api/audit/#auditlogger","title":"AuditLogger","text":"<p>Main audit logging interface for AI compliance.</p> <p>The AuditLogger provides a high-level interface for recording AI interactions, including inputs, outputs, safety evaluations, and performance metrics. It supports optional encryption of content and configurable retention policies.</p> <p>Parameters:</p> Name Type Description Default <code>storage</code> <code>Union[StorageBackend, str]</code> <p>Either a StorageBackend instance or a file path string. If a string is provided, FileStorage is automatically created.</p> required <code>encryption</code> <code>EncryptionManager | None</code> <p>Optional EncryptionManager for encrypting stored content.</p> <code>None</code> <code>store_content</code> <code>bool</code> <p>If True, stores actual content. If False, only stores content hashes for privacy (default: False).</p> <code>False</code> <code>retention_days</code> <code>int</code> <p>Number of days to retain entries before cleanup (default: 365).</p> <code>365</code> <p>Attributes:</p> Name Type Description <code>storage</code> <code>StorageBackend</code> <p>The underlying storage backend.</p> <code>encryption</code> <p>The encryption manager (if provided).</p> <code>store_content</code> <p>Whether to store actual content.</p> <code>retention_days</code> <p>Retention period in days.</p> Example <p>Basic usage with file storage:</p> <p>logger = AuditLogger(\"/var/log/audit\") entry_id = await logger.log( ...     input=\"What is 2+2?\", ...     output=\"4\", ...     provider=\"openai\", ...     model=\"gpt-4\", ... )</p> <p>With encryption and content storage:</p> <p>from rotalabs_comply.audit import EncryptionManager encryption = EncryptionManager() logger = AuditLogger( ...     \"/var/log/audit\", ...     encryption=encryption, ...     store_content=True, ... ) entry_id = await logger.log( ...     input=\"Sensitive question\", ...     output=\"Sensitive answer\", ...     safety_passed=True, ... )</p> <p>With custom storage backend:</p> <p>from rotalabs_comply.audit import MemoryStorage storage = MemoryStorage(max_entries=10000) logger = AuditLogger(storage)</p> <p>Main audit logging interface for AI compliance.</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.__init__","title":"<code>__init__(storage, encryption=None, store_content=False, retention_days=365)</code>","text":"<p>Initialize the audit logger.</p> <p>Parameters:</p> Name Type Description Default <code>storage</code> <code>Union[StorageBackend, str]</code> <p>StorageBackend instance or file path string.</p> required <code>encryption</code> <code>EncryptionManager | None</code> <p>Optional encryption manager for content encryption.</p> <code>None</code> <code>store_content</code> <code>bool</code> <p>Whether to store actual content (default: False).</p> <code>False</code> <code>retention_days</code> <code>int</code> <p>Days to retain entries (default: 365).</p> <code>365</code>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.cleanup_expired","title":"<code>cleanup_expired()</code>  <code>async</code>","text":"<p>Delete entries older than the retention period.</p> <p>Removes all entries with timestamps older than <code>retention_days</code> from the current time.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Number of entries deleted.</p> Example Note <p>This operation may be slow for large datasets. Consider running during off-peak hours or using storage-native lifecycle policies (e.g., S3 lifecycle rules) for better performance.</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.cleanup_expired--delete-entries-older-than-retention_days","title":"Delete entries older than retention_days","text":"<p>deleted_count = await logger.cleanup_expired() print(f\"Cleaned up {deleted_count} expired entries\")</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.decrypt_content","title":"<code>decrypt_content(encrypted_content)</code>","text":"<p>Decrypt encrypted content from an audit entry.</p> <p>Convenience method for decrypting content stored in audit entries when encryption is enabled.</p> <p>Parameters:</p> Name Type Description Default <code>encrypted_content</code> <code>str</code> <p>The encrypted content string from an AuditEntry.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The decrypted original content.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If no encryption manager is configured.</p> <code>InvalidToken</code> <p>If decryption fails.</p> Example <p>entry = await logger.get_entry(\"abc-123\") if entry and entry.input_content: ...     original_input = logger.decrypt_content(entry.input_content)</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.get_entries","title":"<code>get_entries(start, end)</code>  <code>async</code>","text":"<p>Retrieve all audit entries within a time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start of the time range (inclusive).</p> required <code>end</code> <code>datetime</code> <p>End of the time range (inclusive).</p> required <p>Returns:</p> Type Description <code>List[AuditEntry]</code> <p>List[AuditEntry]: All entries within the specified time range.</p> Example <p>from datetime import datetime, timedelta end = datetime.utcnow() start = end - timedelta(days=7) entries = await logger.get_entries(start, end) print(f\"Found {len(entries)} entries in the last week\")</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.get_entry","title":"<code>get_entry(entry_id)</code>  <code>async</code>","text":"<p>Retrieve an audit entry by ID.</p> <p>If encryption is enabled and store_content is True, the content will still be encrypted in the returned entry. Use the encryption manager to decrypt if needed.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry.</p> required <p>Returns:</p> Type Description <code>AuditEntry | None</code> <p>AuditEntry | None: The entry if found, None otherwise.</p> Example <p>entry = await logger.get_entry(\"abc-123-def\") if entry: ...     print(f\"Safety passed: {entry.safety_passed}\")</p>"},{"location":"api/audit/#rotalabs_comply.audit.logger.AuditLogger.log","title":"<code>log(input, output, provider=None, model=None, conversation_id=None, safety_passed=True, detectors_triggered=None, block_reason=None, alerts=None, latency_ms=0.0, input_tokens=None, output_tokens=None, metadata=None)</code>  <code>async</code>","text":"<p>Log an AI interaction.</p> <p>Creates an audit entry for the interaction and stores it in the configured storage backend.</p> <p>Parameters:</p> Name Type Description Default <code>input</code> <code>str</code> <p>The user input or prompt.</p> required <code>output</code> <code>str</code> <p>The AI-generated output or response.</p> required <code>provider</code> <code>str | None</code> <p>The AI provider (e.g., \"openai\", \"anthropic\").</p> <code>None</code> <code>model</code> <code>str | None</code> <p>The model identifier (e.g., \"gpt-4\", \"claude-3-opus\").</p> <code>None</code> <code>conversation_id</code> <code>str | None</code> <p>Optional ID to link related interactions.</p> <code>None</code> <code>safety_passed</code> <code>bool</code> <p>Whether the interaction passed safety checks (default: True).</p> <code>True</code> <code>detectors_triggered</code> <code>List[str] | None</code> <p>List of safety detector names that triggered.</p> <code>None</code> <code>block_reason</code> <code>str | None</code> <p>Reason for blocking, if the request was blocked.</p> <code>None</code> <code>alerts</code> <code>List[str] | None</code> <p>List of alert messages generated.</p> <code>None</code> <code>latency_ms</code> <code>float</code> <p>Time taken to process the request in milliseconds (default: 0.0).</p> <code>0.0</code> <code>input_tokens</code> <code>int | None</code> <p>Number of tokens in the input.</p> <code>None</code> <code>output_tokens</code> <code>int | None</code> <p>Number of tokens in the output.</p> <code>None</code> <code>metadata</code> <code>Dict[str, Any] | None</code> <p>Additional custom metadata dictionary.</p> <code>None</code> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The unique entry ID for this audit log entry.</p> Example <p>entry_id = await logger.log( ...     input=\"Tell me a joke\", ...     output=\"Why did the chicken...\", ...     provider=\"anthropic\", ...     model=\"claude-3-opus\", ...     safety_passed=True, ...     latency_ms=250.5, ...     input_tokens=5, ...     output_tokens=20, ...     metadata={\"session_id\": \"abc123\"}, ... )</p>"},{"location":"api/audit/#constructor","title":"Constructor","text":"<pre><code>AuditLogger(\n    storage: Union[StorageBackend, str],\n    encryption: Optional[EncryptionManager] = None,\n    store_content: bool = False,\n    retention_days: int = 365,\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>storage</code> <code>Union[StorageBackend, str]</code> Required Storage backend or file path <code>encryption</code> <code>Optional[EncryptionManager]</code> <code>None</code> Encryption manager for content <code>store_content</code> <code>bool</code> <code>False</code> Store actual content vs hashes <code>retention_days</code> <code>int</code> <code>365</code> Days to retain entries"},{"location":"api/audit/#methods","title":"Methods","text":""},{"location":"api/audit/#log","title":"log","text":"<pre><code>async def log(\n    input: str,\n    output: str,\n    provider: Optional[str] = None,\n    model: Optional[str] = None,\n    conversation_id: Optional[str] = None,\n    safety_passed: bool = True,\n    detectors_triggered: Optional[List[str]] = None,\n    block_reason: Optional[str] = None,\n    alerts: Optional[List[str]] = None,\n    latency_ms: float = 0.0,\n    input_tokens: Optional[int] = None,\n    output_tokens: Optional[int] = None,\n    metadata: Optional[Dict[str, Any]] = None,\n) -&gt; str\n</code></pre> <p>Log an AI interaction and return the entry ID.</p> <p>Example:</p> <pre><code>entry_id = await logger.log(\n    input=\"Tell me a joke\",\n    output=\"Why did the chicken...\",\n    provider=\"anthropic\",\n    model=\"claude-3-opus\",\n    safety_passed=True,\n    latency_ms=250.5,\n    metadata={\"session_id\": \"abc123\"},\n)\n</code></pre>"},{"location":"api/audit/#get_entry","title":"get_entry","text":"<pre><code>async def get_entry(entry_id: str) -&gt; Optional[AuditEntry]\n</code></pre> <p>Retrieve an audit entry by ID.</p> <p>Example:</p> <pre><code>entry = await logger.get_entry(\"abc-123-def\")\nif entry:\n    print(f\"Safety passed: {entry.safety_passed}\")\n</code></pre>"},{"location":"api/audit/#get_entries","title":"get_entries","text":"<pre><code>async def get_entries(start: datetime, end: datetime) -&gt; List[AuditEntry]\n</code></pre> <p>Retrieve all entries within a time range.</p> <p>Example:</p> <pre><code>from datetime import datetime, timedelta\n\nend = datetime.utcnow()\nstart = end - timedelta(days=7)\nentries = await logger.get_entries(start, end)\n</code></pre>"},{"location":"api/audit/#cleanup_expired","title":"cleanup_expired","text":"<pre><code>async def cleanup_expired() -&gt; int\n</code></pre> <p>Delete entries older than the retention period. Returns count of deleted entries.</p> <p>Example:</p> <pre><code>deleted = await logger.cleanup_expired()\nprint(f\"Cleaned up {deleted} expired entries\")\n</code></pre>"},{"location":"api/audit/#decrypt_content","title":"decrypt_content","text":"<pre><code>def decrypt_content(encrypted_content: str) -&gt; str\n</code></pre> <p>Decrypt encrypted content from an audit entry.</p> <p>Raises:</p> <ul> <li><code>ValueError</code>: If no encryption manager is configured</li> <li><code>cryptography.fernet.InvalidToken</code>: If decryption fails</li> </ul> <p>Example:</p> <pre><code>entry = await logger.get_entry(\"abc-123\")\nif entry and entry.input_content:\n    original = logger.decrypt_content(entry.input_content)\n</code></pre>"},{"location":"api/audit/#encryption","title":"Encryption","text":""},{"location":"api/audit/#encryptionmanager","title":"EncryptionManager","text":"<p>High-level encryption manager for string data.</p> <p>Provides a convenient interface for encrypting and decrypting string data, with automatic key generation if not provided.</p> <p>Parameters:</p> Name Type Description Default <code>key</code> <code>bytes | None</code> <p>Optional Fernet encryption key. If not provided, a new key is generated.</p> <code>None</code> <p>Attributes:</p> Name Type Description <code>_key</code> <p>The encryption key (kept private).</p> <code>_fernet</code> <p>The Fernet cipher instance.</p> Example <p>manager = EncryptionManager() encrypted = manager.encrypt(\"sensitive data\") manager.decrypt(encrypted) 'sensitive data'</p> <p>High-level encryption manager for string data.</p>"},{"location":"api/audit/#rotalabs_comply.audit.encryption.EncryptionManager--use-existing-key","title":"Use existing key","text":"<p>key = generate_key() manager = EncryptionManager(key) manager.get_key() == key True</p>"},{"location":"api/audit/#rotalabs_comply.audit.encryption.EncryptionManager.__init__","title":"<code>__init__(key=None)</code>","text":"<p>Initialize the encryption manager.</p> <p>Parameters:</p> Name Type Description Default <code>key</code> <code>bytes | None</code> <p>Optional Fernet encryption key. If None, generates a new key.</p> <code>None</code>"},{"location":"api/audit/#rotalabs_comply.audit.encryption.EncryptionManager.decrypt","title":"<code>decrypt(data)</code>","text":"<p>Decrypt a base64-encoded encrypted string.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>str</code> <p>The base64-encoded encrypted string (from encrypt()).</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The original decrypted string.</p> <p>Raises:</p> Type Description <code>InvalidToken</code> <p>If decryption fails.</p> Example <p>manager = EncryptionManager() encrypted = manager.encrypt(\"secret\") manager.decrypt(encrypted) 'secret'</p>"},{"location":"api/audit/#rotalabs_comply.audit.encryption.EncryptionManager.encrypt","title":"<code>encrypt(data)</code>","text":"<p>Encrypt a string and return base64-encoded result.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>str</code> <p>The string to encrypt.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>Base64-encoded encrypted string, safe for storage in JSON.</p> Example <p>manager = EncryptionManager() encrypted = manager.encrypt(\"secret\") isinstance(encrypted, str) True</p>"},{"location":"api/audit/#rotalabs_comply.audit.encryption.EncryptionManager.get_key","title":"<code>get_key()</code>","text":"<p>Get the encryption key.</p> <p>Returns:</p> Name Type Description <code>bytes</code> <code>bytes</code> <p>The Fernet encryption key. Store this securely!</p> Warning <p>The encryption key must be stored securely. If lost, encrypted data cannot be recovered.</p> Example <p>manager = EncryptionManager() key = manager.get_key() len(key) 44</p>"},{"location":"api/audit/#constructor_1","title":"Constructor","text":"<pre><code>EncryptionManager(key: Optional[bytes] = None)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>key</code> <code>Optional[bytes]</code> Auto-gen Fernet encryption key"},{"location":"api/audit/#methods_1","title":"Methods","text":""},{"location":"api/audit/#encrypt","title":"encrypt","text":"<pre><code>def encrypt(data: str) -&gt; str\n</code></pre> <p>Encrypt a string and return base64-encoded result.</p>"},{"location":"api/audit/#decrypt","title":"decrypt","text":"<pre><code>def decrypt(data: str) -&gt; str\n</code></pre> <p>Decrypt a base64-encoded encrypted string.</p>"},{"location":"api/audit/#get_key","title":"get_key","text":"<pre><code>def get_key() -&gt; bytes\n</code></pre> <p>Get the encryption key. Store this securely!</p> <p>Example:</p> <pre><code>from rotalabs_comply import EncryptionManager\n\nmanager = EncryptionManager()\nencrypted = manager.encrypt(\"sensitive data\")\ndecrypted = manager.decrypt(encrypted)\n\n# Save key securely\nkey = manager.get_key()\n</code></pre>"},{"location":"api/audit/#helper-functions","title":"Helper Functions","text":""},{"location":"api/audit/#generate_key","title":"generate_key","text":"<pre><code>def generate_key() -&gt; bytes\n</code></pre> <p>Generate a new Fernet encryption key.</p> <p>Example:</p> <pre><code>from rotalabs_comply import generate_key\n\nkey = generate_key()\nprint(len(key))  # 44\n</code></pre>"},{"location":"api/audit/#encrypt_1","title":"encrypt","text":"<pre><code>def encrypt(data: bytes, key: bytes) -&gt; bytes\n</code></pre> <p>Encrypt raw bytes using Fernet symmetric encryption.</p>"},{"location":"api/audit/#decrypt_1","title":"decrypt","text":"<pre><code>def decrypt(data: bytes, key: bytes) -&gt; bytes\n</code></pre> <p>Decrypt data that was encrypted with Fernet.</p>"},{"location":"api/audit/#hash_content","title":"hash_content","text":"<pre><code>def hash_content(content: str) -&gt; str\n</code></pre> <p>Compute SHA-256 hash of string content.</p> <p>Example:</p> <pre><code>from rotalabs_comply import hash_content\n\ncontent_hash = hash_content(\"hello world\")\n# Returns: 'b94d27b9934d3e08a52e52d7da7dabfac484efe37a5380ee9088f7ace2efcde9'\n</code></pre>"},{"location":"api/audit/#storage-backends","title":"Storage Backends","text":""},{"location":"api/audit/#storagebackend-protocol","title":"StorageBackend Protocol","text":"<p>Protocol defining the interface for audit log storage backends.</p> <p>All storage backends must implement these async methods to support writing, reading, listing, deleting, and counting audit entries.</p> <p>Protocol defining the interface for audit log storage backends.</p> <p>Required Methods:</p> Method Signature Description <code>write</code> <code>async (entry: AuditEntry) -&gt; str</code> Write entry, return ID <code>read</code> <code>async (entry_id: str) -&gt; Optional[AuditEntry]</code> Read entry by ID <code>list_entries</code> <code>async (start: datetime, end: datetime) -&gt; List[AuditEntry]</code> List entries in range <code>delete</code> <code>async (entry_id: str) -&gt; bool</code> Delete entry, return success <code>count</code> <code>async () -&gt; int</code> Count total entries"},{"location":"api/audit/#rotalabs_comply.audit.storage.StorageBackend.count","title":"<code>count()</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>Count total number of entries in storage.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Total number of stored entries.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.StorageBackend.delete","title":"<code>delete(entry_id)</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>Delete an entry by ID.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry to delete.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the entry was deleted, False if not found.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.StorageBackend.list_entries","title":"<code>list_entries(start, end)</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>List all entries within a time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start of the time range (inclusive).</p> required <code>end</code> <code>datetime</code> <p>End of the time range (inclusive).</p> required <p>Returns:</p> Type Description <code>List[AuditEntry]</code> <p>List[AuditEntry]: Entries within the specified time range.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.StorageBackend.read","title":"<code>read(entry_id)</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>Read an audit entry by ID.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry.</p> required <p>Returns:</p> Type Description <code>AuditEntry | None</code> <p>AuditEntry | None: The entry if found, None otherwise.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.StorageBackend.write","title":"<code>write(entry)</code>  <code>abstractmethod</code> <code>async</code>","text":"<p>Write an audit entry to storage.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to store.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The entry ID (same as entry.id).</p>"},{"location":"api/audit/#filestorage","title":"FileStorage","text":"<p>File-based storage backend using JSONL format.</p> <p>Stores audit entries as JSON Lines files with automatic rotation when files exceed the configured size limit.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>Directory path for storing audit files.</p> required <code>rotation_size_mb</code> <code>int</code> <p>Maximum file size in MB before rotation (default: 100).</p> <code>100</code> <p>Attributes:</p> Name Type Description <code>path</code> <p>The storage directory path.</p> <code>rotation_size_bytes</code> <p>Maximum file size in bytes.</p> Example <p>storage = FileStorage(\"/var/log/audit\") entry_id = await storage.write(entry) retrieved = await storage.read(entry_id)</p> <p>File-based storage backend using JSONL format.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.__init__","title":"<code>__init__(path, rotation_size_mb=100)</code>","text":"<p>Initialize file storage.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>str</code> <p>Directory path for storing audit files.</p> required <code>rotation_size_mb</code> <code>int</code> <p>Maximum file size in MB before rotation.</p> <code>100</code>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.count","title":"<code>count()</code>  <code>async</code>","text":"<p>Count total number of entries in storage.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Total number of stored entries.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.delete","title":"<code>delete(entry_id)</code>  <code>async</code>","text":"<p>Delete an entry by ID.</p> <p>Note: This rewrites the file without the deleted entry, which may be slow for large files. Consider using retention policies instead.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry to delete.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the entry was deleted, False if not found.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.list_entries","title":"<code>list_entries(start, end)</code>  <code>async</code>","text":"<p>List all entries within a time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start of the time range (inclusive).</p> required <code>end</code> <code>datetime</code> <p>End of the time range (inclusive).</p> required <p>Returns:</p> Type Description <code>List[AuditEntry]</code> <p>List[AuditEntry]: Entries within the specified time range.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.read","title":"<code>read(entry_id)</code>  <code>async</code>","text":"<p>Read an audit entry by ID.</p> <p>Searches through all JSONL files if the entry is not in the index.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry.</p> required <p>Returns:</p> Type Description <code>AuditEntry | None</code> <p>AuditEntry | None: The entry if found, None otherwise.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.FileStorage.write","title":"<code>write(entry)</code>  <code>async</code>","text":"<p>Write an audit entry to a JSONL file.</p> <p>Auto-rotates the file if it exceeds the configured size limit.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to store.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The entry ID.</p>"},{"location":"api/audit/#constructor_2","title":"Constructor","text":"<pre><code>FileStorage(path: str, rotation_size_mb: int = 100)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>path</code> <code>str</code> Required Directory for audit files <code>rotation_size_mb</code> <code>int</code> <code>100</code> Max file size before rotation <p>File Structure:</p> <pre><code>{path}/\n\u251c\u2500\u2500 audit_20260128.jsonl\n\u251c\u2500\u2500 audit_20260128_001.jsonl  # Rotated\n\u251c\u2500\u2500 audit_20260129.jsonl\n\u2514\u2500\u2500 ...\n</code></pre> <p>Example:</p> <pre><code>from rotalabs_comply.audit import FileStorage\n\nstorage = FileStorage(\"/var/log/audit\", rotation_size_mb=50)\nentry_id = await storage.write(entry)\n</code></pre>"},{"location":"api/audit/#memorystorage","title":"MemoryStorage","text":"<p>In-memory storage backend for testing and development.</p> <p>Stores entries in a dictionary. Data is lost when the process ends.</p> <p>Parameters:</p> Name Type Description Default <code>max_entries</code> <code>int | None</code> <p>Optional maximum number of entries to store. When exceeded, oldest entries are removed.</p> <code>None</code> Example <p>storage = MemoryStorage(max_entries=1000) entry_id = await storage.write(entry) count = await storage.count()</p> <p>In-memory storage backend for testing and development.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.__init__","title":"<code>__init__(max_entries=None)</code>","text":"<p>Initialize memory storage.</p> <p>Parameters:</p> Name Type Description Default <code>max_entries</code> <code>int | None</code> <p>Optional maximum number of entries to store.</p> <code>None</code>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.count","title":"<code>count()</code>  <code>async</code>","text":"<p>Count total number of entries in storage.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Total number of stored entries.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.delete","title":"<code>delete(entry_id)</code>  <code>async</code>","text":"<p>Delete an entry by ID.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry to delete.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the entry was deleted, False if not found.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.list_entries","title":"<code>list_entries(start, end)</code>  <code>async</code>","text":"<p>List all entries within a time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start of the time range (inclusive).</p> required <code>end</code> <code>datetime</code> <p>End of the time range (inclusive).</p> required <p>Returns:</p> Type Description <code>List[AuditEntry]</code> <p>List[AuditEntry]: Entries within the specified time range.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.read","title":"<code>read(entry_id)</code>  <code>async</code>","text":"<p>Read an audit entry by ID.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry.</p> required <p>Returns:</p> Type Description <code>AuditEntry | None</code> <p>AuditEntry | None: The entry if found, None otherwise.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.MemoryStorage.write","title":"<code>write(entry)</code>  <code>async</code>","text":"<p>Write an audit entry to memory.</p> <p>If max_entries is set and exceeded, removes the oldest entry.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to store.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The entry ID.</p>"},{"location":"api/audit/#constructor_3","title":"Constructor","text":"<pre><code>MemoryStorage(max_entries: Optional[int] = None)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>max_entries</code> <code>Optional[int]</code> <code>None</code> Max entries (LRU eviction) <p>Example:</p> <pre><code>from rotalabs_comply.audit import MemoryStorage\n\nstorage = MemoryStorage(max_entries=1000)\ncount = await storage.count()\n</code></pre> <p>Data Persistence</p> <p>Data is lost when the process ends. Use only for testing.</p>"},{"location":"api/audit/#s3storage","title":"S3Storage","text":"<p>AWS S3 storage backend for audit logs.</p> <p>Stores each audit entry as a separate JSON file in S3, organized by date for easy querying and lifecycle management.</p> <p>Requires boto3 to be installed (optional dependency).</p> <p>Parameters:</p> Name Type Description Default <code>bucket</code> <code>str</code> <p>S3 bucket name.</p> required <code>prefix</code> <code>str</code> <p>Key prefix for audit files (default: \"audit/\").</p> <code>'audit/'</code> <code>region</code> <code>str | None</code> <p>AWS region (optional, uses default if not specified).</p> <code>None</code> File structure <p>{prefix}{YYYY-MM-DD}/{entry_id}.json</p> Example <p>storage = S3Storage(\"my-audit-bucket\", prefix=\"logs/audit/\") entry_id = await storage.write(entry)</p> <p>AWS S3 storage backend for audit logs.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage--stored-at-s3my-audit-bucketlogsaudit2024-01-15abc123json","title":"Stored at: s3://my-audit-bucket/logs/audit/2024-01-15/abc123.json","text":""},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.__init__","title":"<code>__init__(bucket, prefix='audit/', region=None)</code>","text":"<p>Initialize S3 storage.</p> <p>Parameters:</p> Name Type Description Default <code>bucket</code> <code>str</code> <p>S3 bucket name.</p> required <code>prefix</code> <code>str</code> <p>Key prefix for audit files.</p> <code>'audit/'</code> <code>region</code> <code>str | None</code> <p>AWS region (optional).</p> <code>None</code>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.count","title":"<code>count()</code>  <code>async</code>","text":"<p>Count total number of entries in storage.</p> <p>Returns:</p> Name Type Description <code>int</code> <code>int</code> <p>Total number of stored entries.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.delete","title":"<code>delete(entry_id)</code>  <code>async</code>","text":"<p>Delete an entry by ID.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry to delete.</p> required <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>True if the entry was deleted, False if not found.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.list_entries","title":"<code>list_entries(start, end)</code>  <code>async</code>","text":"<p>List all entries within a time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start of the time range (inclusive).</p> required <code>end</code> <code>datetime</code> <p>End of the time range (inclusive).</p> required <p>Returns:</p> Type Description <code>List[AuditEntry]</code> <p>List[AuditEntry]: Entries within the specified time range.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.read","title":"<code>read(entry_id)</code>  <code>async</code>","text":"<p>Read an audit entry by ID.</p> <p>Note: This searches through date prefixes which may be slow. Consider maintaining an index for production use.</p> <p>Parameters:</p> Name Type Description Default <code>entry_id</code> <code>str</code> <p>The unique identifier of the entry.</p> required <p>Returns:</p> Type Description <code>AuditEntry | None</code> <p>AuditEntry | None: The entry if found, None otherwise.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.S3Storage.write","title":"<code>write(entry)</code>  <code>async</code>","text":"<p>Write an audit entry to S3.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to store.</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The entry ID.</p>"},{"location":"api/audit/#constructor_4","title":"Constructor","text":"<pre><code>S3Storage(\n    bucket: str,\n    prefix: str = \"audit/\",\n    region: Optional[str] = None,\n)\n</code></pre> <p>Parameters:</p> Parameter Type Default Description <code>bucket</code> <code>str</code> Required S3 bucket name <code>prefix</code> <code>str</code> <code>\"audit/\"</code> Key prefix for files <code>region</code> <code>Optional[str]</code> <code>None</code> AWS region <p>Key Structure:</p> <pre><code>s3://{bucket}/{prefix}{YYYY-MM-DD}/{entry_id}.json\n</code></pre> <p>Example:</p> <pre><code>from rotalabs_comply.audit import S3Storage\n\nstorage = S3Storage(\n    bucket=\"my-audit-bucket\",\n    prefix=\"prod/audit/\",\n    region=\"us-west-2\",\n)\n</code></pre> <p>Dependency</p> <p>Requires <code>boto3</code>. Install with <code>pip install rotalabs-comply[s3]</code>.</p>"},{"location":"api/audit/#auditentry-storage","title":"AuditEntry (Storage)","text":"<p>Represents a single audit log entry.</p> <p>Captures all relevant information about an AI interaction including inputs, outputs, safety evaluations, and performance metrics.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>Unique identifier for this entry.</p> <code>timestamp</code> <code>str</code> <p>When the interaction occurred (ISO format).</p> <code>input_hash</code> <code>str</code> <p>SHA-256 hash of the input content.</p> <code>output_hash</code> <code>str</code> <p>SHA-256 hash of the output content.</p> <code>input_content</code> <code>str | None</code> <p>Actual input content (if store_content=True, may be encrypted).</p> <code>output_content</code> <code>str | None</code> <p>Actual output content (if store_content=True, may be encrypted).</p> <code>provider</code> <code>str | None</code> <p>The AI provider (e.g., \"openai\", \"anthropic\").</p> <code>model</code> <code>str | None</code> <p>The model identifier (e.g., \"gpt-4\", \"claude-3-opus\").</p> <code>conversation_id</code> <code>str | None</code> <p>Optional ID linking related interactions.</p> <code>safety_passed</code> <code>bool</code> <p>Whether the interaction passed all safety checks.</p> <code>detectors_triggered</code> <code>List[str]</code> <p>List of safety detector names that triggered.</p> <code>block_reason</code> <code>str | None</code> <p>Reason for blocking, if the request was blocked.</p> <code>alerts</code> <code>List[str]</code> <p>List of alert messages generated.</p> <code>latency_ms</code> <code>float</code> <p>Time taken to process the request in milliseconds.</p> <code>input_tokens</code> <code>int | None</code> <p>Number of tokens in the input.</p> <code>output_tokens</code> <code>int | None</code> <p>Number of tokens in the output.</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional custom metadata.</p> <p>Dataclass representing a single audit log entry in storage.</p> <p>Attributes:</p> Attribute Type Description <code>id</code> <code>str</code> Unique identifier <code>timestamp</code> <code>str</code> ISO format timestamp <code>input_hash</code> <code>str</code> SHA-256 of input <code>output_hash</code> <code>str</code> SHA-256 of output <code>input_content</code> <code>Optional[str]</code> Input content (if stored) <code>output_content</code> <code>Optional[str]</code> Output content (if stored) <code>provider</code> <code>Optional[str]</code> AI provider <code>model</code> <code>Optional[str]</code> Model identifier <code>conversation_id</code> <code>Optional[str]</code> Conversation ID <code>safety_passed</code> <code>bool</code> Safety check result <code>detectors_triggered</code> <code>List[str]</code> Triggered detectors <code>block_reason</code> <code>Optional[str]</code> Block reason <code>alerts</code> <code>List[str]</code> Alert messages <code>latency_ms</code> <code>float</code> Response latency <code>input_tokens</code> <code>Optional[int]</code> Input token count <code>output_tokens</code> <code>Optional[int]</code> Output token count <code>metadata</code> <code>Dict[str, Any]</code> Custom metadata <p>Methods:</p> Method Description <code>to_dict()</code> Convert to dictionary <code>from_dict(data)</code> Create from dictionary"},{"location":"api/audit/#rotalabs_comply.audit.storage.AuditEntry.from_dict","title":"<code>from_dict(data)</code>  <code>classmethod</code>","text":"<p>Create entry from dictionary.</p>"},{"location":"api/audit/#rotalabs_comply.audit.storage.AuditEntry.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert entry to dictionary for serialization.</p>"},{"location":"api/audit/#helper-functions_1","title":"Helper Functions","text":""},{"location":"api/audit/#create_entry_id","title":"create_entry_id","text":"<pre><code>def create_entry_id() -&gt; str\n</code></pre> <p>Generate a unique entry ID (UUID v4).</p> <p>Example:</p> <pre><code>from rotalabs_comply.audit.storage import create_entry_id\n\nentry_id = create_entry_id()\n# Returns: \"550e8400-e29b-41d4-a716-446655440000\"\n</code></pre>"},{"location":"api/core/","title":"Core Types","text":"<p>Core data models, enumerations, configuration classes, and exceptions for rotalabs-comply.</p>"},{"location":"api/core/#enumerations","title":"Enumerations","text":""},{"location":"api/core/#risklevel","title":"RiskLevel","text":"<p>Risk severity levels for compliance classification.</p> <p>These levels are used to categorize the severity of compliance violations and to set risk thresholds for AI systems.</p> <p>Attributes:</p> Name Type Description <code>LOW</code> <p>Minor risk with minimal compliance impact.</p> <code>MEDIUM</code> <p>Moderate risk requiring attention.</p> <code>HIGH</code> <p>Significant risk requiring immediate action.</p> <code>CRITICAL</code> <p>Severe risk with potential regulatory consequences.</p> <p>Risk severity levels for compliance classification.</p> Level Value Description <code>LOW</code> <code>\"low\"</code> Minor risk with minimal compliance impact <code>MEDIUM</code> <code>\"medium\"</code> Moderate risk requiring attention <code>HIGH</code> <code>\"high\"</code> Significant risk requiring immediate action <code>CRITICAL</code> <code>\"critical\"</code> Severe risk with potential regulatory consequences <p>Example:</p> <pre><code>from rotalabs_comply import RiskLevel\n\nlevel = RiskLevel.HIGH\nprint(level.value)  # \"high\"\n</code></pre>"},{"location":"api/core/#rotalabs_comply.core.types.RiskLevel.LOW","title":"<code>LOW = 'low'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/core/#rotalabs_comply.core.types.RiskLevel.MEDIUM","title":"<code>MEDIUM = 'medium'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/core/#rotalabs_comply.core.types.RiskLevel.HIGH","title":"<code>HIGH = 'high'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/core/#rotalabs_comply.core.types.RiskLevel.CRITICAL","title":"<code>CRITICAL = 'critical'</code>  <code>class-attribute</code> <code>instance-attribute</code>","text":""},{"location":"api/core/#framework","title":"Framework","text":"<p>Supported regulatory compliance frameworks.</p> <p>Each framework represents a set of compliance requirements that can be validated against AI system operations.</p> <p>Attributes:</p> Name Type Description <code>EU_AI_ACT</code> <p>European Union AI Act requirements.</p> <code>SOC2</code> <p>Service Organization Control 2 security standards.</p> <code>HIPAA</code> <p>Health Insurance Portability and Accountability Act.</p> <code>GDPR</code> <p>General Data Protection Regulation.</p> <code>NIST_AI_RMF</code> <p>NIST AI Risk Management Framework.</p> <code>ISO_42001</code> <p>ISO/IEC 42001 AI Management System standard.</p> <p>Supported regulatory compliance frameworks.</p> Framework Value Description <code>EU_AI_ACT</code> <code>\"eu_ai_act\"</code> European Union AI Act requirements <code>SOC2</code> <code>\"soc2\"</code> Service Organization Control 2 standards <code>HIPAA</code> <code>\"hipaa\"</code> Health Insurance Portability and Accountability Act <code>GDPR</code> <code>\"gdpr\"</code> General Data Protection Regulation <code>NIST_AI_RMF</code> <code>\"nist_ai_rmf\"</code> NIST AI Risk Management Framework <code>ISO_42001</code> <code>\"iso_42001\"</code> ISO/IEC 42001 AI Management System <p>Example:</p> <pre><code>from rotalabs_comply import Framework\n\nframeworks = [Framework.EU_AI_ACT, Framework.HIPAA]\n</code></pre>"},{"location":"api/core/#data-models","title":"Data Models","text":""},{"location":"api/core/#auditentry","title":"AuditEntry","text":"<p>A single audit log entry capturing an AI system interaction.</p> <p>This model captures comprehensive information about AI model invocations, including input/output data (or hashes for privacy), safety checks, and performance metrics.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>Unique identifier for this audit entry (UUID).</p> <code>timestamp</code> <code>datetime</code> <p>When the interaction occurred.</p> <code>provider</code> <code>Optional[str]</code> <p>AI provider name (e.g., \"openai\", \"anthropic\").</p> <code>model</code> <code>Optional[str]</code> <p>Model identifier (e.g., \"gpt-4\", \"claude-3-opus\").</p> <code>conversation_id</code> <code>Optional[str]</code> <p>Optional ID linking related interactions.</p> <code>input_hash</code> <code>str</code> <p>SHA-256 hash of the input content.</p> <code>output_hash</code> <code>str</code> <p>SHA-256 hash of the output content.</p> <code>input_content</code> <code>Optional[str]</code> <p>Actual input text (only if store_content enabled).</p> <code>output_content</code> <code>Optional[str]</code> <p>Actual output text (only if store_content enabled).</p> <code>safety_passed</code> <code>bool</code> <p>Whether all safety checks passed.</p> <code>detectors_triggered</code> <code>List[str]</code> <p>List of detector names that flagged content.</p> <code>block_reason</code> <code>Optional[str]</code> <p>Reason if the interaction was blocked.</p> <code>alerts</code> <code>List[str]</code> <p>List of alert messages generated.</p> <code>latency_ms</code> <code>float</code> <p>Response time in milliseconds.</p> <code>input_tokens</code> <code>Optional[int]</code> <p>Number of input tokens (if available).</p> <code>output_tokens</code> <code>Optional[int]</code> <p>Number of output tokens (if available).</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional custom metadata.</p> Example <p>entry = AuditEntry( ...     provider=\"openai\", ...     model=\"gpt-4\", ...     input_hash=\"abc123...\", ...     output_hash=\"def456...\", ...     safety_passed=True, ...     detectors_triggered=[], ...     latency_ms=245.5, ... )</p> <p>A single audit log entry capturing an AI system interaction.</p> <p>Attributes:</p> Attribute Type Description <code>id</code> <code>str</code> Unique identifier (UUID, auto-generated) <code>timestamp</code> <code>datetime</code> When the interaction occurred <code>provider</code> <code>Optional[str]</code> AI provider name (e.g., \"openai\") <code>model</code> <code>Optional[str]</code> Model identifier (e.g., \"gpt-4\") <code>conversation_id</code> <code>Optional[str]</code> ID linking related interactions <code>input_hash</code> <code>str</code> SHA-256 hash of input content <code>output_hash</code> <code>str</code> SHA-256 hash of output content <code>input_content</code> <code>Optional[str]</code> Actual input (if stored, may be encrypted) <code>output_content</code> <code>Optional[str]</code> Actual output (if stored, may be encrypted) <code>safety_passed</code> <code>bool</code> Whether all safety checks passed <code>detectors_triggered</code> <code>List[str]</code> Safety detectors that flagged content <code>block_reason</code> <code>Optional[str]</code> Reason if interaction was blocked <code>alerts</code> <code>List[str]</code> Alert messages generated <code>latency_ms</code> <code>float</code> Response time in milliseconds <code>input_tokens</code> <code>Optional[int]</code> Number of input tokens <code>output_tokens</code> <code>Optional[int]</code> Number of output tokens <code>metadata</code> <code>Dict[str, Any]</code> Additional custom metadata <p>Example:</p> <pre><code>from rotalabs_comply import AuditEntry\n\nentry = AuditEntry(\n    provider=\"openai\",\n    model=\"gpt-4\",\n    input_hash=\"abc123...\",\n    output_hash=\"def456...\",\n    safety_passed=True,\n    latency_ms=245.5,\n)\n</code></pre>"},{"location":"api/core/#complianceprofile","title":"ComplianceProfile","text":"<p>Configuration profile defining compliance requirements.</p> <p>This model specifies which regulatory frameworks apply, risk tolerance, documentation requirements, and data handling policies for an AI system.</p> <p>Attributes:</p> Name Type Description <code>frameworks</code> <code>List[Framework]</code> <p>List of regulatory frameworks to comply with.</p> <code>risk_level</code> <code>RiskLevel</code> <p>Maximum acceptable risk level.</p> <code>required_documentation</code> <code>bool</code> <p>Whether comprehensive docs are required.</p> <code>data_retention_days</code> <code>int</code> <p>How long to retain audit data.</p> <code>encrypt_audit_logs</code> <code>bool</code> <p>Whether to encrypt stored audit logs.</p> <code>store_content</code> <code>bool</code> <p>Whether to store actual content vs just hashes.</p> <code>custom_policies</code> <code>Dict[str, Any]</code> <p>Additional custom policy configurations.</p> Example <p>profile = ComplianceProfile( ...     frameworks=[Framework.GDPR, Framework.EU_AI_ACT], ...     risk_level=RiskLevel.MEDIUM, ...     data_retention_days=365, ...     store_content=False,  # Privacy mode ... )</p> <p>Configuration profile defining compliance requirements.</p> <p>Attributes:</p> Attribute Type Default Description <code>frameworks</code> <code>List[Framework]</code> <code>[]</code> Regulatory frameworks to comply with <code>risk_level</code> <code>RiskLevel</code> <code>MEDIUM</code> Maximum acceptable risk level <code>required_documentation</code> <code>bool</code> <code>True</code> Whether comprehensive docs required <code>data_retention_days</code> <code>int</code> <code>365</code> Days to retain audit data <code>encrypt_audit_logs</code> <code>bool</code> <code>True</code> Whether to encrypt stored logs <code>store_content</code> <code>bool</code> <code>False</code> Store content vs just hashes <code>custom_policies</code> <code>Dict[str, Any]</code> <code>{}</code> Custom policy configurations <p>Example:</p> <pre><code>from rotalabs_comply import ComplianceProfile, Framework, RiskLevel\n\nprofile = ComplianceProfile(\n    frameworks=[Framework.GDPR, Framework.EU_AI_ACT],\n    risk_level=RiskLevel.MEDIUM,\n    data_retention_days=365,\n    store_content=False,\n)\n</code></pre>"},{"location":"api/core/#complianceviolation","title":"ComplianceViolation","text":"<p>A single compliance violation detected during checking.</p> <p>This model captures details about a specific compliance rule violation, including the framework, severity, and recommended remediation steps.</p> <p>Attributes:</p> Name Type Description <code>framework</code> <code>Framework</code> <p>The regulatory framework that was violated.</p> <code>rule_id</code> <code>str</code> <p>Identifier of the specific rule that was violated.</p> <code>severity</code> <code>RiskLevel</code> <p>How severe the violation is.</p> <code>description</code> <code>str</code> <p>Human-readable description of the violation.</p> <code>evidence</code> <code>Dict[str, Any]</code> <p>Data supporting the violation finding.</p> <code>remediation</code> <code>str</code> <p>Recommended steps to fix the violation.</p> <code>timestamp</code> <code>datetime</code> <p>When the violation was detected.</p> Example <p>violation = ComplianceViolation( ...     framework=Framework.GDPR, ...     rule_id=\"GDPR-ART13-1\", ...     severity=RiskLevel.HIGH, ...     description=\"Personal data processed without consent record\", ...     evidence={\"field\": \"user_email\", \"record_id\": \"123\"}, ...     remediation=\"Implement consent tracking mechanism\", ... )</p> <p>A single compliance violation detected during checking.</p> <p>Attributes:</p> Attribute Type Description <code>framework</code> <code>Framework</code> The framework that was violated <code>rule_id</code> <code>str</code> Identifier of the violated rule <code>severity</code> <code>RiskLevel</code> Severity of the violation <code>description</code> <code>str</code> Human-readable description <code>evidence</code> <code>Dict[str, Any]</code> Data supporting the finding <code>remediation</code> <code>str</code> Recommended fix steps <code>timestamp</code> <code>datetime</code> When violation was detected <p>Example:</p> <pre><code>from rotalabs_comply import ComplianceViolation, Framework, RiskLevel\n\nviolation = ComplianceViolation(\n    framework=Framework.GDPR,\n    rule_id=\"GDPR-ART13-1\",\n    severity=RiskLevel.HIGH,\n    description=\"Personal data processed without consent record\",\n    evidence={\"field\": \"user_email\"},\n    remediation=\"Implement consent tracking mechanism\",\n)\n</code></pre>"},{"location":"api/core/#compliancecheckresult","title":"ComplianceCheckResult","text":"<p>Result of a compliance check against a regulatory framework.</p> <p>This model captures the outcome of validating an AI system's operations against compliance requirements, including any violations found.</p> <p>Attributes:</p> Name Type Description <code>passed</code> <code>bool</code> <p>Whether the check passed (no critical violations).</p> <code>framework</code> <code>Framework</code> <p>The framework that was checked against.</p> <code>violations</code> <code>List[ComplianceViolation]</code> <p>List of compliance violations found.</p> <code>warnings</code> <code>List[str]</code> <p>Non-critical issues that should be addressed.</p> <code>recommendations</code> <code>List[str]</code> <p>Suggestions for improving compliance posture.</p> <code>checked_at</code> <code>datetime</code> <p>When the compliance check was performed.</p> Example <p>result = ComplianceCheckResult( ...     passed=False, ...     framework=Framework.SOC2, ...     violations=[violation], ...     warnings=[\"Audit log rotation not configured\"], ...     recommendations=[\"Enable encryption for audit logs\"], ... )</p> <p>Result of a compliance check against a regulatory framework.</p> <p>Attributes:</p> Attribute Type Description <code>passed</code> <code>bool</code> Whether check passed (no critical violations) <code>framework</code> <code>Framework</code> Framework checked against <code>violations</code> <code>List[ComplianceViolation]</code> Violations found <code>warnings</code> <code>List[str]</code> Non-critical issues <code>recommendations</code> <code>List[str]</code> Improvement suggestions <code>checked_at</code> <code>datetime</code> When check was performed <p>Example:</p> <pre><code>from rotalabs_comply import ComplianceCheckResult, Framework\n\nresult = ComplianceCheckResult(\n    passed=False,\n    framework=Framework.SOC2,\n    violations=[violation],\n    warnings=[\"Audit log rotation not configured\"],\n    recommendations=[\"Enable encryption for audit logs\"],\n)\n</code></pre>"},{"location":"api/core/#configuration-classes","title":"Configuration Classes","text":""},{"location":"api/core/#auditconfig","title":"AuditConfig","text":"<p>Configuration for audit logging behavior.</p> <p>This model defines how audit entries are stored, encrypted, rotated, and retained over time.</p> <p>Attributes:</p> Name Type Description <code>destination</code> <code>str</code> <p>File path or S3 URL (s3://bucket/prefix) for audit logs.</p> <code>encryption_enabled</code> <code>bool</code> <p>Whether to encrypt audit log data at rest.</p> <code>encryption_key</code> <code>Optional[str]</code> <p>Base64-encoded encryption key (auto-generated if not provided).</p> <code>retention_days</code> <code>int</code> <p>Number of days to retain audit logs before deletion.</p> <code>max_file_size_mb</code> <code>int</code> <p>Maximum size of a single audit log file before rotation.</p> <code>rotation_enabled</code> <code>bool</code> <p>Whether to enable automatic log rotation.</p> <code>compression_enabled</code> <code>bool</code> <p>Whether to compress audit log files.</p> Example <p>config = AuditConfig( ...     destination=\"/var/log/ai-audit/\", ...     encryption_enabled=True, ...     retention_days=365, ...     rotation_enabled=True, ... )</p> <p>s3_config = AuditConfig( ...     destination=\"s3://my-bucket/audit-logs/\", ...     encryption_enabled=True, ...     compression_enabled=True, ... )</p> <p>Configuration for audit logging behavior.</p> <p>Attributes:</p> Attribute Type Default Description <code>destination</code> <code>str</code> Required File path or S3 URL for logs <code>encryption_enabled</code> <code>bool</code> <code>True</code> Encrypt data at rest <code>encryption_key</code> <code>Optional[str]</code> Auto-gen Base64-encoded encryption key <code>retention_days</code> <code>int</code> <code>365</code> Days before deletion (1-3650) <code>max_file_size_mb</code> <code>int</code> <code>100</code> Max file size before rotation <code>rotation_enabled</code> <code>bool</code> <code>True</code> Enable automatic rotation <code>compression_enabled</code> <code>bool</code> <code>False</code> Compress audit files <p>Properties:</p> Property Type Description <code>is_s3_destination</code> <code>bool</code> Whether destination is S3 URL <code>s3_bucket</code> <code>Optional[str]</code> S3 bucket name if applicable <code>s3_prefix</code> <code>Optional[str]</code> S3 key prefix if applicable <p>Example:</p> <pre><code>from rotalabs_comply import AuditConfig\n\n# File storage\nconfig = AuditConfig(\n    destination=\"/var/log/ai-audit/\",\n    encryption_enabled=True,\n    retention_days=365,\n)\n\n# S3 storage\ns3_config = AuditConfig(\n    destination=\"s3://my-bucket/audit-logs/\",\n    encryption_enabled=True,\n    compression_enabled=True,\n)\n</code></pre>"},{"location":"api/core/#rotalabs_comply.core.config.AuditConfig.is_s3_destination","title":"<code>is_s3_destination</code>  <code>property</code>","text":"<p>Check if the destination is an S3 URL.</p>"},{"location":"api/core/#rotalabs_comply.core.config.AuditConfig.s3_bucket","title":"<code>s3_bucket</code>  <code>property</code>","text":"<p>Extract S3 bucket name from destination if applicable.</p>"},{"location":"api/core/#rotalabs_comply.core.config.AuditConfig.s3_prefix","title":"<code>s3_prefix</code>  <code>property</code>","text":"<p>Extract S3 key prefix from destination if applicable.</p>"},{"location":"api/core/#rotalabs_comply.core.config.AuditConfig.model_post_init","title":"<code>model_post_init(__context)</code>","text":"<p>Auto-generate encryption key if encryption is enabled but no key provided.</p>"},{"location":"api/core/#rotalabs_comply.core.config.AuditConfig.validate_destination","title":"<code>validate_destination(v)</code>  <code>classmethod</code>","text":"<p>Validate that destination is a valid path or S3 URL.</p>"},{"location":"api/core/#storageconfig","title":"StorageConfig","text":"<p>Configuration for storage backend selection and settings.</p> <p>This model defines which storage backend to use and its specific configuration options.</p> <p>Attributes:</p> Name Type Description <code>backend</code> <code>Literal['file', 's3', 'memory']</code> <p>Storage backend type (\"file\", \"s3\", or \"memory\").</p> <code>path</code> <code>Optional[str]</code> <p>Local file path for file backend.</p> <code>bucket</code> <code>Optional[str]</code> <p>S3 bucket name for S3 backend.</p> <code>prefix</code> <code>Optional[str]</code> <p>S3 key prefix for organizing objects.</p> <code>region</code> <code>Optional[str]</code> <p>AWS region for S3 backend.</p> Example <p>file_storage = StorageConfig( ...     backend=\"file\", ...     path=\"/var/log/ai-audit/\", ... )</p> <p>s3_storage = StorageConfig( ...     backend=\"s3\", ...     bucket=\"my-audit-bucket\", ...     prefix=\"prod/audit-logs/\", ...     region=\"us-west-2\", ... )</p> <p>memory_storage = StorageConfig( ...     backend=\"memory\",  # For testing ... )</p> <p>Configuration for storage backend selection.</p> <p>Attributes:</p> Attribute Type Default Description <code>backend</code> <code>Literal[\"file\", \"s3\", \"memory\"]</code> <code>\"file\"</code> Storage backend type <code>path</code> <code>Optional[str]</code> <code>None</code> Local path for file backend <code>bucket</code> <code>Optional[str]</code> <code>None</code> S3 bucket for S3 backend <code>prefix</code> <code>Optional[str]</code> <code>None</code> S3 key prefix <code>region</code> <code>Optional[str]</code> <code>None</code> AWS region for S3 <p>Example:</p> <pre><code>from rotalabs_comply import StorageConfig\n\n# File storage\nfile_config = StorageConfig(\n    backend=\"file\",\n    path=\"/var/log/ai-audit/\",\n)\n\n# S3 storage\ns3_config = StorageConfig(\n    backend=\"s3\",\n    bucket=\"my-audit-bucket\",\n    prefix=\"prod/audit-logs/\",\n    region=\"us-west-2\",\n)\n\n# Memory storage (testing)\nmemory_config = StorageConfig(backend=\"memory\")\n</code></pre>"},{"location":"api/core/#rotalabs_comply.core.config.StorageConfig.model_post_init","title":"<code>model_post_init(__context)</code>","text":"<p>Validate backend-specific requirements.</p>"},{"location":"api/core/#rotalabs_comply.core.config.StorageConfig.validate_bucket","title":"<code>validate_bucket(v)</code>  <code>classmethod</code>","text":"<p>Validate S3 bucket name.</p>"},{"location":"api/core/#rotalabs_comply.core.config.StorageConfig.validate_path","title":"<code>validate_path(v)</code>  <code>classmethod</code>","text":"<p>Validate and normalize file path.</p>"},{"location":"api/core/#exceptions","title":"Exceptions","text":""},{"location":"api/core/#complianceerror","title":"ComplianceError","text":"<p>Base exception for all compliance-related errors.</p> <p>All other exceptions in this module inherit from this class, allowing for broad exception catching when needed.</p> <p>Attributes:</p> Name Type Description <code>message</code> <p>Human-readable error description.</p> <code>details</code> <p>Optional dictionary with additional error context.</p> <p>Base exception for all compliance-related errors.</p> <p>Attributes:</p> Attribute Type Description <code>message</code> <code>str</code> Human-readable error description <code>details</code> <code>Dict[str, Any]</code> Additional error context <p>Example:</p> <pre><code>from rotalabs_comply import ComplianceError\n\ntry:\n    # ... compliance operation\n    pass\nexcept ComplianceError as e:\n    print(f\"Error: {e.message}\")\n    print(f\"Details: {e.details}\")\n</code></pre>"},{"location":"api/core/#rotalabs_comply.core.exceptions.ComplianceError.__init__","title":"<code>__init__(message, details=None)</code>","text":"<p>Initialize a ComplianceError.</p> <p>Parameters:</p> Name Type Description Default <code>message</code> <code>str</code> <p>Human-readable error description.</p> required <code>details</code> <code>Optional[Dict[str, Any]]</code> <p>Optional dictionary with additional context about the error.</p> <code>None</code>"},{"location":"api/core/#rotalabs_comply.core.exceptions.ComplianceError.__str__","title":"<code>__str__()</code>","text":"<p>Return string representation of the error.</p>"},{"location":"api/core/#auditerror","title":"AuditError","text":"<p>Exception raised for audit logging failures.</p> <p>This exception is raised when there are issues with: - Writing audit entries - Reading audit logs - Audit log rotation - Audit data validation</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; raise AuditError(\"Failed to write audit entry\", {\"entry_id\": \"abc123\"})\n</code></pre> <p>Exception for audit logging failures.</p> <p>Raised when: - Writing audit entries fails - Reading audit logs fails - Audit log rotation fails - Audit data validation fails</p>"},{"location":"api/core/#storageerror","title":"StorageError","text":"<p>Exception raised for storage backend failures.</p> <p>This exception is raised when there are issues with: - Connecting to storage backends (file, S3, etc.) - Reading or writing data to storage - Storage configuration problems - Permission issues</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; raise StorageError(\"S3 bucket not accessible\", {\"bucket\": \"my-bucket\"})\n</code></pre> <p>Exception for storage backend failures.</p> <p>Raised when: - Storage backend connection fails - Reading/writing data fails - Storage configuration is invalid - Permission issues occur</p>"},{"location":"api/core/#encryptionerror","title":"EncryptionError","text":"<p>Exception raised for encryption/decryption failures.</p> <p>This exception is raised when there are issues with: - Encrypting audit data - Decrypting stored data - Key management - Invalid encryption configuration</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; raise EncryptionError(\"Invalid encryption key format\")\n</code></pre> <p>Exception for encryption/decryption failures.</p> <p>Raised when: - Encrypting audit data fails - Decrypting stored data fails - Key management issues occur - Invalid encryption configuration</p>"},{"location":"api/core/#validationerror","title":"ValidationError","text":"<p>Exception raised for data validation failures.</p> <p>This exception is raised when there are issues with: - Invalid input data format - Missing required fields - Data type mismatches - Schema validation failures</p> <p>Attributes:</p> Name Type Description <code>field</code> <p>Optional name of the field that failed validation.</p> <code>value</code> <p>Optional value that caused the validation failure.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; raise ValidationError(\n...     \"Invalid risk level\",\n...     details={\"field\": \"risk_level\", \"value\": \"UNKNOWN\"}\n... )\n</code></pre> <p>Exception for data validation failures.</p> <p>Additional Attributes:</p> Attribute Type Description <code>field</code> <code>Optional[str]</code> Field that failed validation <code>value</code> <code>Optional[Any]</code> Value that caused failure <p>Example:</p> <pre><code>from rotalabs_comply import ValidationError\n\ntry:\n    # ... validation\n    pass\nexcept ValidationError as e:\n    print(f\"Field: {e.field}\")\n    print(f\"Value: {e.value}\")\n</code></pre>"},{"location":"api/core/#rotalabs_comply.core.exceptions.ValidationError.__init__","title":"<code>__init__(message, details=None, field=None, value=None)</code>","text":"<p>Initialize a ValidationError.</p> <p>Parameters:</p> Name Type Description Default <code>message</code> <code>str</code> <p>Human-readable error description.</p> required <code>details</code> <code>Optional[Dict[str, Any]]</code> <p>Optional dictionary with additional context.</p> <code>None</code> <code>field</code> <code>Optional[str]</code> <p>Optional name of the field that failed validation.</p> <code>None</code> <code>value</code> <code>Optional[Any]</code> <p>Optional value that caused the validation failure.</p> <code>None</code>"},{"location":"api/core/#frameworkerror","title":"FrameworkError","text":"<p>Exception raised for regulatory framework-related failures.</p> <p>This exception is raised when there are issues with: - Unsupported framework operations - Framework rule validation - Framework configuration errors - Incompatible framework combinations</p> <p>Attributes:</p> Name Type Description <code>framework</code> <p>Optional identifier of the framework that caused the error.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; raise FrameworkError(\n...     \"Framework not supported\",\n...     details={\"framework\": \"UNKNOWN_FRAMEWORK\"}\n... )\n</code></pre> <p>Exception for framework-related failures.</p> <p>Additional Attributes:</p> Attribute Type Description <code>framework</code> <code>Optional[str]</code> Framework that caused the error <p>Raised when: - Unsupported framework operations - Framework rule validation fails - Framework configuration errors - Incompatible framework combinations</p>"},{"location":"api/core/#rotalabs_comply.core.exceptions.FrameworkError.__init__","title":"<code>__init__(message, details=None, framework=None)</code>","text":"<p>Initialize a FrameworkError.</p> <p>Parameters:</p> Name Type Description Default <code>message</code> <code>str</code> <p>Human-readable error description.</p> required <code>details</code> <code>Optional[Dict[str, Any]]</code> <p>Optional dictionary with additional context.</p> <code>None</code> <code>framework</code> <code>Optional[str]</code> <p>Optional identifier of the framework that caused the error.</p> <code>None</code>"},{"location":"api/frameworks/","title":"Frameworks Module","text":"<p>Compliance framework implementations for EU AI Act, SOC2, and HIPAA.</p>"},{"location":"api/frameworks/#base-types","title":"Base Types","text":""},{"location":"api/frameworks/#compliancerule","title":"ComplianceRule","text":"<p>Definition of a single compliance rule within a framework.</p> <p>Rules represent specific regulatory requirements that AI systems must satisfy. Each rule has an associated check function that evaluates audit entries for compliance.</p> <p>Attributes:</p> Name Type Description <code>rule_id</code> <code>str</code> <p>Unique identifier for this rule within the framework</p> <code>name</code> <code>str</code> <p>Human-readable name of the rule</p> <code>description</code> <code>str</code> <p>Detailed description of the requirement</p> <code>severity</code> <code>RiskLevel</code> <p>Default severity level for violations of this rule</p> <code>category</code> <code>str</code> <p>Category grouping for the rule</p> <code>check_fn</code> <code>Optional[Callable[[AuditEntry], bool]]</code> <p>Optional custom check function for specialized validation</p> <code>remediation</code> <code>str</code> <p>Default remediation guidance for violations</p> <code>references</code> <code>List[str]</code> <p>External references (regulation sections, standards, etc.)</p> <p>Definition of a single compliance rule within a framework.</p> <p>Attributes:</p> Attribute Type Description <code>rule_id</code> <code>str</code> Unique identifier within framework <code>name</code> <code>str</code> Human-readable name <code>description</code> <code>str</code> Detailed requirement description <code>severity</code> <code>RiskLevel</code> Default severity for violations <code>category</code> <code>str</code> Category grouping <code>check_fn</code> <code>Optional[Callable]</code> Custom check function <code>remediation</code> <code>str</code> Default remediation guidance <code>references</code> <code>List[str]</code> External references <p>Example:</p> <pre><code>from rotalabs_comply.frameworks.base import ComplianceRule, RiskLevel\n\nrule = ComplianceRule(\n    rule_id=\"CUSTOM-001\",\n    name=\"Custom Requirement\",\n    description=\"Description of what's required\",\n    severity=RiskLevel.MEDIUM,\n    category=\"custom\",\n    remediation=\"How to fix violations\",\n    references=[\"Internal Policy 1.2.3\"],\n)\n</code></pre>"},{"location":"api/frameworks/#complianceframework-protocol","title":"ComplianceFramework Protocol","text":"<p>Protocol defining the interface for compliance frameworks.</p> <p>All compliance frameworks must implement this protocol to ensure consistent behavior across different regulatory standards.</p> <p>Frameworks evaluate audit entries against their rules and produce compliance check results with any violations found.</p> <p>Protocol defining the interface for compliance frameworks.</p> <p>Properties:</p> Property Type Description <code>name</code> <code>str</code> Framework name <code>version</code> <code>str</code> Framework version <code>rules</code> <code>List[ComplianceRule]</code> All rules <p>Methods:</p> Method Signature Description <code>check</code> <code>async (entry, profile) -&gt; ComplianceCheckResult</code> Check entry <code>get_rule</code> <code>(rule_id: str) -&gt; Optional[ComplianceRule]</code> Get rule by ID <code>list_categories</code> <code>() -&gt; List[str]</code> List categories"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.name","title":"<code>name</code>  <code>property</code>","text":"<p>Get the name of this compliance framework.</p> <p>Returns:</p> Type Description <code>str</code> <p>Human-readable name (e.g., \"EU AI Act\", \"SOC2 Type II\")</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.rules","title":"<code>rules</code>  <code>property</code>","text":"<p>Get all rules defined in this framework.</p> <p>Returns:</p> Type Description <code>List[ComplianceRule]</code> <p>List of all compliance rules</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.version","title":"<code>version</code>  <code>property</code>","text":"<p>Get the version of the framework being implemented.</p> <p>Returns:</p> Type Description <code>str</code> <p>Version string (e.g., \"2024\", \"2017\")</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.check","title":"<code>check(entry, profile)</code>  <code>async</code>","text":"<p>Check an audit entry for compliance violations.</p> <p>Evaluates the entry against all applicable rules based on the provided compliance profile.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to evaluate</p> required <code>profile</code> <code>ComplianceProfile</code> <p>Configuration profile controlling evaluation</p> required <p>Returns:</p> Type Description <code>ComplianceCheckResult</code> <p>ComplianceCheckResult containing any violations found</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.get_rule","title":"<code>get_rule(rule_id)</code>","text":"<p>Get a specific rule by its ID.</p> <p>Parameters:</p> Name Type Description Default <code>rule_id</code> <code>str</code> <p>The unique identifier of the rule</p> required <p>Returns:</p> Type Description <code>Optional[ComplianceRule]</code> <p>The ComplianceRule if found, None otherwise</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceFramework.list_categories","title":"<code>list_categories()</code>","text":"<p>List all rule categories in this framework.</p> <p>Returns:</p> Type Description <code>List[str]</code> <p>List of unique category names</p>"},{"location":"api/frameworks/#baseframework","title":"BaseFramework","text":"<p>Abstract base class for compliance frameworks.</p> <p>Provides common functionality for all framework implementations including rule management, category listing, and the main check loop. Subclasses must implement the _check_rule method to define framework-specific validation logic.</p> <p>Attributes:</p> Name Type Description <code>_name</code> <p>Framework name</p> <code>_version</code> <p>Framework version</p> <code>_rules</code> <p>List of rules in this framework</p> <code>_rules_by_id</code> <code>Dict[str, ComplianceRule]</code> <p>Dictionary mapping rule IDs to rules for fast lookup</p> <p>Abstract base class for compliance frameworks.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.name","title":"<code>name</code>  <code>property</code>","text":"<p>Get the framework name.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.rules","title":"<code>rules</code>  <code>property</code>","text":"<p>Get all rules in this framework.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.version","title":"<code>version</code>  <code>property</code>","text":"<p>Get the framework version.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.__init__","title":"<code>__init__(name, version, rules)</code>","text":"<p>Initialize the base framework.</p> <p>Parameters:</p> Name Type Description Default <code>name</code> <code>str</code> <p>Human-readable framework name</p> required <code>version</code> <code>str</code> <p>Framework version string</p> required <code>rules</code> <code>List[ComplianceRule]</code> <p>List of compliance rules</p> required"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.check","title":"<code>check(entry, profile)</code>  <code>async</code>","text":"<p>Check an audit entry for compliance violations.</p> <p>Evaluates the entry against all applicable rules based on the provided compliance profile, respecting category filters and excluded rules.</p> <p>Parameters:</p> Name Type Description Default <code>entry</code> <code>AuditEntry</code> <p>The audit entry to evaluate</p> required <code>profile</code> <code>ComplianceProfile</code> <p>Configuration profile controlling evaluation</p> required <p>Returns:</p> Type Description <code>ComplianceCheckResult</code> <p>ComplianceCheckResult containing any violations found</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.get_rule","title":"<code>get_rule(rule_id)</code>","text":"<p>Get a specific rule by its ID.</p> <p>Parameters:</p> Name Type Description Default <code>rule_id</code> <code>str</code> <p>The unique identifier of the rule</p> required <p>Returns:</p> Type Description <code>Optional[ComplianceRule]</code> <p>The ComplianceRule if found, None otherwise</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.BaseFramework.list_categories","title":"<code>list_categories()</code>","text":"<p>List all unique rule categories in this framework.</p> <p>Returns:</p> Type Description <code>List[str]</code> <p>Sorted list of unique category names</p>"},{"location":"api/frameworks/#constructor","title":"Constructor","text":"<pre><code>BaseFramework(name: str, version: str, rules: List[ComplianceRule])\n</code></pre>"},{"location":"api/frameworks/#abstract-method","title":"Abstract Method","text":"<p>Subclasses must implement:</p> <pre><code>def _check_rule(\n    self, entry: AuditEntry, rule: ComplianceRule\n) -&gt; Optional[ComplianceViolation]\n</code></pre> <p>Example Custom Framework:</p> <pre><code>from rotalabs_comply.frameworks.base import BaseFramework, ComplianceRule, RiskLevel\n\nclass MyFramework(BaseFramework):\n    def __init__(self):\n        rules = [\n            ComplianceRule(\n                rule_id=\"MY-001\",\n                name=\"My Rule\",\n                description=\"Description\",\n                severity=RiskLevel.MEDIUM,\n                category=\"custom\",\n            ),\n        ]\n        super().__init__(\"My Framework\", \"1.0\", rules)\n\n    def _check_rule(self, entry, rule):\n        if rule.rule_id == \"MY-001\":\n            if not entry.metadata.get(\"my_field\"):\n                return self._create_violation(entry, rule, \"my_field missing\")\n        return None\n</code></pre>"},{"location":"api/frameworks/#auditentry-frameworks","title":"AuditEntry (Frameworks)","text":"<p>Represents a single audit log entry for an AI system interaction.</p> <p>Audit entries capture the essential metadata about AI system operations that compliance frameworks need to evaluate against regulatory requirements.</p> <p>Attributes:</p> Name Type Description <code>entry_id</code> <code>str</code> <p>Unique identifier for this audit entry</p> <code>timestamp</code> <code>datetime</code> <p>When the event occurred</p> <code>event_type</code> <code>str</code> <p>Type of event (e.g., \"inference\", \"training\", \"data_access\")</p> <code>actor</code> <code>str</code> <p>Identifier for the user, system, or agent that triggered the event</p> <code>action</code> <code>str</code> <p>Description of the action taken</p> <code>resource</code> <code>str</code> <p>The resource being accessed or modified</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional context-specific information about the event</p> <code>risk_level</code> <code>RiskLevel</code> <p>Assessed risk level of this operation</p> <code>system_id</code> <code>str</code> <p>Identifier for the AI system involved</p> <code>data_classification</code> <code>str</code> <p>Classification of data involved (e.g., \"PII\", \"PHI\", \"public\")</p> <code>user_notified</code> <code>bool</code> <p>Whether the user was notified about AI involvement</p> <code>human_oversight</code> <code>bool</code> <p>Whether human oversight was present</p> <code>error_handled</code> <code>bool</code> <p>Whether errors were handled gracefully</p> <code>documentation_ref</code> <code>Optional[str]</code> <p>Reference to related technical documentation</p> <p>Audit entry structure used by frameworks for compliance checking.</p> <p>Attributes:</p> Attribute Type Default Description <code>entry_id</code> <code>str</code> Required Unique identifier <code>timestamp</code> <code>datetime</code> Required Event time <code>event_type</code> <code>str</code> Required Type of event <code>actor</code> <code>str</code> Required Who triggered event <code>action</code> <code>str</code> Required Action description <code>resource</code> <code>str</code> <code>\"\"</code> Resource accessed <code>metadata</code> <code>Dict[str, Any]</code> <code>{}</code> Additional context <code>risk_level</code> <code>RiskLevel</code> <code>LOW</code> Risk classification <code>system_id</code> <code>str</code> <code>\"\"</code> AI system identifier <code>data_classification</code> <code>str</code> <code>\"unclassified\"</code> Data sensitivity <code>user_notified</code> <code>bool</code> <code>False</code> User knows about AI <code>human_oversight</code> <code>bool</code> <code>False</code> Human oversight present <code>error_handled</code> <code>bool</code> <code>True</code> Errors handled gracefully <code>documentation_ref</code> <code>Optional[str]</code> <code>None</code> Documentation reference"},{"location":"api/frameworks/#complianceprofile-frameworks","title":"ComplianceProfile (Frameworks)","text":"<p>Configuration profile for compliance evaluation.</p> <p>Profiles define which rules to apply, severity thresholds, and system-specific compliance requirements.</p> <p>Attributes:</p> Name Type Description <code>profile_id</code> <code>str</code> <p>Unique identifier for this profile</p> <code>name</code> <code>str</code> <p>Human-readable profile name</p> <code>description</code> <code>str</code> <p>Detailed description of the profile's purpose</p> <code>enabled_frameworks</code> <code>List[str]</code> <p>List of framework names to evaluate against</p> <code>enabled_categories</code> <code>List[str]</code> <p>Categories of rules to check (empty = all)</p> <code>min_severity</code> <code>RiskLevel</code> <p>Minimum severity level to report</p> <code>system_classification</code> <code>str</code> <p>Classification of the AI system being evaluated</p> <code>custom_rules</code> <code>List[str]</code> <p>Additional custom rule IDs to include</p> <code>excluded_rules</code> <code>List[str]</code> <p>Rule IDs to exclude from evaluation</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional profile configuration</p> <p>Configuration profile for compliance evaluation.</p> <p>Attributes:</p> Attribute Type Default Description <code>profile_id</code> <code>str</code> Required Unique identifier <code>name</code> <code>str</code> Required Profile name <code>description</code> <code>str</code> <code>\"\"</code> Profile description <code>enabled_frameworks</code> <code>List[str]</code> <code>[]</code> Frameworks to evaluate <code>enabled_categories</code> <code>List[str]</code> <code>[]</code> Categories to check <code>min_severity</code> <code>RiskLevel</code> <code>LOW</code> Minimum severity to report <code>system_classification</code> <code>str</code> <code>\"standard\"</code> System classification <code>custom_rules</code> <code>List[str]</code> <code>[]</code> Additional rule IDs <code>excluded_rules</code> <code>List[str]</code> <code>[]</code> Rules to skip <code>metadata</code> <code>Dict[str, Any]</code> <code>{}</code> Additional config"},{"location":"api/frameworks/#complianceviolation-frameworks","title":"ComplianceViolation (Frameworks)","text":"<p>Represents a single compliance violation detected during evaluation.</p> <p>Violations are the output of rule checks that identify non-compliance with regulatory requirements.</p> <p>Attributes:</p> Name Type Description <code>rule_id</code> <code>str</code> <p>ID of the rule that was violated</p> <code>rule_name</code> <code>str</code> <p>Human-readable name of the violated rule</p> <code>severity</code> <code>RiskLevel</code> <p>Severity level of the violation</p> <code>description</code> <code>str</code> <p>Detailed description of what was violated</p> <code>evidence</code> <code>str</code> <p>Specific evidence from the audit entry</p> <code>remediation</code> <code>str</code> <p>Suggested steps to remediate the violation</p> <code>entry_id</code> <code>str</code> <p>ID of the audit entry that triggered this violation</p> <code>category</code> <code>str</code> <p>Category of the violated rule</p> <code>framework</code> <code>str</code> <p>Name of the framework containing the rule</p> <p>A compliance violation detected during evaluation.</p> <p>Attributes:</p> Attribute Type Description <code>rule_id</code> <code>str</code> Violated rule ID <code>rule_name</code> <code>str</code> Rule name <code>severity</code> <code>RiskLevel</code> Violation severity <code>description</code> <code>str</code> Rule description <code>evidence</code> <code>str</code> Specific evidence <code>remediation</code> <code>str</code> How to fix <code>entry_id</code> <code>str</code> Entry that triggered <code>category</code> <code>str</code> Rule category <code>framework</code> <code>str</code> Framework name"},{"location":"api/frameworks/#compliancecheckresult-frameworks","title":"ComplianceCheckResult (Frameworks)","text":"<p>Result of a compliance check against an audit entry.</p> <p>Contains all violations found, along with summary statistics about the compliance evaluation.</p> <p>Attributes:</p> Name Type Description <code>entry_id</code> <code>str</code> <p>ID of the audit entry that was checked</p> <code>framework</code> <code>str</code> <p>Name of the framework used for evaluation</p> <code>framework_version</code> <code>str</code> <p>Version of the framework</p> <code>timestamp</code> <code>datetime</code> <p>When the check was performed</p> <code>violations</code> <code>List[ComplianceViolation]</code> <p>List of all violations found</p> <code>rules_checked</code> <code>int</code> <p>Total number of rules evaluated</p> <code>rules_passed</code> <code>int</code> <p>Number of rules that passed</p> <code>is_compliant</code> <code>bool</code> <p>Whether the entry is fully compliant (no violations)</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional check result metadata</p> <p>Result of a compliance check against an audit entry.</p> <p>Attributes:</p> Attribute Type Description <code>entry_id</code> <code>str</code> Checked entry ID <code>framework</code> <code>str</code> Framework name <code>framework_version</code> <code>str</code> Framework version <code>timestamp</code> <code>datetime</code> Check time <code>violations</code> <code>List[ComplianceViolation]</code> Violations found <code>rules_checked</code> <code>int</code> Total rules evaluated <code>rules_passed</code> <code>int</code> Rules that passed <code>is_compliant</code> <code>bool</code> No violations found <code>metadata</code> <code>Dict[str, Any]</code> Additional data"},{"location":"api/frameworks/#rotalabs_comply.frameworks.base.ComplianceCheckResult.__post_init__","title":"<code>__post_init__()</code>","text":"<p>Update is_compliant based on violations.</p>"},{"location":"api/frameworks/#eu-ai-act-framework","title":"EU AI Act Framework","text":"<p>EU AI Act compliance framework.</p> <p>Implements compliance checks based on the EU AI Act (2024) requirements for high-risk AI systems. The framework evaluates audit entries against the Act's requirements for transparency, human oversight, risk management, documentation, and security.</p> <p>The EU AI Act classifies AI systems into risk categories: - Unacceptable risk: Prohibited systems - High-risk: Systems subject to strict requirements (this framework's focus) - Limited risk: Systems with transparency obligations - Minimal risk: Most AI systems with few requirements</p> <p>This implementation focuses on high-risk system requirements as they represent the most comprehensive compliance obligations.</p> Example <p>framework = EUAIActFramework() result = await framework.check(entry, profile) if not result.is_compliant: ...     for violation in result.violations: ...         print(f\"{violation.rule_id}: {violation.description}\")</p> <p>EU AI Act (2024) compliance framework.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.eu_ai_act.EUAIActFramework.__init__","title":"<code>__init__()</code>","text":"<p>Initialize the EU AI Act framework with all defined rules.</p>"},{"location":"api/frameworks/#categories","title":"Categories","text":"Category Description <code>transparency</code> User notification requirements <code>oversight</code> Human oversight requirements <code>risk_management</code> Risk assessment and handling <code>documentation</code> Technical documentation <code>security</code> Cybersecurity measures"},{"location":"api/frameworks/#rules","title":"Rules","text":"Rule ID Name Severity Category <code>EUAI-001</code> Human Oversight Documentation HIGH oversight <code>EUAI-002</code> AI Interaction Notification HIGH transparency <code>EUAI-003</code> Risk Assessment CRITICAL risk_management <code>EUAI-004</code> Technical Documentation HIGH documentation <code>EUAI-005</code> Data Governance HIGH documentation <code>EUAI-006</code> Error Handling MEDIUM risk_management <code>EUAI-007</code> Accuracy Monitoring MEDIUM risk_management <code>EUAI-008</code> Cybersecurity Measures HIGH security"},{"location":"api/frameworks/#usage","title":"Usage","text":"<pre><code>from rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\nfrom datetime import datetime\n\nframework = EUAIActFramework()\n\nentry = AuditEntry(\n    entry_id=\"test-001\",\n    timestamp=datetime.utcnow(),\n    event_type=\"inference\",\n    actor=\"user@example.com\",\n    action=\"AI response\",\n    risk_level=RiskLevel.HIGH,\n    user_notified=True,\n    human_oversight=True,\n    metadata={\"risk_assessment_documented\": True},\n)\n\nprofile = ComplianceProfile(\n    profile_id=\"eu-ai\",\n    name=\"EU AI Compliance\",\n)\n\nresult = await framework.check(entry, profile)\n</code></pre>"},{"location":"api/frameworks/#key-requirements","title":"Key Requirements","text":"<p>High-risk operations require: - <code>human_oversight=True</code> - <code>metadata[\"risk_assessment_documented\"]=True</code></p> <p>User-facing interactions require: - <code>user_notified=True</code></p> <p>Inference events require: - <code>metadata[\"accuracy_monitored\"]=True</code></p>"},{"location":"api/frameworks/#soc2-framework","title":"SOC2 Framework","text":"<p>SOC2 Type II compliance framework.</p> <p>Implements compliance checks based on the AICPA Trust Service Criteria for SOC2 Type II reporting. This framework evaluates audit entries against the five trust service principles: Security, Availability, Processing Integrity, Confidentiality, and Privacy.</p> <p>SOC2 Type II reports assess both the design and operating effectiveness of controls over a specified period. This implementation focuses on controls relevant to AI systems and their operational characteristics.</p> <p>Trust Service Categories: - CC (Common Criteria): Security-related controls - A: Availability controls - PI: Processing Integrity controls - C: Confidentiality controls - P: Privacy controls</p> Example <p>framework = SOC2Framework() result = await framework.check(entry, profile) if not result.is_compliant: ...     for violation in result.violations: ...         print(f\"{violation.rule_id}: {violation.description}\")</p> <p>SOC2 Type II compliance framework.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.soc2.SOC2Framework.__init__","title":"<code>__init__()</code>","text":"<p>Initialize the SOC2 Type II framework with all defined rules.</p>"},{"location":"api/frameworks/#categories_1","title":"Categories","text":"Category TSC Description <code>security</code> CC Common Criteria - Security controls <code>availability</code> A System availability <code>processing_integrity</code> PI Data processing accuracy <code>confidentiality</code> C Confidential information protection <code>privacy</code> P Personal information protection"},{"location":"api/frameworks/#rules_1","title":"Rules","text":"Rule ID Name Severity Category <code>SOC2-CC6.1</code> Logical Access Controls HIGH security <code>SOC2-CC6.2</code> System Boundary Definition MEDIUM security <code>SOC2-CC6.3</code> Change Management MEDIUM security <code>SOC2-CC7.1</code> System Monitoring HIGH security <code>SOC2-CC7.2</code> Incident Response HIGH security <code>SOC2-CC8.1</code> Availability Monitoring MEDIUM availability <code>SOC2-A1.1</code> Recovery Objectives MEDIUM availability <code>SOC2-PI1.1</code> Processing Integrity MEDIUM processing_integrity <code>SOC2-C1.1</code> Confidentiality Classification HIGH confidentiality <code>SOC2-P1.1</code> Privacy Notice HIGH privacy"},{"location":"api/frameworks/#usage_1","title":"Usage","text":"<pre><code>from rotalabs_comply.frameworks.soc2 import SOC2Framework\n\nframework = SOC2Framework()\n\nentry = AuditEntry(\n    entry_id=\"soc2-001\",\n    timestamp=datetime.utcnow(),\n    event_type=\"data_access\",\n    actor=\"admin@company.com\",\n    action=\"Query database\",\n    data_classification=\"confidential\",\n    metadata={\n        \"access_controlled\": True,\n        \"monitored\": True,\n    },\n)\n\nresult = await framework.check(entry, profile)\n</code></pre>"},{"location":"api/frameworks/#key-requirements_1","title":"Key Requirements","text":"<p>Access events require: - Authenticated actor (not \"anonymous\") - <code>metadata[\"access_controlled\"]=True</code></p> <p>Change events require: - <code>metadata[\"change_approved\"]=True</code> - <code>documentation_ref</code> set</p> <p>Data events require: - <code>data_classification</code> not \"unclassified\"</p>"},{"location":"api/frameworks/#hipaa-framework","title":"HIPAA Framework","text":"<p>HIPAA compliance framework.</p> <p>Implements compliance checks based on HIPAA Security Rule technical safeguards and Privacy Rule requirements. This framework evaluates audit entries for AI systems that process Protected Health Information (PHI) or electronic PHI (ePHI).</p> <p>HIPAA requires covered entities and business associates to: - Ensure confidentiality, integrity, and availability of ePHI - Protect against anticipated threats and hazards - Protect against unauthorized uses or disclosures - Ensure workforce compliance</p> <p>This implementation focuses on technical safeguards (164.312) which are most relevant to AI system operations: - Access controls (164.312(a)) - Audit controls (164.312(b)) - Integrity controls (164.312(c)) - Authentication (164.312(d)) - Transmission security (164.312(e))</p> Example <p>framework = HIPAAFramework() result = await framework.check(entry, profile) if not result.is_compliant: ...     for violation in result.violations: ...         print(f\"{violation.rule_id}: {violation.description}\")</p> <p>HIPAA compliance framework for PHI handling.</p>"},{"location":"api/frameworks/#rotalabs_comply.frameworks.hipaa.HIPAAFramework.__init__","title":"<code>__init__()</code>","text":"<p>Initialize the HIPAA framework with all defined rules.</p>"},{"location":"api/frameworks/#categories_2","title":"Categories","text":"Category Rule Section Description <code>access_control</code> 164.312(a) System and data access <code>audit</code> 164.312(b) Audit controls <code>integrity</code> 164.312(c) Data integrity <code>authentication</code> 164.312(d) Entity authentication <code>transmission</code> 164.312(e) Transmission security <code>privacy</code> 164.502/514/530 Privacy rule"},{"location":"api/frameworks/#rules_2","title":"Rules","text":"Rule ID Name Severity Category <code>HIPAA-164.312(a)</code> Access Control CRITICAL access_control <code>HIPAA-164.312(b)</code> Audit Controls HIGH audit <code>HIPAA-164.312(c)</code> Integrity Controls HIGH integrity <code>HIPAA-164.312(d)</code> Authentication CRITICAL authentication <code>HIPAA-164.312(e)</code> Transmission Security HIGH transmission <code>HIPAA-164.502</code> Uses and Disclosures CRITICAL privacy <code>HIPAA-164.514</code> De-identification HIGH privacy <code>HIPAA-164.530</code> Administrative Requirements MEDIUM privacy"},{"location":"api/frameworks/#phi-detection","title":"PHI Detection","text":"<p>Rules only apply when <code>data_classification</code> contains:</p> <ul> <li><code>\"PHI\"</code></li> <li><code>\"ePHI\"</code></li> <li><code>\"protected_health_information\"</code></li> <li><code>\"health_data\"</code></li> <li><code>\"medical\"</code></li> <li><code>\"clinical\"</code></li> </ul>"},{"location":"api/frameworks/#usage_2","title":"Usage","text":"<pre><code>from rotalabs_comply.frameworks.hipaa import HIPAAFramework\n\nframework = HIPAAFramework()\n\n# PHI-related entry (rules apply)\nentry = AuditEntry(\n    entry_id=\"hipaa-001\",\n    timestamp=datetime.utcnow(),\n    event_type=\"inference\",\n    actor=\"doctor@hospital.com\",\n    action=\"AI diagnostic\",\n    data_classification=\"PHI\",\n    metadata={\n        \"access_controlled\": True,\n        \"encryption_enabled\": True,\n        \"authenticated\": True,\n        \"purpose_documented\": True,\n        \"minimum_necessary_applied\": True,\n    },\n)\n\nresult = await framework.check(entry, profile)\n</code></pre>"},{"location":"api/frameworks/#key-requirements_2","title":"Key Requirements","text":"<p>All PHI access requires: - Authenticated actor - <code>metadata[\"access_controlled\"]=True</code> - <code>metadata[\"encryption_enabled\"]=True</code></p> <p>High-risk PHI operations require: - <code>metadata[\"mfa_verified\"]=True</code></p> <p>PHI use requires: - <code>metadata[\"purpose_documented\"]=True</code> - <code>metadata[\"minimum_necessary_applied\"]=True</code></p>"},{"location":"api/reports/","title":"Reports Module","text":"<p>Report generation and templates for compliance reporting.</p>"},{"location":"api/reports/#reportgenerator","title":"ReportGenerator","text":"<p>Generator for compliance reports from audit data.</p> <p>ReportGenerator retrieves audit entries from storage, runs compliance checks against configured frameworks, and produces comprehensive reports.</p> <p>Attributes:</p> Name Type Description <code>storage</code> <p>Storage backend for retrieving audit entries.</p> <code>frameworks</code> <p>Dictionary mapping framework names to implementations.</p> Example <p>from rotalabs_comply.audit.storage import MemoryStorage from rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework</p> <p>storage = MemoryStorage() frameworks = { ...     \"eu_ai_act\": EUAIActFramework(), ... } generator = ReportGenerator(storage, frameworks)</p> <p>Generator for compliance reports from audit data.</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator--generate-a-report","title":"Generate a report","text":"<p>report = await generator.generate( ...     period_start=datetime(2026, 1, 1), ...     period_end=datetime(2026, 1, 31), ...     profile=profile, ...     framework=\"eu_ai_act\", ... )</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.__init__","title":"<code>__init__(audit_logger, frameworks=None)</code>","text":"<p>Initialize the report generator.</p> <p>Parameters:</p> Name Type Description Default <code>audit_logger</code> <code>StorageProtocol</code> <p>Storage backend implementing list_entries method.</p> required <code>frameworks</code> <code>Optional[Dict[FrameworkName, ComplianceFramework]]</code> <p>Optional dict mapping framework names to implementations. If not provided, compliance checks will be skipped.</p> <code>None</code> Example <p>generator = ReportGenerator(storage) generator = ReportGenerator(storage, {\"soc2\": SOC2Framework()})</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.export_html","title":"<code>export_html(report)</code>","text":"<p>Export report to HTML format.</p> <p>Creates a standalone HTML document with embedded styles, suitable for viewing in a browser or embedding in web applications.</p> <p>Parameters:</p> Name Type Description Default <code>report</code> <code>ComplianceReport</code> <p>ComplianceReport to export.</p> required <p>Returns:</p> Type Description <code>str</code> <p>HTML formatted string.</p> Example <p>html = generator.export_html(report) with open(\"report.html\", \"w\") as f: ...     f.write(html)</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.export_json","title":"<code>export_json(report)</code>","text":"<p>Export report to JSON format.</p> <p>Creates a JSON document with all report data, suitable for programmatic processing or API responses.</p> <p>Parameters:</p> Name Type Description Default <code>report</code> <code>ComplianceReport</code> <p>ComplianceReport to export.</p> required <p>Returns:</p> Type Description <code>str</code> <p>JSON formatted string (pretty-printed).</p> Example <p>json_str = generator.export_json(report) data = json.loads(json_str) print(data[\"compliance_score\"])</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.export_markdown","title":"<code>export_markdown(report)</code>","text":"<p>Export report to Markdown format.</p> <p>Creates a well-formatted Markdown document with proper headings, tables, and structure suitable for documentation or rendering.</p> <p>Parameters:</p> Name Type Description Default <code>report</code> <code>ComplianceReport</code> <p>ComplianceReport to export.</p> required <p>Returns:</p> Type Description <code>str</code> <p>Markdown formatted string.</p> Example <p>md = generator.export_markdown(report) with open(\"report.md\", \"w\") as f: ...     f.write(md)</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.generate","title":"<code>generate(period_start, period_end, profile, framework=None, format='markdown')</code>  <code>async</code>","text":"<p>Generate a comprehensive compliance report.</p> <p>Retrieves audit entries for the specified period, runs compliance checks, and generates a full report with all standard sections.</p> <p>Parameters:</p> Name Type Description Default <code>period_start</code> <code>datetime</code> <p>Start of the analysis period (inclusive).</p> required <code>period_end</code> <code>datetime</code> <p>End of the analysis period (inclusive).</p> required <code>profile</code> <code>ComplianceProfile</code> <p>ComplianceProfile defining evaluation parameters.</p> required <code>framework</code> <code>Optional[FrameworkName]</code> <p>Specific framework to report on (None = all in profile).</p> <code>None</code> <code>format</code> <code>Literal['markdown', 'json', 'html']</code> <p>Output format hint (used for template selection).</p> <code>'markdown'</code> <p>Returns:</p> Type Description <code>ComplianceReport</code> <p>ComplianceReport with all sections populated.</p> Example <p>report = await generator.generate( ...     period_start=datetime(2026, 1, 1), ...     period_end=datetime(2026, 1, 31), ...     profile=profile, ...     format=\"markdown\", ... ) print(f\"Generated: {report.title}\") print(f\"Entries: {report.total_entries}\") print(f\"Score: {report.compliance_score:.2%}\")</p>"},{"location":"api/reports/#rotalabs_comply.reports.generator.ReportGenerator.generate_executive_summary","title":"<code>generate_executive_summary(period_start, period_end, profile)</code>  <code>async</code>","text":"<p>Generate a high-level executive summary report.</p> <p>Creates a condensed report suitable for executive audiences, focusing on key metrics and critical findings without technical details.</p> <p>Parameters:</p> Name Type Description Default <code>period_start</code> <code>datetime</code> <p>Start of the analysis period.</p> required <code>period_end</code> <code>datetime</code> <p>End of the analysis period.</p> required <code>profile</code> <code>ComplianceProfile</code> <p>ComplianceProfile defining evaluation parameters.</p> required <p>Returns:</p> Type Description <code>ComplianceReport</code> <p>ComplianceReport with executive-focused sections.</p> Example <p>report = await generator.generate_executive_summary( ...     period_start=datetime(2026, 1, 1), ...     period_end=datetime(2026, 3, 31), ...     profile=profile, ... ) print(f\"Status: {report.status}\") print(f\"Score: {report.compliance_score:.2%}\")</p>"},{"location":"api/reports/#constructor","title":"Constructor","text":"<pre><code>ReportGenerator(\n    audit_logger: StorageProtocol,\n    frameworks: Optional[Dict[str, ComplianceFramework]] = None,\n)\n</code></pre> <p>Parameters:</p> Parameter Type Description <code>audit_logger</code> <code>StorageProtocol</code> Storage backend with <code>list_entries</code> method <code>frameworks</code> <code>Optional[Dict]</code> Framework name -&gt; implementation mapping <p>Example:</p> <pre><code>from rotalabs_comply import ReportGenerator\nfrom rotalabs_comply.audit import MemoryStorage\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.soc2 import SOC2Framework\n\nstorage = MemoryStorage()\ngenerator = ReportGenerator(\n    audit_logger=storage,\n    frameworks={\n        \"eu_ai_act\": EUAIActFramework(),\n        \"soc2\": SOC2Framework(),\n    },\n)\n</code></pre>"},{"location":"api/reports/#methods","title":"Methods","text":""},{"location":"api/reports/#generate","title":"generate","text":"<pre><code>async def generate(\n    period_start: datetime,\n    period_end: datetime,\n    profile: ComplianceProfile,\n    framework: Optional[str] = None,\n    format: Literal[\"markdown\", \"json\", \"html\"] = \"markdown\",\n) -&gt; ComplianceReport\n</code></pre> <p>Generate a comprehensive compliance report.</p> <p>Parameters:</p> Parameter Type Default Description <code>period_start</code> <code>datetime</code> Required Analysis start (inclusive) <code>period_end</code> <code>datetime</code> Required Analysis end (inclusive) <code>profile</code> <code>ComplianceProfile</code> Required Evaluation configuration <code>framework</code> <code>Optional[str]</code> <code>None</code> Specific framework (None=all) <code>format</code> <code>str</code> <code>\"markdown\"</code> Output format hint <p>Returns: <code>ComplianceReport</code></p> <p>Example:</p> <pre><code>from datetime import datetime, timedelta\n\nend = datetime.utcnow()\nstart = end - timedelta(days=30)\n\nreport = await generator.generate(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n    framework=\"eu_ai_act\",\n)\n</code></pre>"},{"location":"api/reports/#generate_executive_summary","title":"generate_executive_summary","text":"<pre><code>async def generate_executive_summary(\n    period_start: datetime,\n    period_end: datetime,\n    profile: ComplianceProfile,\n) -&gt; ComplianceReport\n</code></pre> <p>Generate a condensed executive summary report.</p> <p>Example:</p> <pre><code>report = await generator.generate_executive_summary(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n)\n</code></pre>"},{"location":"api/reports/#export_markdown","title":"export_markdown","text":"<pre><code>def export_markdown(report: ComplianceReport) -&gt; str\n</code></pre> <p>Export report to Markdown format.</p> <p>Example:</p> <pre><code>markdown = generator.export_markdown(report)\nwith open(\"report.md\", \"w\") as f:\n    f.write(markdown)\n</code></pre>"},{"location":"api/reports/#export_json","title":"export_json","text":"<pre><code>def export_json(report: ComplianceReport) -&gt; str\n</code></pre> <p>Export report to JSON format (pretty-printed).</p> <p>Example:</p> <pre><code>json_str = generator.export_json(report)\n</code></pre>"},{"location":"api/reports/#export_html","title":"export_html","text":"<pre><code>def export_html(report: ComplianceReport) -&gt; str\n</code></pre> <p>Export report to standalone HTML format.</p> <p>Example:</p> <pre><code>html = generator.export_html(report)\nwith open(\"report.html\", \"w\") as f:\n    f.write(html)\n</code></pre>"},{"location":"api/reports/#compliancereport","title":"ComplianceReport","text":"<p>A complete compliance report with all sections and metadata.</p> <p>ComplianceReport contains the full results of a compliance evaluation, including all sections, summary statistics, and compliance scoring.</p> <p>Attributes:</p> Name Type Description <code>id</code> <code>str</code> <p>Unique identifier for this report.</p> <code>title</code> <code>str</code> <p>Report title.</p> <code>framework</code> <code>Optional[FrameworkName]</code> <p>Framework evaluated (None for multi-framework reports).</p> <code>period_start</code> <code>datetime</code> <p>Start of the analysis period.</p> <code>period_end</code> <code>datetime</code> <p>End of the analysis period.</p> <code>generated_at</code> <code>datetime</code> <p>When the report was generated.</p> <code>profile</code> <code>ComplianceProfile</code> <p>ComplianceProfile used for evaluation.</p> <code>summary</code> <code>Dict[str, Any]</code> <p>Summary statistics dictionary.</p> <code>sections</code> <code>List[ReportSection]</code> <p>List of report sections.</p> <code>total_entries</code> <code>int</code> <p>Total audit entries analyzed.</p> <code>violations_count</code> <code>int</code> <p>Number of violations found.</p> <code>compliance_score</code> <code>float</code> <p>Overall compliance score (0.0 to 1.0).</p> <code>status</code> <code>Literal['compliant', 'non_compliant', 'needs_review']</code> <p>Overall compliance status.</p> Example <p>report = ComplianceReport( ...     id=\"rpt-001\", ...     title=\"Q1 2026 Compliance Report\", ...     framework=None,  # Multi-framework ...     period_start=datetime(2026, 1, 1), ...     period_end=datetime(2026, 3, 31), ...     generated_at=datetime.utcnow(), ...     profile=profile, ...     summary={\"total\": 10000, \"violations\": 5}, ...     sections=[executive_summary, risk_assessment], ...     total_entries=10000, ...     violations_count=5, ...     compliance_score=0.9995, ...     status=\"compliant\", ... ) print(f\"Compliance: {report.compliance_score:.2%}\") Compliance: 99.95%</p> <p>A complete compliance report with all sections and metadata.</p> <p>Attributes:</p> Attribute Type Description <code>id</code> <code>str</code> Unique report identifier <code>title</code> <code>str</code> Report title <code>framework</code> <code>Optional[str]</code> Framework evaluated (None=multiple) <code>period_start</code> <code>datetime</code> Analysis period start <code>period_end</code> <code>datetime</code> Analysis period end <code>generated_at</code> <code>datetime</code> When report was generated <code>profile</code> <code>ComplianceProfile</code> Profile used for evaluation <code>summary</code> <code>Dict[str, Any]</code> Summary statistics <code>sections</code> <code>List[ReportSection]</code> Report sections <code>total_entries</code> <code>int</code> Entries analyzed <code>violations_count</code> <code>int</code> Violations found <code>compliance_score</code> <code>float</code> Score 0.0-1.0 <code>status</code> <code>str</code> \"compliant\", \"non_compliant\", \"needs_review\" <p>Methods:</p> Method Returns Description <code>to_dict()</code> <code>Dict[str, Any]</code> Convert to dictionary"},{"location":"api/reports/#rotalabs_comply.reports.generator.ComplianceReport.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert report to dictionary for serialization.</p> <p>Returns:</p> Type Description <code>Dict[str, Any]</code> <p>Dict containing all report data.</p> Example <p>data = report.to_dict() print(data[\"status\"]) 'compliant'</p>"},{"location":"api/reports/#templates","title":"Templates","text":""},{"location":"api/reports/#reportsection","title":"ReportSection","text":"<p>A section within a compliance report.</p> <p>Report sections can contain nested subsections to create hierarchical report structures. Each section has a title, content, and optional metadata for additional context.</p> <p>Attributes:</p> Name Type Description <code>title</code> <code>str</code> <p>Section heading/title.</p> <code>content</code> <code>str</code> <p>Main content of the section (text, markdown, etc.).</p> <code>subsections</code> <code>List['ReportSection']</code> <p>Nested sections within this section.</p> <code>metadata</code> <code>Dict[str, Any]</code> <p>Additional data about the section (charts, tables, etc.).</p> Example <p>section = ReportSection( ...     title=\"Risk Assessment\", ...     content=\"This section analyzes identified compliance risks.\", ...     subsections=[ ...         ReportSection( ...             title=\"Critical Risks\", ...             content=\"No critical risks identified.\", ...         ), ...         ReportSection( ...             title=\"High Risks\", ...             content=\"2 high-risk violations require attention.\", ...         ), ...     ], ...     metadata={\"risk_count\": 2, \"max_severity\": \"high\"}, ... )</p>"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportSection--access-nested-sections","title":"Access nested sections","text":"<p>for sub in section.subsections: ...     print(f\"- {sub.title}\") - Critical Risks - High Risks</p>"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportSection.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert section to dictionary for serialization.</p> <p>Returns:</p> Type Description <code>Dict[str, Any]</code> <p>Dict containing all section data including nested subsections.</p> Example <p>section = ReportSection(title=\"Test\", content=\"Content\") data = section.to_dict() print(data[\"title\"]) 'Test'</p>"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportSection.to_markdown","title":"<code>to_markdown(level=2)</code>","text":"<p>Render section as markdown with appropriate heading levels.</p> <p>Parameters:</p> Name Type Description Default <code>level</code> <code>int</code> <p>Heading level (default 2 = ##). Subsections use level + 1.</p> <code>2</code> <p>Returns:</p> Type Description <code>str</code> <p>Markdown formatted string of the section.</p> Example <p>section = ReportSection(title=\"Summary\", content=\"All good.\") print(section.to_markdown())</p>"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportSection.to_markdown--summary","title":"Summary","text":"<p> All good. <p>A section within a compliance report.</p> <p>Attributes:</p> Attribute Type Description <code>title</code> <code>str</code> Section heading <code>content</code> <code>str</code> Main content (text/markdown) <code>subsections</code> <code>List[ReportSection]</code> Nested sections <code>metadata</code> <code>Dict[str, Any]</code> Additional data <p>Methods:</p> Method Returns Description <code>to_dict()</code> <code>Dict[str, Any]</code> Convert to dictionary <code>to_markdown(level=2)</code> <code>str</code> Render as markdown <p>Example:</p> <pre><code>from rotalabs_comply.reports.templates import ReportSection\n\nsection = ReportSection(\n    title=\"Risk Assessment\",\n    content=\"Analysis of identified risks...\",\n    subsections=[\n        ReportSection(title=\"Critical Risks\", content=\"None found.\"),\n        ReportSection(title=\"High Risks\", content=\"2 issues identified.\"),\n    ],\n    metadata={\"risk_count\": 2},\n)\n\nprint(section.to_markdown())\n</code></pre>"},{"location":"api/reports/#reporttemplate","title":"ReportTemplate","text":"<p>Template defining the structure and format of a compliance report.</p> <p>Templates specify which framework the report covers, its title, which sections to include, and the output format.</p> <p>Attributes:</p> Name Type Description <code>framework</code> <code>FrameworkType</code> <p>The compliance framework this template is for.</p> <code>title</code> <code>str</code> <p>Default title for reports using this template.</p> <code>sections</code> <code>List[str]</code> <p>List of section names to include in the report.</p> <code>format</code> <code>Literal['markdown', 'json', 'html']</code> <p>Output format for the report (markdown, json, or html).</p> Example <p>template = ReportTemplate( ...     framework=\"eu_ai_act\", ...     title=\"EU AI Act Compliance Report\", ...     sections=[ ...         \"executive_summary\", ...         \"risk_assessment\", ...         \"compliance_matrix\", ...         \"recommendations\", ...     ], ...     format=\"markdown\", ... )</p> <p>Template defining report structure and format.</p> <p>Attributes:</p> Attribute Type Description <code>framework</code> <code>str</code> Target framework <code>title</code> <code>str</code> Default title <code>sections</code> <code>List[str]</code> Section names to include <code>format</code> <code>str</code> Output format"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportTemplate--check-what-sections-will-be-included","title":"Check what sections will be included","text":"<p>\"risk_assessment\" in template.sections True</p>"},{"location":"api/reports/#rotalabs_comply.reports.templates.ReportTemplate.to_dict","title":"<code>to_dict()</code>","text":"<p>Convert template to dictionary.</p> <p>Returns:</p> Type Description <code>Dict[str, Any]</code> <p>Dict containing template configuration.</p>"},{"location":"api/reports/#pre-defined-templates","title":"Pre-defined Templates","text":""},{"location":"api/reports/#eu_ai_act_template","title":"EU_AI_ACT_TEMPLATE","text":"<p>Template for EU AI Act compliance reports.</p> <p>Includes sections required for demonstrating compliance with the European Union's Artificial Intelligence Act, focusing on risk classification, transparency, and human oversight requirements.</p> Example <p>from rotalabs_comply.reports.templates import EU_AI_ACT_TEMPLATE print(EU_AI_ACT_TEMPLATE.title) 'EU AI Act Compliance Report'</p> <p>Template for EU AI Act compliance reports.</p> <p>Sections: - executive_summary - risk_classification - risk_assessment - transparency_obligations - human_oversight - compliance_matrix - data_governance - technical_documentation - recommendations - audit_summary</p>"},{"location":"api/reports/#soc2_template","title":"SOC2_TEMPLATE","text":"<p>Template for SOC2 Type II compliance reports.</p> <p>Covers the five Trust Service Criteria: Security, Availability, Processing Integrity, Confidentiality, and Privacy.</p> Example <p>from rotalabs_comply.reports.templates import SOC2_TEMPLATE \"security_controls\" in SOC2_TEMPLATE.sections True</p> <p>Template for SOC2 Type II compliance reports.</p> <p>Sections: - executive_summary - system_overview - risk_assessment - security_controls - availability_controls - processing_integrity - confidentiality_controls - privacy_controls - compliance_matrix - recommendations - audit_summary</p>"},{"location":"api/reports/#hipaa_template","title":"HIPAA_TEMPLATE","text":"<p>Template for HIPAA compliance reports.</p> <p>Covers the Security Rule requirements including Administrative, Physical, and Technical Safeguards for Protected Health Information (PHI).</p> Example <p>from rotalabs_comply.reports.templates import HIPAA_TEMPLATE \"phi_handling\" in HIPAA_TEMPLATE.sections True</p> <p>Template for HIPAA compliance reports.</p> <p>Sections: - executive_summary - risk_assessment - administrative_safeguards - physical_safeguards - technical_safeguards - breach_notification - phi_handling - compliance_matrix - recommendations - audit_summary</p>"},{"location":"api/reports/#executive_summary_template","title":"EXECUTIVE_SUMMARY_TEMPLATE","text":"<p>Template for high-level executive summary reports.</p> <p>Designed for executive audiences, focusing on key metrics, critical findings, and high-priority recommendations without technical details.</p> Example <p>from rotalabs_comply.reports.templates import EXECUTIVE_SUMMARY_TEMPLATE len(EXECUTIVE_SUMMARY_TEMPLATE.sections) 5</p> <p>Template for executive summary reports.</p> <p>Sections: - executive_summary - key_metrics - risk_assessment - critical_findings - recommendations</p>"},{"location":"api/reports/#section-generators","title":"Section Generators","text":""},{"location":"api/reports/#generate_executive_summary_1","title":"generate_executive_summary","text":"<pre><code>def generate_executive_summary(stats: Dict[str, Any]) -&gt; ReportSection\n</code></pre> <p>Generate executive summary from statistics.</p> <p>Expected stats keys: - <code>total_entries</code>: int - <code>violations_count</code>: int - <code>compliance_rate</code>: float (0-100) - <code>critical_violations</code>: int - <code>high_violations</code>: int - <code>period_start</code>: str - <code>period_end</code>: str - <code>frameworks</code>: List[str]</p> <p>Example:</p> <pre><code>from rotalabs_comply.reports.templates import generate_executive_summary\n\nstats = {\n    \"total_entries\": 10000,\n    \"violations_count\": 15,\n    \"compliance_rate\": 99.85,\n    \"critical_violations\": 0,\n    \"high_violations\": 2,\n    \"period_start\": \"2026-01-01\",\n    \"period_end\": \"2026-01-31\",\n    \"frameworks\": [\"EU AI Act\", \"SOC2\"],\n}\n\nsection = generate_executive_summary(stats)\nprint(section.metadata[\"status\"])  # \"NEEDS REVIEW\"\n</code></pre>"},{"location":"api/reports/#generate_risk_assessment","title":"generate_risk_assessment","text":"<pre><code>def generate_risk_assessment(violations: Sequence[ComplianceViolation]) -&gt; ReportSection\n</code></pre> <p>Generate risk assessment from violations.</p> <p>Returns section with metadata: - <code>overall_risk</code>: str - <code>severity_counts</code>: Dict[str, int] - <code>category_counts</code>: Dict[str, int] - <code>violation_count</code>: int</p>"},{"location":"api/reports/#generate_compliance_matrix","title":"generate_compliance_matrix","text":"<pre><code>def generate_compliance_matrix(results: Sequence[ComplianceCheckResult]) -&gt; ReportSection\n</code></pre> <p>Generate compliance matrix from check results.</p> <p>Returns section with metadata: - <code>frameworks</code>: List[str] - <code>total_checks</code>: int - <code>total_passed</code>: int - <code>total_violations</code>: int - <code>compliance_rate</code>: float</p>"},{"location":"api/reports/#generate_recommendations","title":"generate_recommendations","text":"<pre><code>def generate_recommendations(violations: Sequence[ComplianceViolation]) -&gt; ReportSection\n</code></pre> <p>Generate prioritized recommendations from violations.</p> <p>Returns section with metadata: - <code>recommendation_count</code>: int - <code>immediate_count</code>: int - <code>short_term_count</code>: int - <code>long_term_count</code>: int</p>"},{"location":"api/reports/#generate_metrics_summary","title":"generate_metrics_summary","text":"<pre><code>def generate_metrics_summary(entries: Sequence[Any]) -&gt; ReportSection\n</code></pre> <p>Generate metrics summary from audit entries.</p> <p>Returns section with metadata: - <code>entry_count</code>: int - <code>safety_rate</code>: float - <code>avg_latency</code>: float - <code>p50_latency</code>: float - <code>p95_latency</code>: float - <code>p99_latency</code>: float</p>"},{"location":"api/reports/#generate_audit_summary","title":"generate_audit_summary","text":"<pre><code>def generate_audit_summary(entries: Sequence[Any], period: str) -&gt; ReportSection\n</code></pre> <p>Generate audit summary for a period.</p> <p>Returns section with metadata: - <code>period</code>: str - <code>entry_count</code>: int - <code>days_active</code>: int - <code>avg_daily</code>: float - <code>peak_daily</code>: int</p>"},{"location":"api/utils/","title":"Utilities Module","text":"<p>Helper functions for date formatting, statistics calculation, and JSON serialization.</p>"},{"location":"api/utils/#period-formatting","title":"Period Formatting","text":""},{"location":"api/utils/#format_period","title":"format_period","text":"<pre><code>def format_period(start: datetime, end: datetime) -&gt; str\n</code></pre> <p>Format a date range as a human-readable period string.</p> <p>Automatically detects the most appropriate format based on the date range.</p> <p>Parameters:</p> Parameter Type Description <code>start</code> <code>datetime</code> Start of period <code>end</code> <code>datetime</code> End of period <p>Returns: Formatted period string</p> <p>Examples:</p> <pre><code>from datetime import datetime\nfrom rotalabs_comply.utils import format_period\n\n# Quarter\nformat_period(datetime(2026, 1, 1), datetime(2026, 3, 31))\n# Returns: '2026-Q1'\n\n# Month\nformat_period(datetime(2026, 1, 1), datetime(2026, 1, 31))\n# Returns: 'Jan 2026'\n\n# Year\nformat_period(datetime(2026, 1, 1), datetime(2026, 12, 31))\n# Returns: '2026'\n\n# Date range\nformat_period(datetime(2026, 1, 15), datetime(2026, 2, 20))\n# Returns: '2026-01-15 to 2026-02-20'\n</code></pre>"},{"location":"api/utils/#parse_period","title":"parse_period","text":"<pre><code>def parse_period(period: str) -&gt; Tuple[datetime, datetime]\n</code></pre> <p>Parse a period string back to start and end datetimes.</p> <p>Parameters:</p> Parameter Type Description <code>period</code> <code>str</code> Period string to parse <p>Returns: Tuple of (start_datetime, end_datetime)</p> <p>Raises: <code>ValueError</code> if the period string cannot be parsed</p> <p>Supported formats: - <code>YYYY-Q#</code> (quarter) - <code>YYYY</code> (year) - <code>Mon YYYY</code> or <code>Month YYYY</code> (month) - <code>YYYY-MM-DD to YYYY-MM-DD</code> (date range) - ISO date format</p> <p>Examples:</p> <pre><code>from rotalabs_comply.utils import parse_period\n\n# Quarter\nstart, end = parse_period(\"2026-Q1\")\n# start: datetime(2026, 1, 1, 0, 0)\n# end: datetime(2026, 3, 31, 23, 59, 59)\n\n# Month\nstart, end = parse_period(\"Jan 2026\")\n# start: datetime(2026, 1, 1, 0, 0)\n# end: datetime(2026, 1, 31, 23, 59, 59)\n\n# Year\nstart, end = parse_period(\"2026\")\n# start: datetime(2026, 1, 1, 0, 0)\n# end: datetime(2026, 12, 31, 23, 59, 59)\n\n# Date range\nstart, end = parse_period(\"2026-01-15 to 2026-02-20\")\n# start: datetime(2026, 1, 15, 0, 0)\n# end: datetime(2026, 2, 20, 23, 59, 59)\n</code></pre>"},{"location":"api/utils/#statistics","title":"Statistics","text":""},{"location":"api/utils/#calculate_statistics","title":"calculate_statistics","text":"<pre><code>def calculate_statistics(entries: Sequence[Any]) -&gt; Dict[str, Any]\n</code></pre> <p>Calculate basic statistics from audit entries.</p> <p>Parameters:</p> Parameter Type Description <code>entries</code> <code>Sequence[Any]</code> List of audit entries (dict or object) <p>Expected entry attributes: - <code>timestamp</code> - <code>safety_passed</code> - <code>latency_ms</code> - <code>provider</code> - <code>model</code> - <code>detectors_triggered</code></p> <p>Returns:</p> Key Type Description <code>total_entries</code> <code>int</code> Total count <code>safety_passed</code> <code>int</code> Entries passing safety <code>safety_failed</code> <code>int</code> Entries failing safety <code>safety_rate</code> <code>float</code> Pass percentage (0-100) <code>avg_latency_ms</code> <code>float</code> Average latency <code>min_latency_ms</code> <code>float</code> Minimum latency <code>max_latency_ms</code> <code>float</code> Maximum latency <code>providers</code> <code>Dict[str, int]</code> Provider counts <code>models</code> <code>Dict[str, int]</code> Model counts <code>detectors</code> <code>Dict[str, int]</code> Detector trigger counts <p>Example:</p> <pre><code>from rotalabs_comply.utils import calculate_statistics\n\nentries = [\n    {\"safety_passed\": True, \"latency_ms\": 100.0, \"provider\": \"openai\"},\n    {\"safety_passed\": True, \"latency_ms\": 150.0, \"provider\": \"openai\"},\n    {\"safety_passed\": False, \"latency_ms\": 200.0, \"provider\": \"anthropic\"},\n]\n\nstats = calculate_statistics(entries)\nprint(stats[\"total_entries\"])  # 3\nprint(stats[\"safety_rate\"])    # 66.67\nprint(stats[\"providers\"])      # {\"openai\": 2, \"anthropic\": 1}\n</code></pre>"},{"location":"api/utils/#group_by_date","title":"group_by_date","text":"<pre><code>def group_by_date(\n    entries: Sequence[Any],\n    granularity: Literal[\"day\", \"week\", \"month\", \"quarter\", \"year\"] = \"day\",\n) -&gt; Dict[str, List[Any]]\n</code></pre> <p>Group audit entries by date with configurable granularity.</p> <p>Parameters:</p> Parameter Type Default Description <code>entries</code> <code>Sequence[Any]</code> Required Entries with timestamp <code>granularity</code> <code>str</code> <code>\"day\"</code> Time granularity <p>Granularity options:</p> Value Key Format Example <code>\"day\"</code> <code>YYYY-MM-DD</code> <code>2026-01-15</code> <code>\"week\"</code> <code>YYYY-WNN</code> <code>2026-W03</code> <code>\"month\"</code> <code>YYYY-MM</code> <code>2026-01</code> <code>\"quarter\"</code> <code>YYYY-Q#</code> <code>2026-Q1</code> <code>\"year\"</code> <code>YYYY</code> <code>2026</code> <p>Returns: Dictionary mapping period keys to lists of entries (sorted by key)</p> <p>Example:</p> <pre><code>from rotalabs_comply.utils import group_by_date\n\nentries = [\n    {\"timestamp\": \"2026-01-15T10:00:00\"},\n    {\"timestamp\": \"2026-01-15T14:00:00\"},\n    {\"timestamp\": \"2026-01-16T09:00:00\"},\n]\n\n# By day\ngrouped = group_by_date(entries, granularity=\"day\")\n# {'2026-01-15': [entry1, entry2], '2026-01-16': [entry3]}\n\n# By month\ngrouped = group_by_date(entries, granularity=\"month\")\n# {'2026-01': [entry1, entry2, entry3]}\n</code></pre>"},{"location":"api/utils/#severity_weight","title":"severity_weight","text":"<pre><code>def severity_weight(severity: Union[str, RiskLevel]) -&gt; int\n</code></pre> <p>Convert a severity level to a numeric weight for scoring.</p> <p>Parameters:</p> Parameter Type Description <code>severity</code> <code>Union[str, RiskLevel]</code> Severity level <p>Returns: Numeric weight (1-10)</p> <p>Weight mapping:</p> Severity Weight <code>critical</code> 10 <code>high</code> 5 <code>medium</code> 2 <code>low</code> 1 <code>info</code> 1 <p>Example:</p> <pre><code>from rotalabs_comply.utils import severity_weight\nfrom rotalabs_comply.frameworks.base import RiskLevel\n\nseverity_weight(\"critical\")        # 10\nseverity_weight(\"high\")            # 5\nseverity_weight(RiskLevel.MEDIUM)  # 2\n</code></pre>"},{"location":"api/utils/#json-serialization","title":"JSON Serialization","text":""},{"location":"api/utils/#json_serializer","title":"json_serializer","text":"<pre><code>def json_serializer(obj: Any) -&gt; Any\n</code></pre> <p>Custom JSON serializer for compliance-specific types.</p> <p>Handles: - <code>datetime</code> -&gt; ISO format string - <code>Enum</code> -&gt; <code>.value</code> - Dataclasses -&gt; dict via <code>asdict()</code> - Pydantic models -&gt; <code>.model_dump()</code> or <code>.dict()</code> - Objects with <code>to_dict()</code> method - Objects with <code>__dict__</code> - <code>bytes</code> -&gt; UTF-8 decoded string - <code>set</code> -&gt; list - <code>timedelta</code> -&gt; total seconds</p> <p>Raises: <code>TypeError</code> if object cannot be serialized</p> <p>Example:</p> <pre><code>import json\nfrom datetime import datetime\nfrom rotalabs_comply.utils import json_serializer\nfrom rotalabs_comply.frameworks.base import RiskLevel\n\ndata = {\n    \"timestamp\": datetime(2026, 1, 15, 10, 30),\n    \"status\": RiskLevel.HIGH,\n}\n\njson.dumps(data, default=json_serializer)\n# '{\"timestamp\": \"2026-01-15T10:30:00\", \"status\": \"high\"}'\n</code></pre>"},{"location":"api/utils/#dump_json","title":"dump_json","text":"<pre><code>def dump_json(obj: Any, **kwargs) -&gt; str\n</code></pre> <p>Serialize object to JSON string with compliance type support.</p> <p>Convenience wrapper around <code>json.dumps</code> with <code>json_serializer</code>.</p> <p>Parameters:</p> Parameter Type Description <code>obj</code> <code>Any</code> Object to serialize <code>**kwargs</code> Arguments passed to <code>json.dumps</code> <p>Example:</p> <pre><code>from datetime import datetime\nfrom rotalabs_comply.utils import dump_json\n\ndata = {\"created\": datetime(2026, 1, 15)}\nprint(dump_json(data))\n# {\"created\": \"2026-01-15T00:00:00\"}\n\nprint(dump_json(data, indent=2))\n# {\n#   \"created\": \"2026-01-15T00:00:00\"\n# }\n</code></pre>"},{"location":"api/utils/#load_json","title":"load_json","text":"<pre><code>def load_json(data: str) -&gt; Any\n</code></pre> <p>Parse JSON string with datetime restoration.</p> <p>Automatically converts ISO format strings back to datetime objects.</p> <p>Parameters:</p> Parameter Type Description <code>data</code> <code>str</code> JSON string to parse <p>Returns: Parsed Python object with datetimes restored</p> <p>Example:</p> <pre><code>from rotalabs_comply.utils import load_json\n\ndata = '{\"timestamp\": \"2026-01-15T10:30:00\"}'\nobj = load_json(data)\nprint(type(obj[\"timestamp\"]))\n# &lt;class 'datetime.datetime'&gt;\n</code></pre>"},{"location":"api/utils/#usage-examples","title":"Usage Examples","text":""},{"location":"api/utils/#complete-statistics-pipeline","title":"Complete Statistics Pipeline","text":"<pre><code>from datetime import datetime, timedelta\nfrom rotalabs_comply.utils import (\n    format_period,\n    calculate_statistics,\n    group_by_date,\n    dump_json,\n)\n\n# Sample entries\nentries = [...]\n\n# Calculate overall statistics\nstats = calculate_statistics(entries)\nprint(f\"Total: {stats['total_entries']}\")\nprint(f\"Safety Rate: {stats['safety_rate']}%\")\n\n# Group by time\ndaily = group_by_date(entries, granularity=\"day\")\nweekly = group_by_date(entries, granularity=\"week\")\n\n# Analyze trends\nfor period, period_entries in daily.items():\n    period_stats = calculate_statistics(period_entries)\n    print(f\"{period}: {period_stats['total_entries']} entries\")\n\n# Export to JSON\nreport = {\n    \"period\": format_period(\n        datetime(2026, 1, 1),\n        datetime(2026, 3, 31)\n    ),\n    \"statistics\": stats,\n    \"daily_breakdown\": {\n        period: calculate_statistics(entries)\n        for period, entries in daily.items()\n    },\n}\n\njson_output = dump_json(report, indent=2)\n</code></pre>"},{"location":"api/utils/#period-based-reporting","title":"Period-Based Reporting","text":"<pre><code>from rotalabs_comply.utils import format_period, parse_period\n\n# Format for display\nperiod_str = format_period(start, end)\nprint(f\"Reporting Period: {period_str}\")\n\n# Parse from user input\nuser_input = \"2026-Q1\"\nstart, end = parse_period(user_input)\n\n# Generate report for parsed period\nreport = await generator.generate(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n)\n</code></pre>"},{"location":"tutorials/audit-logging/","title":"Audit Logging Tutorial","text":"<p>This tutorial walks through setting up comprehensive audit logging for AI systems, including encryption, storage backends, and retention management.</p>"},{"location":"tutorials/audit-logging/#overview","title":"Overview","text":"<p>Audit logging is the foundation of AI compliance. It captures interactions with AI systems in a way that supports:</p> <ul> <li>Accountability -- Track who did what, when, and why</li> <li>Verification -- Prove compliance through documented evidence</li> <li>Investigation -- Analyze incidents and patterns</li> <li>Reporting -- Generate compliance reports from audit data</li> </ul>"},{"location":"tutorials/audit-logging/#basic-audit-logging","title":"Basic Audit Logging","text":""},{"location":"tutorials/audit-logging/#simple-file-based-logging","title":"Simple File-Based Logging","text":"<p>The simplest setup uses file storage with hash-only mode (default):</p> <pre><code>import asyncio\nfrom rotalabs_comply import AuditLogger\n\nasync def main():\n    # Create logger with file storage\n    logger = AuditLogger(\"/var/log/ai-audit\")\n\n    # Log an AI interaction\n    entry_id = await logger.log(\n        input=\"What is the weather today?\",\n        output=\"I don't have access to real-time weather data.\",\n        provider=\"openai\",\n        model=\"gpt-4\",\n        safety_passed=True,\n        latency_ms=150.0,\n    )\n\n    print(f\"Logged entry: {entry_id}\")\n\nasyncio.run(main())\n</code></pre> <p>This creates JSONL files in <code>/var/log/ai-audit/</code> named by date (e.g., <code>audit_20260129.jsonl</code>).</p>"},{"location":"tutorials/audit-logging/#understanding-hash-only-mode","title":"Understanding Hash-Only Mode","text":"<p>By default, only SHA-256 hashes of content are stored:</p> <pre><code># What gets stored in hash-only mode\n{\n    \"id\": \"abc-123-def\",\n    \"timestamp\": \"2026-01-29T10:30:00\",\n    \"input_hash\": \"a0c299...\",  # SHA-256 of input\n    \"output_hash\": \"b1d388...\",  # SHA-256 of output\n    \"input_content\": null,       # Not stored\n    \"output_content\": null,      # Not stored\n    \"provider\": \"openai\",\n    \"model\": \"gpt-4\",\n    \"safety_passed\": true,\n    ...\n}\n</code></pre> <p>Benefits: - No sensitive data stored - Content can be verified later by comparing hashes - Compliant with data minimization principles</p>"},{"location":"tutorials/audit-logging/#encrypted-audit-logging","title":"Encrypted Audit Logging","text":"<p>When you need full audit trails but want to protect content:</p>"},{"location":"tutorials/audit-logging/#setting-up-encryption","title":"Setting Up Encryption","text":"<pre><code>import asyncio\nfrom rotalabs_comply import AuditLogger, EncryptionManager\n\nasync def main():\n    # Create encryption manager (generates key automatically)\n    encryption = EncryptionManager()\n\n    # IMPORTANT: Save the key securely!\n    key = encryption.get_key()\n    print(f\"Save this key: {key.decode()}\")\n\n    # Create logger with encryption\n    logger = AuditLogger(\n        storage=\"/var/log/ai-audit\",\n        encryption=encryption,\n        store_content=True,  # Enable content storage\n    )\n\n    # Log entries (content will be encrypted)\n    entry_id = await logger.log(\n        input=\"Tell me about patient records\",\n        output=\"Patient records are confidential...\",\n        provider=\"anthropic\",\n        model=\"claude-3-opus\",\n        safety_passed=True,\n        latency_ms=200.0,\n    )\n\n    # Later, retrieve and decrypt\n    entry = await logger.get_entry(entry_id)\n    if entry and entry.input_content:\n        original_input = logger.decrypt_content(entry.input_content)\n        print(f\"Original: {original_input}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/audit-logging/#key-management-best-practices","title":"Key Management Best Practices","text":"<pre><code>import os\nfrom rotalabs_comply import EncryptionManager\n\n# Option 1: Generate and save to environment\nencryption = EncryptionManager()\nos.environ[\"AUDIT_ENCRYPTION_KEY\"] = encryption.get_key().decode()\n\n# Option 2: Load from environment\nkey = os.environ.get(\"AUDIT_ENCRYPTION_KEY\")\nif key:\n    encryption = EncryptionManager(key.encode())\nelse:\n    raise ValueError(\"Encryption key not configured\")\n\n# Option 3: Load from AWS Secrets Manager\nimport boto3\n\ndef get_encryption_key():\n    client = boto3.client(\"secretsmanager\")\n    response = client.get_secret_value(SecretId=\"audit-encryption-key\")\n    return response[\"SecretString\"].encode()\n\nencryption = EncryptionManager(get_encryption_key())\n</code></pre> <p>Never Commit Keys</p> <p>Never commit encryption keys to version control. Use environment variables, secrets managers, or secure key vaults.</p>"},{"location":"tutorials/audit-logging/#storage-backends","title":"Storage Backends","text":""},{"location":"tutorials/audit-logging/#file-storage","title":"File Storage","text":"<p>Local JSONL files with automatic rotation:</p> <pre><code>from rotalabs_comply import AuditLogger\nfrom rotalabs_comply.audit import FileStorage\n\n# Using path string (FileStorage created automatically)\nlogger = AuditLogger(\"/var/log/ai-audit\")\n\n# Or explicit FileStorage with custom rotation\nstorage = FileStorage(\n    path=\"/var/log/ai-audit\",\n    rotation_size_mb=50,  # Rotate at 50MB (default: 100MB)\n)\nlogger = AuditLogger(storage)\n</code></pre> <p>File structure: <pre><code>/var/log/ai-audit/\n\u251c\u2500\u2500 audit_20260128.jsonl\n\u251c\u2500\u2500 audit_20260128_001.jsonl  # Rotated file\n\u251c\u2500\u2500 audit_20260129.jsonl\n\u2514\u2500\u2500 ...\n</code></pre></p>"},{"location":"tutorials/audit-logging/#s3-storage","title":"S3 Storage","text":"<p>Cloud-native storage with AWS S3:</p> <pre><code>from rotalabs_comply import AuditLogger\nfrom rotalabs_comply.audit import S3Storage\n\n# Create S3 storage backend\nstorage = S3Storage(\n    bucket=\"my-audit-bucket\",\n    prefix=\"prod/ai-audit/\",\n    region=\"us-west-2\",\n)\n\n# Create logger\nlogger = AuditLogger(storage)\n\n# Log entries (stored as individual JSON files in S3)\nentry_id = await logger.log(\n    input=\"Query\",\n    output=\"Response\",\n    provider=\"openai\",\n    model=\"gpt-4\",\n    safety_passed=True,\n    latency_ms=100.0,\n)\n# Stored at: s3://my-audit-bucket/prod/ai-audit/2026-01-29/abc-123.json\n</code></pre> <p>S3 Lifecycle Policy for retention: <pre><code>{\n    \"Rules\": [\n        {\n            \"ID\": \"audit-log-retention\",\n            \"Status\": \"Enabled\",\n            \"Filter\": {\n                \"Prefix\": \"prod/ai-audit/\"\n            },\n            \"Expiration\": {\n                \"Days\": 365\n            }\n        }\n    ]\n}\n</code></pre></p>"},{"location":"tutorials/audit-logging/#memory-storage","title":"Memory Storage","text":"<p>For testing and development:</p> <pre><code>from rotalabs_comply import AuditLogger\nfrom rotalabs_comply.audit import MemoryStorage\n\n# Create memory storage with entry limit\nstorage = MemoryStorage(max_entries=1000)\nlogger = AuditLogger(storage)\n\n# Log entries (stored in memory)\nentry_id = await logger.log(\n    input=\"Test\",\n    output=\"Test response\",\n    provider=\"test\",\n    model=\"test-model\",\n    safety_passed=True,\n    latency_ms=10.0,\n)\n\n# Check entry count\ncount = await storage.count()\nprint(f\"Stored entries: {count}\")\n</code></pre>"},{"location":"tutorials/audit-logging/#comprehensive-metadata","title":"Comprehensive Metadata","text":""},{"location":"tutorials/audit-logging/#capturing-rich-context","title":"Capturing Rich Context","text":"<pre><code>entry_id = await logger.log(\n    # Core content\n    input=\"Summarize the quarterly report\",\n    output=\"Q4 showed 15% revenue growth...\",\n\n    # Provider information\n    provider=\"openai\",\n    model=\"gpt-4-turbo\",\n\n    # Session tracking\n    conversation_id=\"conv-abc-123\",  # Link related interactions\n\n    # Safety information\n    safety_passed=True,\n    detectors_triggered=[],  # Empty if all passed\n    block_reason=None,       # Set if blocked\n    alerts=[],               # Warning messages\n\n    # Performance\n    latency_ms=450.5,\n    input_tokens=150,\n    output_tokens=200,\n\n    # Custom metadata\n    metadata={\n        \"user_id\": \"user-123\",\n        \"session_id\": \"session-456\",\n        \"department\": \"finance\",\n        \"use_case\": \"report_summarization\",\n        \"sensitivity\": \"internal\",\n    },\n)\n</code></pre>"},{"location":"tutorials/audit-logging/#safety-event-logging","title":"Safety Event Logging","text":"<p>When safety checks fail:</p> <pre><code># Log a blocked request\nentry_id = await logger.log(\n    input=\"How to hack a bank?\",\n    output=\"\",  # Empty - request was blocked\n    provider=\"openai\",\n    model=\"gpt-4\",\n    safety_passed=False,\n    detectors_triggered=[\"harmful_content\", \"illegal_activity\"],\n    block_reason=\"Content violates safety policy\",\n    alerts=[\"Harmful request detected\", \"User warned\"],\n    latency_ms=50.0,\n    metadata={\n        \"user_id\": \"user-789\",\n        \"blocked_at\": \"input\",  # Blocked before API call\n    },\n)\n</code></pre>"},{"location":"tutorials/audit-logging/#querying-audit-logs","title":"Querying Audit Logs","text":""},{"location":"tutorials/audit-logging/#retrieve-single-entry","title":"Retrieve Single Entry","text":"<pre><code># Get entry by ID\nentry = await logger.get_entry(\"abc-123-def\")\n\nif entry:\n    print(f\"Provider: {entry.provider}\")\n    print(f\"Model: {entry.model}\")\n    print(f\"Safety passed: {entry.safety_passed}\")\n    print(f\"Latency: {entry.latency_ms}ms\")\n\n    # Decrypt content if encrypted\n    if entry.input_content and logger.encryption:\n        original = logger.decrypt_content(entry.input_content)\n        print(f\"Input: {original}\")\n</code></pre>"},{"location":"tutorials/audit-logging/#query-by-time-range","title":"Query by Time Range","text":"<pre><code>from datetime import datetime, timedelta\n\n# Get entries from the last 7 days\nend = datetime.utcnow()\nstart = end - timedelta(days=7)\n\nentries = await logger.get_entries(start, end)\n\nprint(f\"Found {len(entries)} entries\")\n\n# Analyze entries\nsafety_failures = sum(1 for e in entries if not e.safety_passed)\navg_latency = sum(e.latency_ms for e in entries) / len(entries)\n\nprint(f\"Safety failures: {safety_failures}\")\nprint(f\"Average latency: {avg_latency:.2f}ms\")\n</code></pre>"},{"location":"tutorials/audit-logging/#retention-management","title":"Retention Management","text":""},{"location":"tutorials/audit-logging/#automatic-cleanup","title":"Automatic Cleanup","text":"<pre><code>from rotalabs_comply import AuditLogger\n\n# Set retention period when creating logger\nlogger = AuditLogger(\n    storage=\"/var/log/ai-audit\",\n    retention_days=365,  # Keep for 1 year\n)\n\n# Manually trigger cleanup\ndeleted_count = await logger.cleanup_expired()\nprint(f\"Deleted {deleted_count} expired entries\")\n</code></pre>"},{"location":"tutorials/audit-logging/#scheduled-cleanup","title":"Scheduled Cleanup","text":"<p>For production, schedule cleanup as a background job:</p> <pre><code>import asyncio\nfrom datetime import datetime\n\nasync def cleanup_job():\n    while True:\n        # Run at 2 AM daily\n        now = datetime.now()\n        next_run = now.replace(hour=2, minute=0, second=0)\n        if next_run &lt;= now:\n            next_run = next_run + timedelta(days=1)\n\n        sleep_seconds = (next_run - now).total_seconds()\n        await asyncio.sleep(sleep_seconds)\n\n        # Run cleanup\n        deleted = await logger.cleanup_expired()\n        print(f\"[{datetime.now()}] Cleaned up {deleted} entries\")\n\n# Start as background task\nasyncio.create_task(cleanup_job())\n</code></pre>"},{"location":"tutorials/audit-logging/#integration-with-ai-frameworks","title":"Integration with AI Frameworks","text":""},{"location":"tutorials/audit-logging/#langchain-integration","title":"LangChain Integration","text":"<pre><code>from langchain_openai import ChatOpenAI\nfrom langchain_core.messages import HumanMessage\nfrom rotalabs_comply import AuditLogger, EncryptionManager\nimport time\n\nclass AuditedChatModel:\n    def __init__(self, model_name: str, logger: AuditLogger):\n        self.llm = ChatOpenAI(model=model_name)\n        self.logger = logger\n        self.model_name = model_name\n\n    async def invoke(self, messages, **kwargs):\n        # Extract input\n        input_text = messages[-1].content if messages else \"\"\n\n        # Call LLM and measure latency\n        start = time.perf_counter()\n        response = await self.llm.ainvoke(messages, **kwargs)\n        latency_ms = (time.perf_counter() - start) * 1000\n\n        # Log the interaction\n        await self.logger.log(\n            input=input_text,\n            output=response.content,\n            provider=\"openai\",\n            model=self.model_name,\n            safety_passed=True,\n            latency_ms=latency_ms,\n            metadata=kwargs,\n        )\n\n        return response\n\n# Usage\nencryption = EncryptionManager()\nlogger = AuditLogger(\"/var/log/ai-audit\", encryption=encryption, store_content=True)\nchat = AuditedChatModel(\"gpt-4\", logger)\n\nresponse = await chat.invoke([HumanMessage(content=\"Hello!\")])\n</code></pre>"},{"location":"tutorials/audit-logging/#openai-sdk-integration","title":"OpenAI SDK Integration","text":"<pre><code>import openai\nfrom rotalabs_comply import AuditLogger\nimport time\n\nclass AuditedOpenAI:\n    def __init__(self, logger: AuditLogger):\n        self.client = openai.AsyncOpenAI()\n        self.logger = logger\n\n    async def chat_completion(self, messages, model=\"gpt-4\", **kwargs):\n        # Extract input from last user message\n        input_text = next(\n            (m[\"content\"] for m in reversed(messages) if m[\"role\"] == \"user\"),\n            \"\"\n        )\n\n        start = time.perf_counter()\n        response = await self.client.chat.completions.create(\n            model=model,\n            messages=messages,\n            **kwargs\n        )\n        latency_ms = (time.perf_counter() - start) * 1000\n\n        output_text = response.choices[0].message.content\n\n        await self.logger.log(\n            input=input_text,\n            output=output_text,\n            provider=\"openai\",\n            model=model,\n            safety_passed=True,\n            latency_ms=latency_ms,\n            input_tokens=response.usage.prompt_tokens,\n            output_tokens=response.usage.completion_tokens,\n        )\n\n        return response\n\n# Usage\nlogger = AuditLogger(\"/var/log/ai-audit\")\nclient = AuditedOpenAI(logger)\n\nresponse = await client.chat_completion(\n    messages=[{\"role\": \"user\", \"content\": \"Hello!\"}]\n)\n</code></pre>"},{"location":"tutorials/audit-logging/#best-practices","title":"Best Practices","text":""},{"location":"tutorials/audit-logging/#1-always-log-safety-events","title":"1. Always Log Safety Events","text":"<pre><code># Log even when requests are blocked\ntry:\n    response = await llm.generate(prompt)\n    await logger.log(input=prompt, output=response, safety_passed=True, ...)\nexcept SafetyError as e:\n    await logger.log(\n        input=prompt,\n        output=\"\",\n        safety_passed=False,\n        block_reason=str(e),\n        ...\n    )\n    raise\n</code></pre>"},{"location":"tutorials/audit-logging/#2-use-structured-metadata","title":"2. Use Structured Metadata","text":"<pre><code># Consistent metadata schema\nmetadata = {\n    \"user_id\": str,        # Required\n    \"session_id\": str,     # Required\n    \"department\": str,     # Optional\n    \"use_case\": str,       # Optional\n    \"sensitivity\": str,    # Optional\n}\n</code></pre>"},{"location":"tutorials/audit-logging/#3-handle-encryption-key-rotation","title":"3. Handle Encryption Key Rotation","text":"<pre><code># Store key version with encrypted data\nmetadata = {\n    \"encryption_key_version\": \"v2\",\n}\n\n# Maintain key versions for decryption\nkeys = {\n    \"v1\": old_key,\n    \"v2\": current_key,\n}\n</code></pre>"},{"location":"tutorials/audit-logging/#4-monitor-audit-log-health","title":"4. Monitor Audit Log Health","text":"<pre><code>async def check_audit_health():\n    count = await storage.count()\n    entries = await logger.get_entries(\n        datetime.utcnow() - timedelta(hours=1),\n        datetime.utcnow()\n    )\n\n    metrics = {\n        \"total_entries\": count,\n        \"hourly_volume\": len(entries),\n        \"safety_failures\": sum(1 for e in entries if not e.safety_passed),\n    }\n\n    return metrics\n</code></pre>"},{"location":"tutorials/compliance-checking/","title":"Compliance Checking Tutorial","text":"<p>This tutorial covers using the built-in compliance frameworks (EU AI Act, SOC2, HIPAA) to evaluate AI system operations against regulatory requirements.</p>"},{"location":"tutorials/compliance-checking/#overview","title":"Overview","text":"<p>Compliance checking evaluates audit entries against regulatory frameworks to identify:</p> <ul> <li>Violations -- Specific rules that were not followed</li> <li>Risk levels -- Severity of identified issues</li> <li>Remediation -- Steps to fix violations</li> <li>Gaps -- Areas needing improvement</li> </ul>"},{"location":"tutorials/compliance-checking/#understanding-compliance-frameworks","title":"Understanding Compliance Frameworks","text":""},{"location":"tutorials/compliance-checking/#framework-structure","title":"Framework Structure","text":"<p>Each framework consists of rules organized by category:</p> <pre><code>Framework (e.g., EU AI Act)\n\u251c\u2500\u2500 Category: Transparency\n\u2502   \u251c\u2500\u2500 Rule: User Notification (EUAI-002)\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 Category: Oversight\n\u2502   \u251c\u2500\u2500 Rule: Human Oversight Documentation (EUAI-001)\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 Category: Risk Management\n\u2502   \u251c\u2500\u2500 Rule: Risk Assessment (EUAI-003)\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 ...\n</code></pre>"},{"location":"tutorials/compliance-checking/#creating-audit-entries-for-compliance","title":"Creating Audit Entries for Compliance","text":"<p>Audit entries need specific fields for compliance checking:</p> <pre><code>from datetime import datetime\nfrom rotalabs_comply.frameworks.base import AuditEntry, RiskLevel\n\nentry = AuditEntry(\n    # Required identifiers\n    entry_id=\"entry-001\",\n    timestamp=datetime.utcnow(),\n\n    # Event classification\n    event_type=\"inference\",       # Type of operation\n    actor=\"user@example.com\",     # Who performed it\n    action=\"AI response generation\",\n\n    # Resource being accessed\n    resource=\"customer_support_model\",\n    system_id=\"prod-ai-001\",\n\n    # Risk and data classification\n    risk_level=RiskLevel.HIGH,\n    data_classification=\"confidential\",\n\n    # Compliance-relevant flags\n    user_notified=True,           # Transparency: user knows about AI\n    human_oversight=True,         # Oversight: human reviewed\n    error_handled=True,           # Robustness: errors handled gracefully\n    documentation_ref=\"DOC-001\",  # Documentation: reference to docs\n\n    # Framework-specific metadata\n    metadata={\n        # EU AI Act\n        \"risk_assessment_documented\": True,\n        \"accuracy_monitored\": True,\n        \"security_validated\": True,\n        \"data_governance_documented\": True,\n\n        # SOC2\n        \"access_controlled\": True,\n        \"monitored\": True,\n        \"change_approved\": True,\n\n        # HIPAA (if PHI involved)\n        \"encryption_enabled\": True,\n        \"authenticated\": True,\n        \"purpose_documented\": True,\n        \"minimum_necessary_applied\": True,\n    },\n)\n</code></pre>"},{"location":"tutorials/compliance-checking/#eu-ai-act-compliance","title":"EU AI Act Compliance","text":"<p>The EU AI Act (2024) regulates AI systems based on risk level. The framework focuses on high-risk system requirements.</p>"},{"location":"tutorials/compliance-checking/#rule-categories","title":"Rule Categories","text":"Category Focus <code>transparency</code> User notification of AI interaction <code>oversight</code> Human oversight documentation <code>risk_management</code> Risk assessment, error handling, accuracy <code>documentation</code> Technical and data governance docs <code>security</code> Cybersecurity measures"},{"location":"tutorials/compliance-checking/#basic-usage","title":"Basic Usage","text":"<pre><code>import asyncio\nfrom datetime import datetime\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\n\nasync def main():\n    # Create framework\n    framework = EUAIActFramework()\n\n    # List available rules\n    print(\"EU AI Act Rules:\")\n    for rule in framework.rules:\n        print(f\"  {rule.rule_id}: {rule.name} [{rule.severity.value}]\")\n\n    # Create an audit entry\n    entry = AuditEntry(\n        entry_id=\"eu-test-001\",\n        timestamp=datetime.utcnow(),\n        event_type=\"inference\",\n        actor=\"api-user\",\n        action=\"AI chatbot response\",\n        risk_level=RiskLevel.HIGH,\n        user_notified=True,\n        human_oversight=True,\n        metadata={\n            \"risk_assessment_documented\": True,\n            \"security_validated\": True,\n        },\n    )\n\n    # Create profile\n    profile = ComplianceProfile(\n        profile_id=\"eu-ai-profile\",\n        name=\"EU AI Act Compliance\",\n        enabled_frameworks=[\"EU AI Act\"],\n    )\n\n    # Check compliance\n    result = await framework.check(entry, profile)\n\n    print(f\"\\nCompliance Check Result:\")\n    print(f\"  Compliant: {result.is_compliant}\")\n    print(f\"  Rules checked: {result.rules_checked}\")\n    print(f\"  Rules passed: {result.rules_passed}\")\n\n    if result.violations:\n        print(f\"\\nViolations ({len(result.violations)}):\")\n        for v in result.violations:\n            print(f\"  [{v.severity.value.upper()}] {v.rule_name}\")\n            print(f\"    Evidence: {v.evidence}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/compliance-checking/#key-requirements","title":"Key Requirements","text":"<p>EUAI-001: Human Oversight <pre><code># For high-risk operations, human_oversight must be True\nentry = AuditEntry(\n    ...,\n    risk_level=RiskLevel.HIGH,\n    human_oversight=True,  # Required for high-risk\n)\n</code></pre></p> <p>EUAI-002: Transparency <pre><code># For user-facing interactions, user must be notified\nentry = AuditEntry(\n    ...,\n    event_type=\"inference\",  # User-facing event\n    user_notified=True,      # User knows it's AI\n)\n</code></pre></p> <p>EUAI-003: Risk Assessment <pre><code># High-risk operations need documented risk assessment\nentry = AuditEntry(\n    ...,\n    risk_level=RiskLevel.HIGH,\n    metadata={\"risk_assessment_documented\": True},\n)\n</code></pre></p>"},{"location":"tutorials/compliance-checking/#soc2-compliance","title":"SOC2 Compliance","text":"<p>SOC2 Type II evaluates operational effectiveness of security controls based on AICPA Trust Service Criteria.</p>"},{"location":"tutorials/compliance-checking/#trust-service-categories","title":"Trust Service Categories","text":"Category Code Focus Security CC Access controls, monitoring, incident response Availability A SLA monitoring, recovery objectives Processing Integrity PI Input validation, data accuracy Confidentiality C Data classification Privacy P Privacy notices for personal data"},{"location":"tutorials/compliance-checking/#basic-usage_1","title":"Basic Usage","text":"<pre><code>import asyncio\nfrom datetime import datetime\nfrom rotalabs_comply.frameworks.soc2 import SOC2Framework\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\n\nasync def main():\n    framework = SOC2Framework()\n\n    # List categories\n    categories = framework.list_categories()\n    print(f\"SOC2 Categories: {categories}\")\n\n    # Create audit entry with SOC2-relevant metadata\n    entry = AuditEntry(\n        entry_id=\"soc2-test-001\",\n        timestamp=datetime.utcnow(),\n        event_type=\"data_access\",\n        actor=\"admin@company.com\",  # Authenticated user\n        action=\"Query customer database\",\n        system_id=\"prod-db-001\",\n        data_classification=\"confidential\",\n        metadata={\n            \"access_controlled\": True,\n            \"monitored\": True,\n            \"change_approved\": True,\n        },\n    )\n\n    profile = ComplianceProfile(\n        profile_id=\"soc2-profile\",\n        name=\"SOC2 Compliance\",\n        enabled_frameworks=[\"SOC2 Type II\"],\n    )\n\n    result = await framework.check(entry, profile)\n\n    print(f\"\\nSOC2 Check Result:\")\n    print(f\"  Compliant: {result.is_compliant}\")\n    print(f\"  Violations: {len(result.violations)}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/compliance-checking/#key-requirements_1","title":"Key Requirements","text":"<p>CC6.1: Logical Access Controls <pre><code># All access events need authentication and authorization\nentry = AuditEntry(\n    ...,\n    event_type=\"data_access\",\n    actor=\"user@company.com\",  # Must be authenticated (not \"anonymous\")\n    metadata={\"access_controlled\": True},\n)\n</code></pre></p> <p>CC6.3: Change Management <pre><code># Changes need approval and documentation\nentry = AuditEntry(\n    ...,\n    event_type=\"deployment\",\n    documentation_ref=\"CHG-001\",  # Change ticket\n    metadata={\"change_approved\": True},\n)\n</code></pre></p> <p>C1.1: Confidentiality Classification <pre><code># Data must be classified\nentry = AuditEntry(\n    ...,\n    event_type=\"data_access\",\n    data_classification=\"confidential\",  # Not \"unclassified\"\n)\n</code></pre></p>"},{"location":"tutorials/compliance-checking/#hipaa-compliance","title":"HIPAA Compliance","text":"<p>HIPAA applies to systems processing Protected Health Information (PHI). Rules are only evaluated for PHI-related entries.</p>"},{"location":"tutorials/compliance-checking/#phi-detection","title":"PHI Detection","text":"<p>The framework identifies PHI-related entries by data classification:</p> <pre><code># These classifications trigger HIPAA evaluation\nphi_classifications = {\n    \"PHI\", \"ePHI\", \"protected_health_information\",\n    \"health_data\", \"medical\", \"clinical\"\n}\n</code></pre>"},{"location":"tutorials/compliance-checking/#basic-usage_2","title":"Basic Usage","text":"<pre><code>import asyncio\nfrom datetime import datetime\nfrom rotalabs_comply.frameworks.hipaa import HIPAAFramework\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\n\nasync def main():\n    framework = HIPAAFramework()\n\n    # PHI-related entry (HIPAA rules apply)\n    phi_entry = AuditEntry(\n        entry_id=\"hipaa-test-001\",\n        timestamp=datetime.utcnow(),\n        event_type=\"inference\",\n        actor=\"doctor@hospital.com\",\n        action=\"AI diagnostic assistance\",\n        data_classification=\"PHI\",  # Triggers HIPAA\n        metadata={\n            \"access_controlled\": True,\n            \"encryption_enabled\": True,\n            \"authenticated\": True,\n            \"purpose_documented\": True,\n            \"minimum_necessary_applied\": True,\n        },\n    )\n\n    # Non-PHI entry (HIPAA rules don't apply)\n    non_phi_entry = AuditEntry(\n        entry_id=\"hipaa-test-002\",\n        timestamp=datetime.utcnow(),\n        event_type=\"inference\",\n        actor=\"user@company.com\",\n        action=\"General AI query\",\n        data_classification=\"internal\",  # Not PHI\n    )\n\n    profile = ComplianceProfile(\n        profile_id=\"hipaa-profile\",\n        name=\"HIPAA Compliance\",\n        enabled_frameworks=[\"HIPAA\"],\n    )\n\n    # Check PHI entry\n    result1 = await framework.check(phi_entry, profile)\n    print(f\"PHI Entry - Rules checked: {result1.rules_checked}\")\n\n    # Check non-PHI entry\n    result2 = await framework.check(non_phi_entry, profile)\n    print(f\"Non-PHI Entry - Rules checked: {result2.rules_checked}\")  # 0\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/compliance-checking/#key-requirements_2","title":"Key Requirements","text":"<p>164.312(a): Access Control <pre><code># PHI access requires authentication, authorization, and encryption\nentry = AuditEntry(\n    ...,\n    data_classification=\"PHI\",\n    actor=\"nurse@hospital.com\",  # Authenticated\n    metadata={\n        \"access_controlled\": True,\n        \"encryption_enabled\": True,\n    },\n)\n</code></pre></p> <p>164.312(d): Authentication <pre><code># Strong authentication required, MFA for high-risk\nentry = AuditEntry(\n    ...,\n    event_type=\"bulk_access\",  # High-risk operation\n    data_classification=\"PHI\",\n    metadata={\n        \"authenticated\": True,\n        \"mfa_verified\": True,  # Required for high-risk\n    },\n)\n</code></pre></p> <p>164.502: Minimum Necessary <pre><code># PHI use must be limited to minimum necessary\nentry = AuditEntry(\n    ...,\n    data_classification=\"PHI\",\n    metadata={\n        \"purpose_documented\": True,\n        \"minimum_necessary_applied\": True,\n    },\n)\n</code></pre></p>"},{"location":"tutorials/compliance-checking/#multi-framework-compliance","title":"Multi-Framework Compliance","text":"<p>Check against multiple frameworks simultaneously:</p> <pre><code>import asyncio\nfrom datetime import datetime\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.soc2 import SOC2Framework\nfrom rotalabs_comply.frameworks.hipaa import HIPAAFramework\nfrom rotalabs_comply.frameworks.base import AuditEntry, ComplianceProfile, RiskLevel\n\nasync def main():\n    # Initialize all frameworks\n    frameworks = {\n        \"eu_ai_act\": EUAIActFramework(),\n        \"soc2\": SOC2Framework(),\n        \"hipaa\": HIPAAFramework(),\n    }\n\n    # Create comprehensive entry\n    entry = AuditEntry(\n        entry_id=\"multi-test-001\",\n        timestamp=datetime.utcnow(),\n        event_type=\"inference\",\n        actor=\"clinician@hospital.eu\",\n        action=\"AI-assisted diagnosis\",\n        system_id=\"diag-ai-001\",\n        risk_level=RiskLevel.HIGH,\n        data_classification=\"PHI\",  # HIPAA relevant\n        user_notified=True,\n        human_oversight=True,\n        documentation_ref=\"DOC-DIAG-001\",\n        metadata={\n            # EU AI Act\n            \"risk_assessment_documented\": True,\n            \"accuracy_monitored\": True,\n            \"security_validated\": True,\n\n            # SOC2\n            \"access_controlled\": True,\n            \"monitored\": True,\n\n            # HIPAA\n            \"encryption_enabled\": True,\n            \"authenticated\": True,\n            \"purpose_documented\": True,\n            \"minimum_necessary_applied\": True,\n        },\n    )\n\n    profile = ComplianceProfile(\n        profile_id=\"multi-framework\",\n        name=\"Multi-Framework Compliance\",\n        enabled_frameworks=[\"EU AI Act\", \"SOC2 Type II\", \"HIPAA\"],\n    )\n\n    # Check against all frameworks\n    all_violations = []\n    for name, framework in frameworks.items():\n        result = await framework.check(entry, profile)\n        all_violations.extend(result.violations)\n        print(f\"\\n{name}:\")\n        print(f\"  Compliant: {result.is_compliant}\")\n        print(f\"  Violations: {len(result.violations)}\")\n\n    # Overall summary\n    print(f\"\\n=== Overall Summary ===\")\n    print(f\"Total violations: {len(all_violations)}\")\n\n    # Group by severity\n    for severity in [\"critical\", \"high\", \"medium\", \"low\"]:\n        count = sum(\n            1 for v in all_violations\n            if v.severity.value.lower() == severity\n        )\n        if count &gt; 0:\n            print(f\"  {severity.upper()}: {count}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/compliance-checking/#filtering-compliance-checks","title":"Filtering Compliance Checks","text":""},{"location":"tutorials/compliance-checking/#by-category","title":"By Category","text":"<pre><code># Only check security-related rules\nprofile = ComplianceProfile(\n    profile_id=\"security-only\",\n    name=\"Security Focus\",\n    enabled_categories=[\"security\", \"access_control\"],\n)\n</code></pre>"},{"location":"tutorials/compliance-checking/#by-severity","title":"By Severity","text":"<pre><code># Only report medium severity and above\nprofile = ComplianceProfile(\n    profile_id=\"high-priority\",\n    name=\"High Priority Only\",\n    min_severity=RiskLevel.MEDIUM,\n)\n</code></pre>"},{"location":"tutorials/compliance-checking/#exclude-specific-rules","title":"Exclude Specific Rules","text":"<pre><code># Skip specific rules\nprofile = ComplianceProfile(\n    profile_id=\"customized\",\n    name=\"Custom Profile\",\n    excluded_rules=[\"EUAI-007\", \"SOC2-CC8.1\"],\n)\n</code></pre>"},{"location":"tutorials/compliance-checking/#handling-violations","title":"Handling Violations","text":""},{"location":"tutorials/compliance-checking/#analyzing-violations","title":"Analyzing Violations","text":"<pre><code>from collections import defaultdict\n\n# Group violations by framework\nby_framework = defaultdict(list)\nfor v in all_violations:\n    by_framework[v.framework].append(v)\n\n# Group by severity\nby_severity = defaultdict(list)\nfor v in all_violations:\n    by_severity[v.severity.value].append(v)\n\n# Group by category\nby_category = defaultdict(list)\nfor v in all_violations:\n    by_category[v.category].append(v)\n</code></pre>"},{"location":"tutorials/compliance-checking/#remediation-tracking","title":"Remediation Tracking","text":"<pre><code># Track remediation progress\nremediations = {}\n\nfor violation in all_violations:\n    remediations[violation.rule_id] = {\n        \"rule_name\": violation.rule_name,\n        \"severity\": violation.severity.value,\n        \"remediation\": violation.remediation,\n        \"status\": \"pending\",\n        \"assigned_to\": None,\n        \"due_date\": None,\n    }\n\n# Assign and track\nremediations[\"EUAI-001\"][\"assigned_to\"] = \"compliance-team\"\nremediations[\"EUAI-001\"][\"due_date\"] = \"2026-02-15\"\nremediations[\"EUAI-001\"][\"status\"] = \"in_progress\"\n</code></pre>"},{"location":"tutorials/compliance-checking/#custom-rule-checks","title":"Custom Rule Checks","text":"<p>Add custom validation logic to rules:</p> <pre><code>from rotalabs_comply.frameworks.base import ComplianceRule, RiskLevel\n\ndef check_custom_requirement(entry):\n    \"\"\"Custom check: require specific metadata field.\"\"\"\n    return entry.metadata.get(\"custom_approval\", False)\n\ncustom_rule = ComplianceRule(\n    rule_id=\"CUSTOM-001\",\n    name=\"Custom Approval Required\",\n    description=\"All AI operations require custom approval flag\",\n    severity=RiskLevel.MEDIUM,\n    category=\"custom\",\n    check_fn=check_custom_requirement,  # Custom check function\n    remediation=\"Set custom_approval=True in metadata\",\n)\n</code></pre>"},{"location":"tutorials/compliance-checking/#best-practices","title":"Best Practices","text":""},{"location":"tutorials/compliance-checking/#1-document-everything","title":"1. Document Everything","text":"<pre><code># Ensure documentation references exist for significant events\nsignificant_events = [\"deployment\", \"training\", \"model_update\"]\nif entry.event_type in significant_events:\n    assert entry.documentation_ref, \"Documentation required\"\n</code></pre>"},{"location":"tutorials/compliance-checking/#2-consistent-metadata-schema","title":"2. Consistent Metadata Schema","text":"<pre><code># Define required metadata by framework\nrequired_metadata = {\n    \"eu_ai_act\": [\"risk_assessment_documented\"],\n    \"soc2\": [\"access_controlled\", \"monitored\"],\n    \"hipaa\": [\"encryption_enabled\", \"authenticated\"],\n}\n\n# Validate before logging\ndef validate_metadata(entry, frameworks):\n    for fw in frameworks:\n        for field in required_metadata.get(fw, []):\n            if field not in entry.metadata:\n                raise ValueError(f\"Missing {field} for {fw}\")\n</code></pre>"},{"location":"tutorials/compliance-checking/#3-regular-compliance-scans","title":"3. Regular Compliance Scans","text":"<pre><code>async def daily_compliance_scan(logger, frameworks, profile):\n    \"\"\"Run daily compliance scan on recent entries.\"\"\"\n    from datetime import datetime, timedelta\n\n    end = datetime.utcnow()\n    start = end - timedelta(days=1)\n\n    entries = await logger.get_entries(start, end)\n\n    all_violations = []\n    for entry in entries:\n        for fw in frameworks.values():\n            result = await fw.check(entry, profile)\n            all_violations.extend(result.violations)\n\n    return {\n        \"entries_checked\": len(entries),\n        \"total_violations\": len(all_violations),\n        \"critical\": sum(1 for v in all_violations if v.severity.value == \"critical\"),\n        \"high\": sum(1 for v in all_violations if v.severity.value == \"high\"),\n    }\n</code></pre>"},{"location":"tutorials/report-generation/","title":"Report Generation Tutorial","text":"<p>This tutorial covers generating and exporting compliance reports from audit data, including customization and scheduling for automated reporting.</p>"},{"location":"tutorials/report-generation/#overview","title":"Overview","text":"<p>Compliance reports summarize audit data and compliance check results for stakeholders:</p> <ul> <li>Executive summaries for leadership</li> <li>Risk assessments for security teams</li> <li>Compliance matrices for auditors</li> <li>Recommendations for operations teams</li> </ul>"},{"location":"tutorials/report-generation/#basic-report-generation","title":"Basic Report Generation","text":""},{"location":"tutorials/report-generation/#setup","title":"Setup","text":"<pre><code>import asyncio\nfrom datetime import datetime, timedelta\nfrom rotalabs_comply import AuditLogger, ReportGenerator\nfrom rotalabs_comply.audit import MemoryStorage\nfrom rotalabs_comply.frameworks.base import ComplianceProfile\nfrom rotalabs_comply.frameworks.eu_ai_act import EUAIActFramework\nfrom rotalabs_comply.frameworks.soc2 import SOC2Framework\nfrom rotalabs_comply.frameworks.hipaa import HIPAAFramework\n\n# Set up storage and logger\nstorage = MemoryStorage()\nlogger = AuditLogger(storage)\n\n# Create report generator with frameworks\ngenerator = ReportGenerator(\n    audit_logger=storage,\n    frameworks={\n        \"eu_ai_act\": EUAIActFramework(),\n        \"soc2\": SOC2Framework(),\n        \"hipaa\": HIPAAFramework(),\n    },\n)\n\n# Create compliance profile\nprofile = ComplianceProfile(\n    profile_id=\"production\",\n    name=\"Production AI System\",\n    enabled_frameworks=[\"eu_ai_act\", \"soc2\"],\n)\n</code></pre>"},{"location":"tutorials/report-generation/#generate-full-report","title":"Generate Full Report","text":"<pre><code>async def main():\n    # First, log some entries\n    for i in range(100):\n        await logger.log(\n            input=f\"Query {i}\",\n            output=f\"Response {i}\",\n            provider=\"openai\",\n            model=\"gpt-4\",\n            safety_passed=i % 10 != 0,  # 10% failure rate\n            latency_ms=100 + i,\n        )\n\n    # Define reporting period\n    end = datetime.utcnow()\n    start = end - timedelta(days=30)\n\n    # Generate report\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    print(f\"Report: {report.title}\")\n    print(f\"ID: {report.id}\")\n    print(f\"Period: {report.period_start} to {report.period_end}\")\n    print(f\"Entries analyzed: {report.total_entries}\")\n    print(f\"Violations found: {report.violations_count}\")\n    print(f\"Compliance score: {report.compliance_score:.2%}\")\n    print(f\"Status: {report.status}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"tutorials/report-generation/#export-formats","title":"Export Formats","text":""},{"location":"tutorials/report-generation/#markdown-export","title":"Markdown Export","text":"<p>Perfect for documentation systems and README files:</p> <pre><code># Export to Markdown\nmarkdown = generator.export_markdown(report)\n\n# Save to file\nwith open(\"compliance_report.md\", \"w\") as f:\n    f.write(markdown)\n\n# Preview\nprint(markdown[:1000])\n</code></pre> <p>Output structure: <pre><code># Compliance Report - Production AI System\n\n**Report ID:** abc-123-def\n**Generated:** 2026-01-29 10:30:00 UTC\n**Period:** 2026-01-01 to 2026-01-29\n**Framework:** Multiple\n**Profile:** Production AI System\n\n---\n\n**Compliance Score:** 95.50%\n**Status:** COMPLIANT\n**Total Entries:** 10,000\n**Violations:** 45\n\n---\n\n## Executive Summary\n\n**Compliance Status: COMPLIANT**\n...\n</code></pre></p>"},{"location":"tutorials/report-generation/#json-export","title":"JSON Export","text":"<p>For programmatic processing and API integration:</p> <pre><code>import json\n\n# Export to JSON\njson_str = generator.export_json(report)\n\n# Save to file\nwith open(\"compliance_report.json\", \"w\") as f:\n    f.write(json_str)\n\n# Load and process\ndata = json.loads(json_str)\nprint(f\"Score: {data['compliance_score']}\")\nprint(f\"Sections: {len(data['sections'])}\")\n</code></pre>"},{"location":"tutorials/report-generation/#html-export","title":"HTML Export","text":"<p>Standalone reports for stakeholders:</p> <pre><code># Export to HTML\nhtml = generator.export_html(report)\n\n# Save to file\nwith open(\"compliance_report.html\", \"w\") as f:\n    f.write(html)\n\n# Open in browser (optional)\nimport webbrowser\nwebbrowser.open(\"compliance_report.html\")\n</code></pre> <p>The HTML export includes: - Embedded CSS styling - Color-coded status badges - Responsive layout - Tables with alternating row colors - Professional formatting</p>"},{"location":"tutorials/report-generation/#report-sections","title":"Report Sections","text":""},{"location":"tutorials/report-generation/#executive-summary","title":"Executive Summary","text":"<p>High-level overview for leadership:</p> <pre><code># Access executive summary section\nfor section in report.sections:\n    if section.title == \"Executive Summary\":\n        print(section.content)\n        print(f\"Status: {section.metadata.get('status')}\")\n        print(f\"Rate: {section.metadata.get('compliance_rate')}%\")\n</code></pre> <p>Content includes: - Overall compliance status - Key metrics table - Frameworks evaluated - Summary interpretation</p>"},{"location":"tutorials/report-generation/#risk-assessment","title":"Risk Assessment","text":"<p>Security-focused analysis:</p> <pre><code>for section in report.sections:\n    if section.title == \"Risk Assessment\":\n        print(f\"Overall risk: {section.metadata.get('overall_risk')}\")\n        print(f\"Severity counts: {section.metadata.get('severity_counts')}\")\n</code></pre> <p>Content includes: - Overall risk level - Severity distribution table - Findings by category - Priority findings list - Risk-based recommendations</p>"},{"location":"tutorials/report-generation/#compliance-matrix","title":"Compliance Matrix","text":"<p>Auditor-friendly rule-by-rule breakdown:</p> <pre><code>for section in report.sections:\n    if section.title == \"Compliance Matrix\":\n        print(f\"Frameworks: {section.metadata.get('frameworks')}\")\n        print(f\"Total checks: {section.metadata.get('total_checks')}\")\n        print(f\"Overall rate: {section.metadata.get('compliance_rate')}%\")\n</code></pre> <p>Content includes: - Framework summary table - Pass/fail counts per framework - Detailed violation list - Overall statistics</p>"},{"location":"tutorials/report-generation/#metrics-summary","title":"Metrics Summary","text":"<p>Performance and safety metrics:</p> <pre><code>for section in report.sections:\n    if section.title == \"Metrics Summary\":\n        print(f\"Safety rate: {section.metadata.get('safety_rate')}%\")\n        print(f\"Avg latency: {section.metadata.get('avg_latency')}ms\")\n        print(f\"P95 latency: {section.metadata.get('p95_latency')}ms\")\n</code></pre> <p>Content includes: - Volume metrics - Safety pass rates - Latency percentiles (P50, P95, P99) - Provider distribution</p>"},{"location":"tutorials/report-generation/#recommendations","title":"Recommendations","text":"<p>Prioritized action items:</p> <pre><code>for section in report.sections:\n    if section.title == \"Recommendations\":\n        print(f\"Total: {section.metadata.get('recommendation_count')}\")\n        print(f\"Immediate: {section.metadata.get('immediate_count')}\")\n        print(f\"Short-term: {section.metadata.get('short_term_count')}\")\n</code></pre> <p>Content includes: - Immediate actions (24-48 hours) - Short-term actions (1-2 weeks) - Long-term improvements - General best practices</p>"},{"location":"tutorials/report-generation/#audit-summary","title":"Audit Summary","text":"<p>Volume and activity analysis:</p> <pre><code>for section in report.sections:\n    if section.title == \"Audit Summary\":\n        print(f\"Period: {section.metadata.get('period')}\")\n        print(f\"Daily average: {section.metadata.get('avg_daily')}\")\n        print(f\"Peak volume: {section.metadata.get('peak_daily')}\")\n</code></pre> <p>Content includes: - Volume summary - Peak activity days - Failure patterns - Retention notes</p>"},{"location":"tutorials/report-generation/#framework-specific-reports","title":"Framework-Specific Reports","text":""},{"location":"tutorials/report-generation/#eu-ai-act-report","title":"EU AI Act Report","text":"<pre><code>report = await generator.generate(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n    framework=\"eu_ai_act\",\n)\n\nprint(report.title)  # \"EU AI Act Compliance Report\"\n</code></pre> <p>Template includes sections for: - Risk classification - Transparency obligations - Human oversight - Data governance - Technical documentation</p>"},{"location":"tutorials/report-generation/#soc2-report","title":"SOC2 Report","text":"<pre><code>report = await generator.generate(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n    framework=\"soc2\",\n)\n\nprint(report.title)  # \"SOC2 Type II Compliance Report\"\n</code></pre> <p>Template includes sections for: - System overview - Security controls (CC) - Availability controls (A) - Processing integrity (PI) - Confidentiality controls (C) - Privacy controls (P)</p>"},{"location":"tutorials/report-generation/#hipaa-report","title":"HIPAA Report","text":"<pre><code>report = await generator.generate(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n    framework=\"hipaa\",\n)\n\nprint(report.title)  # \"HIPAA Compliance Report\"\n</code></pre> <p>Template includes sections for: - Administrative safeguards - Physical safeguards - Technical safeguards - Breach notification - PHI handling</p>"},{"location":"tutorials/report-generation/#executive-summary-report","title":"Executive Summary Report","text":"<p>Generate a condensed report for executives:</p> <pre><code>report = await generator.generate_executive_summary(\n    period_start=start,\n    period_end=end,\n    profile=profile,\n)\n\nprint(f\"Title: {report.title}\")  # \"Executive Summary - Production AI System\"\nprint(f\"Sections: {len(report.sections)}\")  # Fewer sections\n</code></pre> <p>Executive summary includes only: - Executive summary - Risk assessment - Recommendations</p>"},{"location":"tutorials/report-generation/#scheduled-reporting","title":"Scheduled Reporting","text":""},{"location":"tutorials/report-generation/#daily-reports","title":"Daily Reports","text":"<pre><code>import asyncio\nfrom datetime import datetime, timedelta\n\nasync def generate_daily_report():\n    end = datetime.utcnow().replace(hour=0, minute=0, second=0)\n    start = end - timedelta(days=1)\n\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    # Save reports\n    date_str = start.strftime(\"%Y%m%d\")\n    generator.export_markdown(report)\n    with open(f\"reports/daily_{date_str}.md\", \"w\") as f:\n        f.write(generator.export_markdown(report))\n\n    return report\n\nasync def daily_report_scheduler():\n    while True:\n        now = datetime.now()\n        # Run at 6 AM\n        next_run = now.replace(hour=6, minute=0, second=0)\n        if next_run &lt;= now:\n            next_run += timedelta(days=1)\n\n        await asyncio.sleep((next_run - now).total_seconds())\n\n        try:\n            report = await generate_daily_report()\n            print(f\"[{datetime.now()}] Generated daily report: {report.status}\")\n        except Exception as e:\n            print(f\"[{datetime.now()}] Report generation failed: {e}\")\n</code></pre>"},{"location":"tutorials/report-generation/#weekly-reports","title":"Weekly Reports","text":"<pre><code>async def generate_weekly_report():\n    end = datetime.utcnow()\n    start = end - timedelta(days=7)\n\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    # Generate all formats\n    week_str = start.strftime(\"%Y-W%V\")\n\n    with open(f\"reports/weekly_{week_str}.md\", \"w\") as f:\n        f.write(generator.export_markdown(report))\n\n    with open(f\"reports/weekly_{week_str}.html\", \"w\") as f:\n        f.write(generator.export_html(report))\n\n    with open(f\"reports/weekly_{week_str}.json\", \"w\") as f:\n        f.write(generator.export_json(report))\n\n    return report\n</code></pre>"},{"location":"tutorials/report-generation/#monthly-reports","title":"Monthly Reports","text":"<pre><code>import calendar\n\nasync def generate_monthly_report(year: int, month: int):\n    # Calculate month boundaries\n    _, last_day = calendar.monthrange(year, month)\n    start = datetime(year, month, 1)\n    end = datetime(year, month, last_day, 23, 59, 59)\n\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    month_str = start.strftime(\"%Y-%m\")\n\n    with open(f\"reports/monthly_{month_str}.html\", \"w\") as f:\n        f.write(generator.export_html(report))\n\n    return report\n</code></pre>"},{"location":"tutorials/report-generation/#quarterly-reports","title":"Quarterly Reports","text":"<pre><code>async def generate_quarterly_report(year: int, quarter: int):\n    # Q1: Jan-Mar, Q2: Apr-Jun, Q3: Jul-Sep, Q4: Oct-Dec\n    start_month = (quarter - 1) * 3 + 1\n    end_month = start_month + 2\n    _, last_day = calendar.monthrange(year, end_month)\n\n    start = datetime(year, start_month, 1)\n    end = datetime(year, end_month, last_day, 23, 59, 59)\n\n    report = await generator.generate(\n        period_start=start,\n        period_end=end,\n        profile=profile,\n    )\n\n    quarter_str = f\"{year}-Q{quarter}\"\n\n    with open(f\"reports/quarterly_{quarter_str}.html\", \"w\") as f:\n        f.write(generator.export_html(report))\n\n    return report\n</code></pre>"},{"location":"tutorials/report-generation/#email-distribution","title":"Email Distribution","text":""},{"location":"tutorials/report-generation/#send-report-via-email","title":"Send Report via Email","text":"<pre><code>import smtplib\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\nfrom email.mime.application import MIMEApplication\n\nasync def send_compliance_report(report, recipients):\n    # Generate HTML report\n    html_content = generator.export_html(report)\n\n    # Create email\n    msg = MIMEMultipart()\n    msg[\"Subject\"] = f\"Compliance Report: {report.title} - {report.status.upper()}\"\n    msg[\"From\"] = \"compliance@company.com\"\n    msg[\"To\"] = \", \".join(recipients)\n\n    # Add summary in body\n    body = f\"\"\"\n    Compliance Report Summary\n    ========================\n    Period: {report.period_start.strftime('%Y-%m-%d')} to {report.period_end.strftime('%Y-%m-%d')}\n    Status: {report.status.upper()}\n    Compliance Score: {report.compliance_score:.2%}\n    Entries Analyzed: {report.total_entries:,}\n    Violations Found: {report.violations_count:,}\n\n    Full report attached.\n    \"\"\"\n    msg.attach(MIMEText(body, \"plain\"))\n\n    # Attach HTML report\n    attachment = MIMEApplication(html_content.encode(), Name=\"compliance_report.html\")\n    attachment[\"Content-Disposition\"] = 'attachment; filename=\"compliance_report.html\"'\n    msg.attach(attachment)\n\n    # Send\n    with smtplib.SMTP(\"smtp.company.com\", 587) as server:\n        server.starttls()\n        server.login(\"compliance@company.com\", \"password\")\n        server.send_message(msg)\n\n    print(f\"Report sent to {recipients}\")\n</code></pre>"},{"location":"tutorials/report-generation/#slack-integration","title":"Slack Integration","text":""},{"location":"tutorials/report-generation/#post-report-summary","title":"Post Report Summary","text":"<pre><code>import httpx\n\nasync def post_to_slack(report, webhook_url):\n    # Determine emoji based on status\n    emoji = {\n        \"compliant\": \":white_check_mark:\",\n        \"needs_review\": \":warning:\",\n        \"non_compliant\": \":x:\",\n    }.get(report.status, \":question:\")\n\n    # Create message\n    message = {\n        \"text\": f\"{emoji} Compliance Report Generated\",\n        \"blocks\": [\n            {\n                \"type\": \"header\",\n                \"text\": {\n                    \"type\": \"plain_text\",\n                    \"text\": f\"{emoji} {report.title}\",\n                },\n            },\n            {\n                \"type\": \"section\",\n                \"fields\": [\n                    {\n                        \"type\": \"mrkdwn\",\n                        \"text\": f\"*Status:*\\n{report.status.upper()}\",\n                    },\n                    {\n                        \"type\": \"mrkdwn\",\n                        \"text\": f\"*Score:*\\n{report.compliance_score:.2%}\",\n                    },\n                    {\n                        \"type\": \"mrkdwn\",\n                        \"text\": f\"*Entries:*\\n{report.total_entries:,}\",\n                    },\n                    {\n                        \"type\": \"mrkdwn\",\n                        \"text\": f\"*Violations:*\\n{report.violations_count:,}\",\n                    },\n                ],\n            },\n            {\n                \"type\": \"section\",\n                \"text\": {\n                    \"type\": \"mrkdwn\",\n                    \"text\": f\"Period: {report.period_start.strftime('%Y-%m-%d')} to {report.period_end.strftime('%Y-%m-%d')}\",\n                },\n            },\n        ],\n    }\n\n    # Send to Slack\n    async with httpx.AsyncClient() as client:\n        response = await client.post(webhook_url, json=message)\n        response.raise_for_status()\n</code></pre>"},{"location":"tutorials/report-generation/#custom-report-templates","title":"Custom Report Templates","text":""},{"location":"tutorials/report-generation/#using-pre-defined-templates","title":"Using Pre-defined Templates","text":"<pre><code>from rotalabs_comply.reports.templates import (\n    EU_AI_ACT_TEMPLATE,\n    SOC2_TEMPLATE,\n    HIPAA_TEMPLATE,\n    EXECUTIVE_SUMMARY_TEMPLATE,\n)\n\nprint(EU_AI_ACT_TEMPLATE.title)     # \"EU AI Act Compliance Report\"\nprint(EU_AI_ACT_TEMPLATE.sections)  # List of section names\nprint(EU_AI_ACT_TEMPLATE.format)    # \"markdown\"\n</code></pre>"},{"location":"tutorials/report-generation/#creating-custom-templates","title":"Creating Custom Templates","text":"<pre><code>from rotalabs_comply.reports.templates import ReportTemplate\n\ncustom_template = ReportTemplate(\n    framework=\"custom\",\n    title=\"Custom Compliance Report\",\n    sections=[\n        \"executive_summary\",\n        \"risk_assessment\",\n        \"custom_section\",\n        \"recommendations\",\n    ],\n    format=\"html\",\n)\n</code></pre>"},{"location":"tutorials/report-generation/#best-practices","title":"Best Practices","text":""},{"location":"tutorials/report-generation/#1-archive-reports","title":"1. Archive Reports","text":"<pre><code>import os\nfrom datetime import datetime\n\ndef archive_report(report, base_path=\"/var/reports\"):\n    # Create archive structure\n    year = report.period_end.strftime(\"%Y\")\n    month = report.period_end.strftime(\"%m\")\n    archive_dir = os.path.join(base_path, year, month)\n    os.makedirs(archive_dir, exist_ok=True)\n\n    # Save in all formats\n    timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n    base_name = f\"compliance_{timestamp}\"\n\n    with open(os.path.join(archive_dir, f\"{base_name}.md\"), \"w\") as f:\n        f.write(generator.export_markdown(report))\n\n    with open(os.path.join(archive_dir, f\"{base_name}.html\"), \"w\") as f:\n        f.write(generator.export_html(report))\n\n    with open(os.path.join(archive_dir, f\"{base_name}.json\"), \"w\") as f:\n        f.write(generator.export_json(report))\n\n    return archive_dir\n</code></pre>"},{"location":"tutorials/report-generation/#2-track-report-metrics","title":"2. Track Report Metrics","text":"<pre><code>report_metrics = []\n\nasync def generate_and_track(period_start, period_end, profile):\n    report = await generator.generate(\n        period_start=period_start,\n        period_end=period_end,\n        profile=profile,\n    )\n\n    # Track metrics over time\n    report_metrics.append({\n        \"generated_at\": datetime.now().isoformat(),\n        \"period\": f\"{period_start.date()} to {period_end.date()}\",\n        \"score\": report.compliance_score,\n        \"status\": report.status,\n        \"violations\": report.violations_count,\n        \"entries\": report.total_entries,\n    })\n\n    return report\n\n# Analyze trends\nimport pandas as pd\ndf = pd.DataFrame(report_metrics)\nprint(df.describe())\n</code></pre>"},{"location":"tutorials/report-generation/#3-alert-on-critical-status","title":"3. Alert on Critical Status","text":"<pre><code>async def generate_with_alerts(period_start, period_end, profile):\n    report = await generator.generate(\n        period_start=period_start,\n        period_end=period_end,\n        profile=profile,\n    )\n\n    # Alert on non-compliant status\n    if report.status == \"non_compliant\":\n        # Send immediate alert\n        await send_alert(\n            level=\"critical\",\n            message=f\"Non-compliant report generated: {report.violations_count} violations\",\n            report_id=report.id,\n        )\n\n    # Alert on score drops\n    previous_score = get_previous_score()\n    if previous_score and report.compliance_score &lt; previous_score - 0.05:\n        await send_alert(\n            level=\"warning\",\n            message=f\"Compliance score dropped from {previous_score:.2%} to {report.compliance_score:.2%}\",\n            report_id=report.id,\n        )\n\n    return report\n</code></pre>"}]}